ff6eb8b315a537cfcf0356265a091de6
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _BugReporting = _interopRequireDefault(require("../BugReporting/BugReporting"));
var _registerCallableModule = _interopRequireDefault(require("../Core/registerCallableModule"));
var _createPerformanceLogger = _interopRequireDefault(require("../Utilities/createPerformanceLogger"));
var _infoLog = _interopRequireDefault(require("../Utilities/infoLog"));
var _SceneTracker = _interopRequireDefault(require("../Utilities/SceneTracker"));
var _DisplayMode = require("./DisplayMode");
var _HeadlessJsTaskError = _interopRequireDefault(require("./HeadlessJsTaskError"));
var _NativeHeadlessJsTaskSupport = _interopRequireDefault(require("./NativeHeadlessJsTaskSupport"));
var _renderApplication = _interopRequireDefault(require("./renderApplication"));
var _RendererProxy = require("./RendererProxy");
var _invariant = _interopRequireDefault(require("invariant"));
var runnables = {};
var runCount = 1;
var sections = {};
var taskProviders = new Map();
var taskCancelProviders = new Map();
var componentProviderInstrumentationHook = function componentProviderInstrumentationHook(component) {
  return component();
};
var wrapperComponentProvider;
var rootViewStyleProvider;
var AppRegistry = {
  setWrapperComponentProvider: function setWrapperComponentProvider(provider) {
    wrapperComponentProvider = provider;
  },
  setRootViewStyleProvider: function setRootViewStyleProvider(provider) {
    rootViewStyleProvider = provider;
  },
  registerConfig: function registerConfig(config) {
    config.forEach(function (appConfig) {
      if (appConfig.run) {
        AppRegistry.registerRunnable(appConfig.appKey, appConfig.run);
      } else {
        (0, _invariant.default)(appConfig.component != null, 'AppRegistry.registerConfig(...): Every config is expected to set ' + 'either `run` or `component`, but `%s` has neither.', appConfig.appKey);
        AppRegistry.registerComponent(appConfig.appKey, appConfig.component, appConfig.section);
      }
    });
  },
  registerComponent: function registerComponent(appKey, componentProvider, section) {
    var scopedPerformanceLogger = (0, _createPerformanceLogger.default)();
    runnables[appKey] = function (appParameters, displayMode) {
      (0, _renderApplication.default)(componentProviderInstrumentationHook(componentProvider, scopedPerformanceLogger), appParameters.initialProps, appParameters.rootTag, wrapperComponentProvider && wrapperComponentProvider(appParameters), rootViewStyleProvider && rootViewStyleProvider(appParameters), appParameters.fabric, scopedPerformanceLogger, appKey === 'LogBox', appKey, displayMode);
    };
    if (section) {
      sections[appKey] = runnables[appKey];
    }
    return appKey;
  },
  registerRunnable: function registerRunnable(appKey, run) {
    runnables[appKey] = run;
    return appKey;
  },
  registerSection: function registerSection(appKey, component) {
    AppRegistry.registerComponent(appKey, component, true);
  },
  getAppKeys: function getAppKeys() {
    return Object.keys(runnables);
  },
  getSectionKeys: function getSectionKeys() {
    return Object.keys(sections);
  },
  getSections: function getSections() {
    return Object.assign({}, sections);
  },
  getRunnable: function getRunnable(appKey) {
    return runnables[appKey];
  },
  getRegistry: function getRegistry() {
    return {
      sections: AppRegistry.getSectionKeys(),
      runnables: Object.assign({}, runnables)
    };
  },
  setComponentProviderInstrumentationHook: function setComponentProviderInstrumentationHook(hook) {
    componentProviderInstrumentationHook = hook;
  },
  runApplication: function runApplication(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var logParams = __DEV__ ? ` with ${JSON.stringify(appParameters)}` : '';
      var msg = `Running "${appKey}"${logParams}`;
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.runApplication' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey], `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    _SceneTracker.default.setActiveScene({
      name: appKey
    });
    runnables[appKey](appParameters, (0, _DisplayMode.coerceDisplayMode)(displayMode));
  },
  setSurfaceProps: function setSurfaceProps(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var msg = 'Updating props for Surface "' + appKey + '" with ' + JSON.stringify(appParameters);
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.setSurfaceProps' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey], `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    runnables[appKey](appParameters, (0, _DisplayMode.coerceDisplayMode)(displayMode));
  },
  unmountApplicationComponentAtRootTag: function unmountApplicationComponentAtRootTag(rootTag) {
    (0, _RendererProxy.unmountComponentAtNodeAndRemoveContainer)(rootTag);
  },
  registerHeadlessTask: function registerHeadlessTask(taskKey, taskProvider) {
    this.registerCancellableHeadlessTask(taskKey, taskProvider, function () {
      return function () {};
    });
  },
  registerCancellableHeadlessTask: function registerCancellableHeadlessTask(taskKey, taskProvider, taskCancelProvider) {
    if (taskProviders.has(taskKey)) {
      console.warn(`registerHeadlessTask or registerCancellableHeadlessTask called multiple times for same key '${taskKey}'`);
    }
    taskProviders.set(taskKey, taskProvider);
    taskCancelProviders.set(taskKey, taskCancelProvider);
  },
  startHeadlessTask: function startHeadlessTask(taskId, taskKey, data) {
    var taskProvider = taskProviders.get(taskKey);
    if (!taskProvider) {
      console.warn(`No task registered for key ${taskKey}`);
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
      return;
    }
    taskProvider()(data).then(function () {
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
    }).catch(function (reason) {
      console.error(reason);
      if (_NativeHeadlessJsTaskSupport.default && reason instanceof _HeadlessJsTaskError.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskRetry(taskId).then(function (retryPosted) {
          if (!retryPosted) {
            _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
          }
        });
      }
    });
  },
  cancelHeadlessTask: function cancelHeadlessTask(taskId, taskKey) {
    var taskCancelProvider = taskCancelProviders.get(taskKey);
    if (!taskCancelProvider) {
      throw new Error(`No task canceller registered for key '${taskKey}'`);
    }
    taskCancelProvider()();
  }
};
AppRegistry.registerComponent('LogBox', function () {
  if (__DEV__ && typeof jest === 'undefined') {
    return require("../LogBox/LogBoxInspectorContainer").default;
  } else {
    return function NoOp() {
      return null;
    };
  }
});
global.RN$AppRegistry = AppRegistry;
global.RN$SurfaceRegistry = {
  renderSurface: AppRegistry.runApplication,
  setSurfaceProps: AppRegistry.setSurfaceProps
};
(0, _registerCallableModule.default)('AppRegistry', AppRegistry);
module.exports = AppRegistry;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQnVnUmVwb3J0aW5nIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcmVnaXN0ZXJDYWxsYWJsZU1vZHVsZSIsIl9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlciIsIl9pbmZvTG9nIiwiX1NjZW5lVHJhY2tlciIsIl9EaXNwbGF5TW9kZSIsIl9IZWFkbGVzc0pzVGFza0Vycm9yIiwiX05hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCIsIl9yZW5kZXJBcHBsaWNhdGlvbiIsIl9SZW5kZXJlclByb3h5IiwiX2ludmFyaWFudCIsInJ1bm5hYmxlcyIsInJ1bkNvdW50Iiwic2VjdGlvbnMiLCJ0YXNrUHJvdmlkZXJzIiwiTWFwIiwidGFza0NhbmNlbFByb3ZpZGVycyIsImNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayIsImNvbXBvbmVudCIsIndyYXBwZXJDb21wb25lbnRQcm92aWRlciIsInJvb3RWaWV3U3R5bGVQcm92aWRlciIsIkFwcFJlZ2lzdHJ5Iiwic2V0V3JhcHBlckNvbXBvbmVudFByb3ZpZGVyIiwicHJvdmlkZXIiLCJzZXRSb290Vmlld1N0eWxlUHJvdmlkZXIiLCJyZWdpc3RlckNvbmZpZyIsImNvbmZpZyIsImZvckVhY2giLCJhcHBDb25maWciLCJydW4iLCJyZWdpc3RlclJ1bm5hYmxlIiwiYXBwS2V5IiwiaW52YXJpYW50IiwicmVnaXN0ZXJDb21wb25lbnQiLCJzZWN0aW9uIiwiY29tcG9uZW50UHJvdmlkZXIiLCJzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciIsImNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIiwiYXBwUGFyYW1ldGVycyIsImRpc3BsYXlNb2RlIiwicmVuZGVyQXBwbGljYXRpb24iLCJpbml0aWFsUHJvcHMiLCJyb290VGFnIiwiZmFicmljIiwicmVnaXN0ZXJTZWN0aW9uIiwiZ2V0QXBwS2V5cyIsIk9iamVjdCIsImtleXMiLCJnZXRTZWN0aW9uS2V5cyIsImdldFNlY3Rpb25zIiwiYXNzaWduIiwiZ2V0UnVubmFibGUiLCJnZXRSZWdpc3RyeSIsInNldENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayIsImhvb2siLCJydW5BcHBsaWNhdGlvbiIsImxvZ1BhcmFtcyIsIl9fREVWX18iLCJKU09OIiwic3RyaW5naWZ5IiwibXNnIiwiaW5mb0xvZyIsIkJ1Z1JlcG9ydGluZyIsImFkZFNvdXJjZSIsIlNjZW5lVHJhY2tlciIsInNldEFjdGl2ZVNjZW5lIiwibmFtZSIsImNvZXJjZURpc3BsYXlNb2RlIiwic2V0U3VyZmFjZVByb3BzIiwidW5tb3VudEFwcGxpY2F0aW9uQ29tcG9uZW50QXRSb290VGFnIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZUFuZFJlbW92ZUNvbnRhaW5lciIsInJlZ2lzdGVySGVhZGxlc3NUYXNrIiwidGFza0tleSIsInRhc2tQcm92aWRlciIsInJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2siLCJ0YXNrQ2FuY2VsUHJvdmlkZXIiLCJoYXMiLCJjb25zb2xlIiwid2FybiIsInNldCIsInN0YXJ0SGVhZGxlc3NUYXNrIiwidGFza0lkIiwiZGF0YSIsImdldCIsIk5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCIsIm5vdGlmeVRhc2tGaW5pc2hlZCIsInRoZW4iLCJjYXRjaCIsInJlYXNvbiIsImVycm9yIiwiSGVhZGxlc3NKc1Rhc2tFcnJvciIsIm5vdGlmeVRhc2tSZXRyeSIsInJldHJ5UG9zdGVkIiwiY2FuY2VsSGVhZGxlc3NUYXNrIiwiRXJyb3IiLCJqZXN0IiwiZGVmYXVsdCIsIk5vT3AiLCJnbG9iYWwiLCJSTiRBcHBSZWdpc3RyeSIsIlJOJFN1cmZhY2VSZWdpc3RyeSIsInJlbmRlclN1cmZhY2UiLCJyZWdpc3RlckNhbGxhYmxlTW9kdWxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkFwcFJlZ2lzdHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtWaWV3U3R5bGVQcm9wfSBmcm9tICcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IHR5cGUge1Jvb3RUYWd9IGZyb20gJy4uL1R5cGVzL1Jvb3RUYWdUeXBlcyc7XG5pbXBvcnQgdHlwZSB7SVBlcmZvcm1hbmNlTG9nZ2VyfSBmcm9tICcuLi9VdGlsaXRpZXMvY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXInO1xuaW1wb3J0IHR5cGUge0Rpc3BsYXlNb2RlVHlwZX0gZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5cbmltcG9ydCBCdWdSZXBvcnRpbmcgZnJvbSAnLi4vQnVnUmVwb3J0aW5nL0J1Z1JlcG9ydGluZyc7XG5pbXBvcnQgcmVnaXN0ZXJDYWxsYWJsZU1vZHVsZSBmcm9tICcuLi9Db3JlL3JlZ2lzdGVyQ2FsbGFibGVNb2R1bGUnO1xuaW1wb3J0IGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIGZyb20gJy4uL1V0aWxpdGllcy9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcic7XG5pbXBvcnQgaW5mb0xvZyBmcm9tICcuLi9VdGlsaXRpZXMvaW5mb0xvZyc7XG5pbXBvcnQgU2NlbmVUcmFja2VyIGZyb20gJy4uL1V0aWxpdGllcy9TY2VuZVRyYWNrZXInO1xuaW1wb3J0IHtjb2VyY2VEaXNwbGF5TW9kZX0gZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5pbXBvcnQgSGVhZGxlc3NKc1Rhc2tFcnJvciBmcm9tICcuL0hlYWRsZXNzSnNUYXNrRXJyb3InO1xuaW1wb3J0IE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCBmcm9tICcuL05hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCc7XG5pbXBvcnQgcmVuZGVyQXBwbGljYXRpb24gZnJvbSAnLi9yZW5kZXJBcHBsaWNhdGlvbic7XG5pbXBvcnQge3VubW91bnRDb21wb25lbnRBdE5vZGVBbmRSZW1vdmVDb250YWluZXJ9IGZyb20gJy4vUmVuZGVyZXJQcm94eSc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnR5cGUgVGFzayA9ICh0YXNrRGF0YTogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuZXhwb3J0IHR5cGUgVGFza1Byb3ZpZGVyID0gKCkgPT4gVGFzaztcbnR5cGUgVGFza0NhbmNlbGxlciA9ICgpID0+IHZvaWQ7XG50eXBlIFRhc2tDYW5jZWxQcm92aWRlciA9ICgpID0+IFRhc2tDYW5jZWxsZXI7XG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudFByb3ZpZGVyID0gKCkgPT4gUmVhY3QkQ29tcG9uZW50VHlwZTxhbnk+O1xuZXhwb3J0IHR5cGUgQ29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rID0gKFxuICBjb21wb25lbnRfOiBDb21wb25lbnRQcm92aWRlcixcbiAgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXI6IElQZXJmb3JtYW5jZUxvZ2dlcixcbikgPT4gUmVhY3QkQ29tcG9uZW50VHlwZTxhbnk+O1xuZXhwb3J0IHR5cGUgQXBwQ29uZmlnID0ge1xuICBhcHBLZXk6IHN0cmluZyxcbiAgY29tcG9uZW50PzogQ29tcG9uZW50UHJvdmlkZXIsXG4gIHJ1bj86IFJ1bm5hYmxlLFxuICBzZWN0aW9uPzogYm9vbGVhbixcbiAgLi4uXG59O1xudHlwZSBBcHBQYXJhbWV0ZXJzID0ge1xuICBpbml0aWFsUHJvcHM6ICRSZWFkT25seTx7W3N0cmluZ106IG1peGVkLCAuLi59PixcbiAgcm9vdFRhZzogUm9vdFRhZyxcbiAgZmFicmljPzogYm9vbGVhbixcbn07XG5leHBvcnQgdHlwZSBSdW5uYWJsZSA9IChcbiAgYXBwUGFyYW1ldGVyczogQXBwUGFyYW1ldGVycyxcbiAgZGlzcGxheU1vZGU6IERpc3BsYXlNb2RlVHlwZSxcbikgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIFJ1bm5hYmxlcyA9IHtbYXBwS2V5OiBzdHJpbmddOiBSdW5uYWJsZX07XG5leHBvcnQgdHlwZSBSZWdpc3RyeSA9IHtcbiAgc2VjdGlvbnM6ICRSZWFkT25seUFycmF5PHN0cmluZz4sXG4gIHJ1bm5hYmxlczogUnVubmFibGVzLFxuICAuLi5cbn07XG5leHBvcnQgdHlwZSBXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIgPSAoXG4gIGFwcFBhcmFtZXRlcnM6IE9iamVjdCxcbikgPT4gUmVhY3QkQ29tcG9uZW50VHlwZTxhbnk+O1xuZXhwb3J0IHR5cGUgUm9vdFZpZXdTdHlsZVByb3ZpZGVyID0gKGFwcFBhcmFtZXRlcnM6IE9iamVjdCkgPT4gVmlld1N0eWxlUHJvcDtcblxuY29uc3QgcnVubmFibGVzOiBSdW5uYWJsZXMgPSB7fTtcbmxldCBydW5Db3VudCA9IDE7XG5jb25zdCBzZWN0aW9uczogUnVubmFibGVzID0ge307XG5jb25zdCB0YXNrUHJvdmlkZXJzOiBNYXA8c3RyaW5nLCBUYXNrUHJvdmlkZXI+ID0gbmV3IE1hcCgpO1xuY29uc3QgdGFza0NhbmNlbFByb3ZpZGVyczogTWFwPHN0cmluZywgVGFza0NhbmNlbFByb3ZpZGVyPiA9IG5ldyBNYXAoKTtcbmxldCBjb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2s6IENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayA9XG4gIChjb21wb25lbnQ6IENvbXBvbmVudFByb3ZpZGVyKSA9PiBjb21wb25lbnQoKTtcblxubGV0IHdyYXBwZXJDb21wb25lbnRQcm92aWRlcjogP1dyYXBwZXJDb21wb25lbnRQcm92aWRlcjtcbmxldCByb290Vmlld1N0eWxlUHJvdmlkZXI6ID9Sb290Vmlld1N0eWxlUHJvdmlkZXI7XG5cbi8qKlxuICogYEFwcFJlZ2lzdHJ5YCBpcyB0aGUgSmF2YVNjcmlwdCBlbnRyeSBwb2ludCB0byBydW5uaW5nIGFsbCBSZWFjdCBOYXRpdmUgYXBwcy5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeVxuICovXG5jb25zdCBBcHBSZWdpc3RyeSA9IHtcbiAgc2V0V3JhcHBlckNvbXBvbmVudFByb3ZpZGVyKHByb3ZpZGVyOiBXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIpIHtcbiAgICB3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgfSxcblxuICBzZXRSb290Vmlld1N0eWxlUHJvdmlkZXIocHJvdmlkZXI6IFJvb3RWaWV3U3R5bGVQcm92aWRlcikge1xuICAgIHJvb3RWaWV3U3R5bGVQcm92aWRlciA9IHByb3ZpZGVyO1xuICB9LFxuXG4gIHJlZ2lzdGVyQ29uZmlnKGNvbmZpZzogQXJyYXk8QXBwQ29uZmlnPik6IHZvaWQge1xuICAgIGNvbmZpZy5mb3JFYWNoKGFwcENvbmZpZyA9PiB7XG4gICAgICBpZiAoYXBwQ29uZmlnLnJ1bikge1xuICAgICAgICBBcHBSZWdpc3RyeS5yZWdpc3RlclJ1bm5hYmxlKGFwcENvbmZpZy5hcHBLZXksIGFwcENvbmZpZy5ydW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgIGFwcENvbmZpZy5jb21wb25lbnQgIT0gbnVsbCxcbiAgICAgICAgICAnQXBwUmVnaXN0cnkucmVnaXN0ZXJDb25maWcoLi4uKTogRXZlcnkgY29uZmlnIGlzIGV4cGVjdGVkIHRvIHNldCAnICtcbiAgICAgICAgICAgICdlaXRoZXIgYHJ1bmAgb3IgYGNvbXBvbmVudGAsIGJ1dCBgJXNgIGhhcyBuZWl0aGVyLicsXG4gICAgICAgICAgYXBwQ29uZmlnLmFwcEtleSxcbiAgICAgICAgKTtcbiAgICAgICAgQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoXG4gICAgICAgICAgYXBwQ29uZmlnLmFwcEtleSxcbiAgICAgICAgICBhcHBDb25maWcuY29tcG9uZW50LFxuICAgICAgICAgIGFwcENvbmZpZy5zZWN0aW9uLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYW4gYXBwJ3Mgcm9vdCBjb21wb25lbnQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3JlZ2lzdGVyY29tcG9uZW50XG4gICAqL1xuICByZWdpc3RlckNvbXBvbmVudChcbiAgICBhcHBLZXk6IHN0cmluZyxcbiAgICBjb21wb25lbnRQcm92aWRlcjogQ29tcG9uZW50UHJvdmlkZXIsXG4gICAgc2VjdGlvbj86IGJvb2xlYW4sXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3Qgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIgPSBjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcigpO1xuICAgIHJ1bm5hYmxlc1thcHBLZXldID0gKGFwcFBhcmFtZXRlcnMsIGRpc3BsYXlNb2RlKSA9PiB7XG4gICAgICByZW5kZXJBcHBsaWNhdGlvbihcbiAgICAgICAgY29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rKFxuICAgICAgICAgIGNvbXBvbmVudFByb3ZpZGVyLFxuICAgICAgICAgIHNjb3BlZFBlcmZvcm1hbmNlTG9nZ2VyLFxuICAgICAgICApLFxuICAgICAgICBhcHBQYXJhbWV0ZXJzLmluaXRpYWxQcm9wcyxcbiAgICAgICAgYXBwUGFyYW1ldGVycy5yb290VGFnLFxuICAgICAgICB3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXIgJiYgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyKGFwcFBhcmFtZXRlcnMpLFxuICAgICAgICByb290Vmlld1N0eWxlUHJvdmlkZXIgJiYgcm9vdFZpZXdTdHlsZVByb3ZpZGVyKGFwcFBhcmFtZXRlcnMpLFxuICAgICAgICBhcHBQYXJhbWV0ZXJzLmZhYnJpYyxcbiAgICAgICAgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIsXG4gICAgICAgIGFwcEtleSA9PT0gJ0xvZ0JveCcsIC8vIGlzIGxvZ2JveFxuICAgICAgICBhcHBLZXksXG4gICAgICAgIGRpc3BsYXlNb2RlLFxuICAgICAgKTtcbiAgICB9O1xuICAgIGlmIChzZWN0aW9uKSB7XG4gICAgICBzZWN0aW9uc1thcHBLZXldID0gcnVubmFibGVzW2FwcEtleV07XG4gICAgfVxuICAgIHJldHVybiBhcHBLZXk7XG4gIH0sXG5cbiAgcmVnaXN0ZXJSdW5uYWJsZShhcHBLZXk6IHN0cmluZywgcnVuOiBSdW5uYWJsZSk6IHN0cmluZyB7XG4gICAgcnVubmFibGVzW2FwcEtleV0gPSBydW47XG4gICAgcmV0dXJuIGFwcEtleTtcbiAgfSxcblxuICByZWdpc3RlclNlY3Rpb24oYXBwS2V5OiBzdHJpbmcsIGNvbXBvbmVudDogQ29tcG9uZW50UHJvdmlkZXIpOiB2b2lkIHtcbiAgICBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudChhcHBLZXksIGNvbXBvbmVudCwgdHJ1ZSk7XG4gIH0sXG5cbiAgZ2V0QXBwS2V5cygpOiAkUmVhZE9ubHlBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocnVubmFibGVzKTtcbiAgfSxcblxuICBnZXRTZWN0aW9uS2V5cygpOiAkUmVhZE9ubHlBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc2VjdGlvbnMpO1xuICB9LFxuXG4gIGdldFNlY3Rpb25zKCk6IFJ1bm5hYmxlcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNlY3Rpb25zLFxuICAgIH07XG4gIH0sXG5cbiAgZ2V0UnVubmFibGUoYXBwS2V5OiBzdHJpbmcpOiA/UnVubmFibGUge1xuICAgIHJldHVybiBydW5uYWJsZXNbYXBwS2V5XTtcbiAgfSxcblxuICBnZXRSZWdpc3RyeSgpOiBSZWdpc3RyeSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlY3Rpb25zOiBBcHBSZWdpc3RyeS5nZXRTZWN0aW9uS2V5cygpLFxuICAgICAgcnVubmFibGVzOiB7Li4ucnVubmFibGVzfSxcbiAgICB9O1xuICB9LFxuXG4gIHNldENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayhcbiAgICBob29rOiBDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2ssXG4gICkge1xuICAgIGNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayA9IGhvb2s7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvYWRzIHRoZSBKYXZhU2NyaXB0IGJ1bmRsZSBhbmQgcnVucyB0aGUgYXBwLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNydW5hcHBsaWNhdGlvblxuICAgKi9cbiAgcnVuQXBwbGljYXRpb24oXG4gICAgYXBwS2V5OiBzdHJpbmcsXG4gICAgYXBwUGFyYW1ldGVyczogQXBwUGFyYW1ldGVycyxcbiAgICBkaXNwbGF5TW9kZT86IG51bWJlcixcbiAgKTogdm9pZCB7XG4gICAgaWYgKGFwcEtleSAhPT0gJ0xvZ0JveCcpIHtcbiAgICAgIGNvbnN0IGxvZ1BhcmFtcyA9IF9fREVWX18gPyBgIHdpdGggJHtKU09OLnN0cmluZ2lmeShhcHBQYXJhbWV0ZXJzKX1gIDogJyc7XG4gICAgICBjb25zdCBtc2cgPSBgUnVubmluZyBcIiR7YXBwS2V5fVwiJHtsb2dQYXJhbXN9YDtcbiAgICAgIGluZm9Mb2cobXNnKTtcbiAgICAgIEJ1Z1JlcG9ydGluZy5hZGRTb3VyY2UoXG4gICAgICAgICdBcHBSZWdpc3RyeS5ydW5BcHBsaWNhdGlvbicgKyBydW5Db3VudCsrLFxuICAgICAgICAoKSA9PiBtc2csXG4gICAgICApO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoXG4gICAgICBydW5uYWJsZXNbYXBwS2V5XSxcbiAgICAgIGBcIiR7YXBwS2V5fVwiIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLiBUaGlzIGNhbiBoYXBwZW4gaWY6XFxuYCArXG4gICAgICAgICcqIE1ldHJvICh0aGUgbG9jYWwgZGV2IHNlcnZlcikgaXMgcnVuIGZyb20gdGhlIHdyb25nIGZvbGRlci4gJyArXG4gICAgICAgICdDaGVjayBpZiBNZXRybyBpcyBydW5uaW5nLCBzdG9wIGl0IGFuZCByZXN0YXJ0IGl0IGluIHRoZSBjdXJyZW50IHByb2plY3QuXFxuJyArXG4gICAgICAgIFwiKiBBIG1vZHVsZSBmYWlsZWQgdG8gbG9hZCBkdWUgdG8gYW4gZXJyb3IgYW5kIGBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudGAgd2Fzbid0IGNhbGxlZC5cIixcbiAgICApO1xuXG4gICAgU2NlbmVUcmFja2VyLnNldEFjdGl2ZVNjZW5lKHtuYW1lOiBhcHBLZXl9KTtcbiAgICBydW5uYWJsZXNbYXBwS2V5XShhcHBQYXJhbWV0ZXJzLCBjb2VyY2VEaXNwbGF5TW9kZShkaXNwbGF5TW9kZSkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgaW5pdGlhbCBwcm9wcyBmb3IgYSBzdXJmYWNlIHRoYXQncyBhbHJlYWR5IHJlbmRlcmVkXG4gICAqL1xuICBzZXRTdXJmYWNlUHJvcHMoXG4gICAgYXBwS2V5OiBzdHJpbmcsXG4gICAgYXBwUGFyYW1ldGVyczogT2JqZWN0LFxuICAgIGRpc3BsYXlNb2RlPzogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICBpZiAoYXBwS2V5ICE9PSAnTG9nQm94Jykge1xuICAgICAgY29uc3QgbXNnID1cbiAgICAgICAgJ1VwZGF0aW5nIHByb3BzIGZvciBTdXJmYWNlIFwiJyArXG4gICAgICAgIGFwcEtleSArXG4gICAgICAgICdcIiB3aXRoICcgK1xuICAgICAgICBKU09OLnN0cmluZ2lmeShhcHBQYXJhbWV0ZXJzKTtcbiAgICAgIGluZm9Mb2cobXNnKTtcbiAgICAgIEJ1Z1JlcG9ydGluZy5hZGRTb3VyY2UoXG4gICAgICAgICdBcHBSZWdpc3RyeS5zZXRTdXJmYWNlUHJvcHMnICsgcnVuQ291bnQrKyxcbiAgICAgICAgKCkgPT4gbXNnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgcnVubmFibGVzW2FwcEtleV0sXG4gICAgICBgXCIke2FwcEtleX1cIiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC4gVGhpcyBjYW4gaGFwcGVuIGlmOlxcbmAgK1xuICAgICAgICAnKiBNZXRybyAodGhlIGxvY2FsIGRldiBzZXJ2ZXIpIGlzIHJ1biBmcm9tIHRoZSB3cm9uZyBmb2xkZXIuICcgK1xuICAgICAgICAnQ2hlY2sgaWYgTWV0cm8gaXMgcnVubmluZywgc3RvcCBpdCBhbmQgcmVzdGFydCBpdCBpbiB0aGUgY3VycmVudCBwcm9qZWN0LlxcbicgK1xuICAgICAgICBcIiogQSBtb2R1bGUgZmFpbGVkIHRvIGxvYWQgZHVlIHRvIGFuIGVycm9yIGFuZCBgQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnRgIHdhc24ndCBjYWxsZWQuXCIsXG4gICAgKTtcblxuICAgIHJ1bm5hYmxlc1thcHBLZXldKGFwcFBhcmFtZXRlcnMsIGNvZXJjZURpc3BsYXlNb2RlKGRpc3BsYXlNb2RlKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN0b3BzIGFuIGFwcGxpY2F0aW9uIHdoZW4gYSB2aWV3IHNob3VsZCBiZSBkZXN0cm95ZWQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3VubW91bnRhcHBsaWNhdGlvbmNvbXBvbmVudGF0cm9vdHRhZ1xuICAgKi9cbiAgdW5tb3VudEFwcGxpY2F0aW9uQ29tcG9uZW50QXRSb290VGFnKHJvb3RUYWc6IFJvb3RUYWcpOiB2b2lkIHtcbiAgICB1bm1vdW50Q29tcG9uZW50QXROb2RlQW5kUmVtb3ZlQ29udGFpbmVyKHJvb3RUYWcpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGhlYWRsZXNzIHRhc2suIEEgaGVhZGxlc3MgdGFzayBpcyBhIGJpdCBvZiBjb2RlIHRoYXQgcnVucyB3aXRob3V0IGEgVUkuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3JlZ2lzdGVyaGVhZGxlc3N0YXNrXG4gICAqL1xuICByZWdpc3RlckhlYWRsZXNzVGFzayh0YXNrS2V5OiBzdHJpbmcsIHRhc2tQcm92aWRlcjogVGFza1Byb3ZpZGVyKTogdm9pZCB7XG4gICAgLy8gJEZsb3dGaXhNZVtvYmplY3QtdGhpcy1yZWZlcmVuY2VdXG4gICAgdGhpcy5yZWdpc3RlckNhbmNlbGxhYmxlSGVhZGxlc3NUYXNrKHRhc2tLZXksIHRhc2tQcm92aWRlciwgKCkgPT4gKCkgPT4ge1xuICAgICAgLyogQ2FuY2VsIGlzIG5vLW9wICovXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY2FuY2VsbGFibGUgaGVhZGxlc3MgdGFzay4gQSBoZWFkbGVzcyB0YXNrIGlzIGEgYml0IG9mIGNvZGUgdGhhdCBydW5zIHdpdGhvdXQgYSBVSS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjcmVnaXN0ZXJjYW5jZWxsYWJsZWhlYWRsZXNzdGFza1xuICAgKi9cbiAgcmVnaXN0ZXJDYW5jZWxsYWJsZUhlYWRsZXNzVGFzayhcbiAgICB0YXNrS2V5OiBzdHJpbmcsXG4gICAgdGFza1Byb3ZpZGVyOiBUYXNrUHJvdmlkZXIsXG4gICAgdGFza0NhbmNlbFByb3ZpZGVyOiBUYXNrQ2FuY2VsUHJvdmlkZXIsXG4gICk6IHZvaWQge1xuICAgIGlmICh0YXNrUHJvdmlkZXJzLmhhcyh0YXNrS2V5KSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgcmVnaXN0ZXJIZWFkbGVzc1Rhc2sgb3IgcmVnaXN0ZXJDYW5jZWxsYWJsZUhlYWRsZXNzVGFzayBjYWxsZWQgbXVsdGlwbGUgdGltZXMgZm9yIHNhbWUga2V5ICcke3Rhc2tLZXl9J2AsXG4gICAgICApO1xuICAgIH1cbiAgICB0YXNrUHJvdmlkZXJzLnNldCh0YXNrS2V5LCB0YXNrUHJvdmlkZXIpO1xuICAgIHRhc2tDYW5jZWxQcm92aWRlcnMuc2V0KHRhc2tLZXksIHRhc2tDYW5jZWxQcm92aWRlcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE9ubHkgY2FsbGVkIGZyb20gbmF0aXZlIGNvZGUuIFN0YXJ0cyBhIGhlYWRsZXNzIHRhc2suXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3N0YXJ0aGVhZGxlc3N0YXNrXG4gICAqL1xuICBzdGFydEhlYWRsZXNzVGFzayh0YXNrSWQ6IG51bWJlciwgdGFza0tleTogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCB0YXNrUHJvdmlkZXIgPSB0YXNrUHJvdmlkZXJzLmdldCh0YXNrS2V5KTtcbiAgICBpZiAoIXRhc2tQcm92aWRlcikge1xuICAgICAgY29uc29sZS53YXJuKGBObyB0YXNrIHJlZ2lzdGVyZWQgZm9yIGtleSAke3Rhc2tLZXl9YCk7XG4gICAgICBpZiAoTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0KSB7XG4gICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrRmluaXNoZWQodGFza0lkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGFza1Byb3ZpZGVyKCkoZGF0YSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCkge1xuICAgICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrRmluaXNoZWQodGFza0lkKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCAmJlxuICAgICAgICAgIHJlYXNvbiBpbnN0YW5jZW9mIEhlYWRsZXNzSnNUYXNrRXJyb3JcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gJEZsb3dGaXhNZVt1bnVzZWQtcHJvbWlzZV1cbiAgICAgICAgICBOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQubm90aWZ5VGFza1JldHJ5KHRhc2tJZCkudGhlbihcbiAgICAgICAgICAgIHJldHJ5UG9zdGVkID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFyZXRyeVBvc3RlZCkge1xuICAgICAgICAgICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrRmluaXNoZWQodGFza0lkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogT25seSBjYWxsZWQgZnJvbSBuYXRpdmUgY29kZS4gQ2FuY2VscyBhIGhlYWRsZXNzIHRhc2suXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I2NhbmNlbGhlYWRsZXNzdGFza1xuICAgKi9cbiAgY2FuY2VsSGVhZGxlc3NUYXNrKHRhc2tJZDogbnVtYmVyLCB0YXNrS2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCB0YXNrQ2FuY2VsUHJvdmlkZXIgPSB0YXNrQ2FuY2VsUHJvdmlkZXJzLmdldCh0YXNrS2V5KTtcbiAgICBpZiAoIXRhc2tDYW5jZWxQcm92aWRlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyB0YXNrIGNhbmNlbGxlciByZWdpc3RlcmVkIGZvciBrZXkgJyR7dGFza0tleX0nYCk7XG4gICAgfVxuICAgIHRhc2tDYW5jZWxQcm92aWRlcigpKCk7XG4gIH0sXG59O1xuXG4vLyBSZWdpc3RlciBMb2dCb3ggYXMgYSBkZWZhdWx0IHN1cmZhY2VcbkFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KCdMb2dCb3gnLCAoKSA9PiB7XG4gIGlmIChfX0RFVl9fICYmIHR5cGVvZiBqZXN0ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiByZXF1aXJlKCcuLi9Mb2dCb3gvTG9nQm94SW5zcGVjdG9yQ29udGFpbmVyJykuZGVmYXVsdDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gTm9PcCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gIH1cbn0pO1xuXG5nbG9iYWwuUk4kQXBwUmVnaXN0cnkgPSBBcHBSZWdpc3RyeTtcblxuLy8gQmFja3dhcmRzIGNvbXBhdCB3aXRoIFN1cmZhY2VSZWdpc3RyeSwgcmVtb3ZlIG1lIGxhdGVyXG5nbG9iYWwuUk4kU3VyZmFjZVJlZ2lzdHJ5ID0ge1xuICByZW5kZXJTdXJmYWNlOiBBcHBSZWdpc3RyeS5ydW5BcHBsaWNhdGlvbixcbiAgc2V0U3VyZmFjZVByb3BzOiBBcHBSZWdpc3RyeS5zZXRTdXJmYWNlUHJvcHMsXG59O1xuXG5yZWdpc3RlckNhbGxhYmxlTW9kdWxlKCdBcHBSZWdpc3RyeScsIEFwcFJlZ2lzdHJ5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBcHBSZWdpc3RyeTtcbiJdLCJtYXBwaW5ncyI6IjtBQWVBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLHVCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSx3QkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksYUFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssWUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sb0JBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLDRCQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBUSxrQkFBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVMsY0FBQSxHQUFBVCxPQUFBO0FBQ0EsSUFBQVUsVUFBQSxHQUFBWCxzQkFBQSxDQUFBQyxPQUFBO0FBdUNBLElBQU1XLFNBQW9C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