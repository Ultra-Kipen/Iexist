d825c9ed6f0f1a26ef133bb117880f68
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _classPrivateFieldLooseBase2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseBase"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _NativeAnimatedValidation = require("../../../src/private/animated/NativeAnimatedValidation");
var ReactNativeFeatureFlags = _interopRequireWildcard(require("../../../src/private/featureflags/ReactNativeFeatureFlags"));
var _flattenStyle = _interopRequireDefault(require("../../StyleSheet/flattenStyle"));
var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));
var _AnimatedNode = _interopRequireDefault(require("./AnimatedNode"));
var _AnimatedObject = _interopRequireDefault(require("./AnimatedObject"));
var _AnimatedTransform = _interopRequireDefault(require("./AnimatedTransform"));
var _AnimatedWithChildren2 = _interopRequireDefault(require("./AnimatedWithChildren"));
var _Object$hasOwn;
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = (0, _get2.default)((0, _getPrototypeOf2.default)(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function createAnimatedStyle(inputStyle, allowlist, keepUnanimatedValues) {
  var nodeKeys = [];
  var nodes = [];
  var style = {};
  var keys = Object.keys(inputStyle);
  for (var ii = 0, length = keys.length; ii < length; ii++) {
    var key = keys[ii];
    var value = inputStyle[key];
    if (allowlist == null || hasOwn(allowlist, key)) {
      var node = void 0;
      if (value != null && key === 'transform') {
        node = ReactNativeFeatureFlags.shouldUseAnimatedObjectForTransform() ? _AnimatedObject.default.from(value) : _AnimatedTransform.default.from(value);
      } else if (value instanceof _AnimatedNode.default) {
        node = value;
      } else {
        node = _AnimatedObject.default.from(value);
      }
      if (node == null) {
        if (keepUnanimatedValues) {
          style[key] = value;
        }
      } else {
        nodeKeys.push(key);
        nodes.push(node);
        style[key] = node;
      }
    } else {
      if (__DEV__) {
        if (_AnimatedObject.default.from(inputStyle[key]) != null) {
          console.error(`AnimatedStyle: ${key} is not allowlisted for animation, but it ` + 'contains AnimatedNode values; styles allowing animation: ', allowlist);
        }
      }
      if (keepUnanimatedValues) {
        style[key] = value;
      }
    }
  }
  return [nodeKeys, nodes, style];
}
var _inputStyle = (0, _classPrivateFieldLooseKey2.default)("inputStyle");
var _nodeKeys = (0, _classPrivateFieldLooseKey2.default)("nodeKeys");
var _nodes = (0, _classPrivateFieldLooseKey2.default)("nodes");
var _style = (0, _classPrivateFieldLooseKey2.default)("style");
var AnimatedStyle = exports.default = function (_AnimatedWithChildren) {
  function AnimatedStyle(nodeKeys, nodes, style, inputStyle, config) {
    var _this;
    (0, _classCallCheck2.default)(this, AnimatedStyle);
    _this = _callSuper(this, AnimatedStyle, [config]);
    Object.defineProperty(_this, _inputStyle, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(_this, _nodeKeys, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(_this, _nodes, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(_this, _style, {
      writable: true,
      value: void 0
    });
    (0, _classPrivateFieldLooseBase2.default)(_this, _nodeKeys)[_nodeKeys] = nodeKeys;
    (0, _classPrivateFieldLooseBase2.default)(_this, _nodes)[_nodes] = nodes;
    (0, _classPrivateFieldLooseBase2.default)(_this, _style)[_style] = style;
    (0, _classPrivateFieldLooseBase2.default)(_this, _inputStyle)[_inputStyle] = inputStyle;
    return _this;
  }
  (0, _inherits2.default)(AnimatedStyle, _AnimatedWithChildren);
  return (0, _createClass2.default)(AnimatedStyle, [{
    key: "__getValue",
    value: function __getValue() {
      var style = {};
      var keys = Object.keys((0, _classPrivateFieldLooseBase2.default)(this, _style)[_style]);
      for (var ii = 0, length = keys.length; ii < length; ii++) {
        var key = keys[ii];
        var value = (0, _classPrivateFieldLooseBase2.default)(this, _style)[_style][key];
        if (value instanceof _AnimatedNode.default) {
          style[key] = value.__getValue();
        } else {
          style[key] = value;
        }
      }
      return _Platform.default.OS === 'web' ? [(0, _classPrivateFieldLooseBase2.default)(this, _inputStyle)[_inputStyle], style] : style;
    }
  }, {
    key: "__getValueWithStaticStyle",
    value: function __getValueWithStaticStyle(staticStyle) {
      var flatStaticStyle = (0, _flattenStyle.default)(staticStyle);
      var style = flatStaticStyle == null ? {} : flatStaticStyle === staticStyle ? Object.assign({}, flatStaticStyle) : flatStaticStyle;
      var keys = Object.keys(style);
      for (var ii = 0, length = keys.length; ii < length; ii++) {
        var key = keys[ii];
        var maybeNode = (0, _classPrivateFieldLooseBase2.default)(this, _style)[_style][key];
        if (key === 'transform' && maybeNode instanceof _AnimatedTransform.default) {
          style[key] = maybeNode.__getValueWithStaticTransforms(Array.isArray(style[key]) ? style[key] : []);
        } else if (maybeNode instanceof _AnimatedObject.default) {
          style[key] = maybeNode.__getValueWithStaticObject(style[key]);
        } else if (maybeNode instanceof _AnimatedNode.default) {
          style[key] = maybeNode.__getValue();
        }
      }
      return _Platform.default.OS === 'web' ? [(0, _classPrivateFieldLooseBase2.default)(this, _inputStyle)[_inputStyle], style] : style;
    }
  }, {
    key: "__getAnimatedValue",
    value: function __getAnimatedValue() {
      var style = {};
      var nodeKeys = (0, _classPrivateFieldLooseBase2.default)(this, _nodeKeys)[_nodeKeys];
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _nodes)[_nodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var key = nodeKeys[ii];
        var node = nodes[ii];
        style[key] = node.__getAnimatedValue();
      }
      return style;
    }
  }, {
    key: "__attach",
    value: function __attach() {
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _nodes)[_nodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var node = nodes[ii];
        node.__addChild(this);
      }
      _superPropGet(AnimatedStyle, "__attach", this, 3)([]);
    }
  }, {
    key: "__detach",
    value: function __detach() {
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _nodes)[_nodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var node = nodes[ii];
        node.__removeChild(this);
      }
      _superPropGet(AnimatedStyle, "__detach", this, 3)([]);
    }
  }, {
    key: "__makeNative",
    value: function __makeNative(platformConfig) {
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _nodes)[_nodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var node = nodes[ii];
        node.__makeNative(platformConfig);
      }
      _superPropGet(AnimatedStyle, "__makeNative", this, 3)([platformConfig]);
    }
  }, {
    key: "__getNativeConfig",
    value: function __getNativeConfig() {
      var platformConfig = this.__getPlatformConfig();
      var styleConfig = {};
      var nodeKeys = (0, _classPrivateFieldLooseBase2.default)(this, _nodeKeys)[_nodeKeys];
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _nodes)[_nodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var key = nodeKeys[ii];
        var node = nodes[ii];
        node.__makeNative(platformConfig);
        styleConfig[key] = node.__getNativeTag();
      }
      if (__DEV__) {
        (0, _NativeAnimatedValidation.validateStyles)(styleConfig);
      }
      return {
        type: 'style',
        style: styleConfig,
        debugID: this.__getDebugID()
      };
    }
  }], [{
    key: "from",
    value: function from(inputStyle, allowlist) {
      var flatStyle = (0, _flattenStyle.default)(inputStyle);
      if (flatStyle == null) {
        return null;
      }
      var _createAnimatedStyle = createAnimatedStyle(flatStyle, allowlist, _Platform.default.OS !== 'web'),
        _createAnimatedStyle2 = (0, _slicedToArray2.default)(_createAnimatedStyle, 3),
        nodeKeys = _createAnimatedStyle2[0],
        nodes = _createAnimatedStyle2[1],
        style = _createAnimatedStyle2[2];
      if (nodes.length === 0) {
        return null;
      }
      return new AnimatedStyle(nodeKeys, nodes, style, inputStyle);
    }
  }]);
}(_AnimatedWithChildren2.default);
var _hasOwnProp = Object.prototype.hasOwnProperty;
var hasOwn = (_Object$hasOwn = Object.hasOwn) != null ? _Object$hasOwn : function (obj, prop) {
  return _hasOwnProp.call(obj, prop);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlQW5pbWF0ZWRWYWxpZGF0aW9uIiwicmVxdWlyZSIsIlJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfZmxhdHRlblN0eWxlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9QbGF0Zm9ybSIsIl9BbmltYXRlZE5vZGUiLCJfQW5pbWF0ZWRPYmplY3QiLCJfQW5pbWF0ZWRUcmFuc2Zvcm0iLCJfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4yIiwiX09iamVjdCRoYXNPd24iLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJfY2FsbFN1cGVyIiwibyIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiYXBwbHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsIl9zdXBlclByb3BHZXQiLCJwIiwiX2dldDIiLCJjcmVhdGVBbmltYXRlZFN0eWxlIiwiaW5wdXRTdHlsZSIsImFsbG93bGlzdCIsImtlZXBVbmFuaW1hdGVkVmFsdWVzIiwibm9kZUtleXMiLCJub2RlcyIsInN0eWxlIiwia2V5cyIsImlpIiwibGVuZ3RoIiwia2V5IiwidmFsdWUiLCJoYXNPd24iLCJub2RlIiwic2hvdWxkVXNlQW5pbWF0ZWRPYmplY3RGb3JUcmFuc2Zvcm0iLCJBbmltYXRlZE9iamVjdCIsImZyb20iLCJBbmltYXRlZFRyYW5zZm9ybSIsIkFuaW1hdGVkTm9kZSIsInB1c2giLCJfX0RFVl9fIiwiY29uc29sZSIsImVycm9yIiwiX2lucHV0U3R5bGUiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleTIiLCJfbm9kZUtleXMiLCJfbm9kZXMiLCJfc3R5bGUiLCJBbmltYXRlZFN0eWxlIiwiZXhwb3J0cyIsIl9BbmltYXRlZFdpdGhDaGlsZHJlbiIsImNvbmZpZyIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIndyaXRhYmxlIiwiX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlMiIsIl9pbmhlcml0czIiLCJfY3JlYXRlQ2xhc3MyIiwiX19nZXRWYWx1ZSIsIlBsYXRmb3JtIiwiT1MiLCJfX2dldFZhbHVlV2l0aFN0YXRpY1N0eWxlIiwic3RhdGljU3R5bGUiLCJmbGF0U3RhdGljU3R5bGUiLCJmbGF0dGVuU3R5bGUiLCJhc3NpZ24iLCJtYXliZU5vZGUiLCJfX2dldFZhbHVlV2l0aFN0YXRpY1RyYW5zZm9ybXMiLCJBcnJheSIsImlzQXJyYXkiLCJfX2dldFZhbHVlV2l0aFN0YXRpY09iamVjdCIsIl9fZ2V0QW5pbWF0ZWRWYWx1ZSIsIl9fYXR0YWNoIiwiX19hZGRDaGlsZCIsIl9fZGV0YWNoIiwiX19yZW1vdmVDaGlsZCIsIl9fbWFrZU5hdGl2ZSIsInBsYXRmb3JtQ29uZmlnIiwiX19nZXROYXRpdmVDb25maWciLCJfX2dldFBsYXRmb3JtQ29uZmlnIiwic3R5bGVDb25maWciLCJfX2dldE5hdGl2ZVRhZyIsInZhbGlkYXRlU3R5bGVzIiwidHlwZSIsImRlYnVnSUQiLCJfX2dldERlYnVnSUQiLCJmbGF0U3R5bGUiLCJfY3JlYXRlQW5pbWF0ZWRTdHlsZSIsIl9jcmVhdGVBbmltYXRlZFN0eWxlMiIsIl9zbGljZWRUb0FycmF5MiIsIkFuaW1hdGVkV2l0aENoaWxkcmVuIiwiX2hhc093blByb3AiLCJvYmoiLCJwcm9wIl0sInNvdXJjZXMiOlsiQW5pbWF0ZWRTdHlsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7UGxhdGZvcm1Db25maWd9IGZyb20gJy4uL0FuaW1hdGVkUGxhdGZvcm1Db25maWcnO1xuaW1wb3J0IHR5cGUge0FuaW1hdGVkTm9kZUNvbmZpZ30gZnJvbSAnLi9BbmltYXRlZE5vZGUnO1xuXG5pbXBvcnQge3ZhbGlkYXRlU3R5bGVzfSBmcm9tICcuLi8uLi8uLi9zcmMvcHJpdmF0ZS9hbmltYXRlZC9OYXRpdmVBbmltYXRlZFZhbGlkYXRpb24nO1xuaW1wb3J0ICogYXMgUmVhY3ROYXRpdmVGZWF0dXJlRmxhZ3MgZnJvbSAnLi4vLi4vLi4vc3JjL3ByaXZhdGUvZmVhdHVyZWZsYWdzL1JlYWN0TmF0aXZlRmVhdHVyZUZsYWdzJztcbmltcG9ydCBmbGF0dGVuU3R5bGUgZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9mbGF0dGVuU3R5bGUnO1xuaW1wb3J0IFBsYXRmb3JtIGZyb20gJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybSc7XG5pbXBvcnQgQW5pbWF0ZWROb2RlIGZyb20gJy4vQW5pbWF0ZWROb2RlJztcbmltcG9ydCBBbmltYXRlZE9iamVjdCBmcm9tICcuL0FuaW1hdGVkT2JqZWN0JztcbmltcG9ydCBBbmltYXRlZFRyYW5zZm9ybSBmcm9tICcuL0FuaW1hdGVkVHJhbnNmb3JtJztcbmltcG9ydCBBbmltYXRlZFdpdGhDaGlsZHJlbiBmcm9tICcuL0FuaW1hdGVkV2l0aENoaWxkcmVuJztcblxuZXhwb3J0IHR5cGUgQW5pbWF0ZWRTdHlsZUFsbG93bGlzdCA9ICRSZWFkT25seTx7W3N0cmluZ106IHRydWV9PjtcblxuZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZWRTdHlsZShcbiAgaW5wdXRTdHlsZToge1tzdHJpbmddOiBtaXhlZH0sXG4gIGFsbG93bGlzdDogP0FuaW1hdGVkU3R5bGVBbGxvd2xpc3QsXG4gIGtlZXBVbmFuaW1hdGVkVmFsdWVzOiBib29sZWFuLFxuKTogWyRSZWFkT25seUFycmF5PHN0cmluZz4sICRSZWFkT25seUFycmF5PEFuaW1hdGVkTm9kZT4sIHtbc3RyaW5nXTogbWl4ZWR9XSB7XG4gIGNvbnN0IG5vZGVLZXlzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGNvbnN0IG5vZGVzOiBBcnJheTxBbmltYXRlZE5vZGU+ID0gW107XG4gIGNvbnN0IHN0eWxlOiB7W3N0cmluZ106IG1peGVkfSA9IHt9O1xuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dFN0eWxlKTtcbiAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlzW2lpXTtcbiAgICBjb25zdCB2YWx1ZSA9IGlucHV0U3R5bGVba2V5XTtcblxuICAgIGlmIChhbGxvd2xpc3QgPT0gbnVsbCB8fCBoYXNPd24oYWxsb3dsaXN0LCBrZXkpKSB7XG4gICAgICBsZXQgbm9kZTtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIGtleSA9PT0gJ3RyYW5zZm9ybScpIHtcbiAgICAgICAgbm9kZSA9IFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzLnNob3VsZFVzZUFuaW1hdGVkT2JqZWN0Rm9yVHJhbnNmb3JtKClcbiAgICAgICAgICA/IEFuaW1hdGVkT2JqZWN0LmZyb20odmFsdWUpXG4gICAgICAgICAgOiAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXSAtIGB2YWx1ZWAgaXMgbWl4ZWQuXG4gICAgICAgICAgICBBbmltYXRlZFRyYW5zZm9ybS5mcm9tKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUpIHtcbiAgICAgICAgbm9kZSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZSA9IEFuaW1hdGVkT2JqZWN0LmZyb20odmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgICBpZiAoa2VlcFVuYW5pbWF0ZWRWYWx1ZXMpIHtcbiAgICAgICAgICBzdHlsZVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgc3R5bGVba2V5XSA9IG5vZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgIC8vIFdBUk5JTkc6IFRoaXMgaXMgYSBwb3RlbnRpYWxseSBleHBlbnNpdmUgY2hlY2sgdGhhdCB3ZSBzaG91bGQgb25seVxuICAgICAgICAvLyBkbyBpbiBkZXZlbG9wbWVudC4gV2l0aG91dCB0aGlzIGNoZWNrIGluIGRldmVsb3BtZW50LCBpdCBtaWdodCBiZVxuICAgICAgICAvLyBkaWZmaWN1bHQgdG8gaWRlbnRpZnkgd2hpY2ggc3R5bGVzIG5lZWQgdG8gYmUgYWxsb3dsaXN0ZWQuXG4gICAgICAgIGlmIChBbmltYXRlZE9iamVjdC5mcm9tKGlucHV0U3R5bGVba2V5XSkgIT0gbnVsbCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBgQW5pbWF0ZWRTdHlsZTogJHtrZXl9IGlzIG5vdCBhbGxvd2xpc3RlZCBmb3IgYW5pbWF0aW9uLCBidXQgaXQgYCArXG4gICAgICAgICAgICAgICdjb250YWlucyBBbmltYXRlZE5vZGUgdmFsdWVzOyBzdHlsZXMgYWxsb3dpbmcgYW5pbWF0aW9uOiAnLFxuICAgICAgICAgICAgYWxsb3dsaXN0LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChrZWVwVW5hbmltYXRlZFZhbHVlcykge1xuICAgICAgICBzdHlsZVtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtub2RlS2V5cywgbm9kZXMsIHN0eWxlXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0ZWRTdHlsZSBleHRlbmRzIEFuaW1hdGVkV2l0aENoaWxkcmVuIHtcbiAgI2lucHV0U3R5bGU6IGFueTtcbiAgI25vZGVLZXlzOiAkUmVhZE9ubHlBcnJheTxzdHJpbmc+O1xuICAjbm9kZXM6ICRSZWFkT25seUFycmF5PEFuaW1hdGVkTm9kZT47XG4gICNzdHlsZToge1tzdHJpbmddOiBtaXhlZH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gYEFuaW1hdGVkU3R5bGVgIGlmIGB2YWx1ZWAgY29udGFpbnMgYEFuaW1hdGVkTm9kZWAgaW5zdGFuY2VzLlxuICAgKiBPdGhlcndpc2UsIHJldHVybnMgYG51bGxgLlxuICAgKi9cbiAgc3RhdGljIGZyb20oXG4gICAgaW5wdXRTdHlsZTogYW55LFxuICAgIGFsbG93bGlzdDogP0FuaW1hdGVkU3R5bGVBbGxvd2xpc3QsXG4gICk6ID9BbmltYXRlZFN0eWxlIHtcbiAgICBjb25zdCBmbGF0U3R5bGUgPSBmbGF0dGVuU3R5bGUoaW5wdXRTdHlsZSk7XG4gICAgaWYgKGZsYXRTdHlsZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgW25vZGVLZXlzLCBub2Rlcywgc3R5bGVdID0gY3JlYXRlQW5pbWF0ZWRTdHlsZShcbiAgICAgIGZsYXRTdHlsZSxcbiAgICAgIGFsbG93bGlzdCxcbiAgICAgIFBsYXRmb3JtLk9TICE9PSAnd2ViJyxcbiAgICApO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFuaW1hdGVkU3R5bGUobm9kZUtleXMsIG5vZGVzLCBzdHlsZSwgaW5wdXRTdHlsZSk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBub2RlS2V5czogJFJlYWRPbmx5QXJyYXk8c3RyaW5nPixcbiAgICBub2RlczogJFJlYWRPbmx5QXJyYXk8QW5pbWF0ZWROb2RlPixcbiAgICBzdHlsZToge1tzdHJpbmddOiBtaXhlZH0sXG4gICAgaW5wdXRTdHlsZTogYW55LFxuICAgIGNvbmZpZz86ID9BbmltYXRlZE5vZGVDb25maWcsXG4gICkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgdGhpcy4jbm9kZUtleXMgPSBub2RlS2V5cztcbiAgICB0aGlzLiNub2RlcyA9IG5vZGVzO1xuICAgIHRoaXMuI3N0eWxlID0gc3R5bGU7XG4gICAgdGhpcy4jaW5wdXRTdHlsZSA9IGlucHV0U3R5bGU7XG4gIH1cblxuICBfX2dldFZhbHVlKCk6IE9iamVjdCB8IEFycmF5PE9iamVjdD4ge1xuICAgIGNvbnN0IHN0eWxlOiB7W3N0cmluZ106IG1peGVkfSA9IHt9O1xuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuI3N0eWxlKTtcbiAgICBmb3IgKGxldCBpaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpaV07XG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuI3N0eWxlW2tleV07XG5cbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgICBzdHlsZVtrZXldID0gdmFsdWUuX19nZXRWYWx1ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGVba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIEVycm9yIGZvdW5kIGR1ZSB0byBpbmNvbXBsZXRlIHR5cGluZyBvZlxuICAgICAqIFBsYXRmb3JtLmZsb3cuanMgKi9cbiAgICByZXR1cm4gUGxhdGZvcm0uT1MgPT09ICd3ZWInID8gW3RoaXMuI2lucHV0U3R5bGUsIHN0eWxlXSA6IHN0eWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYHN0eWxlYCBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgc2FtZSBzdHlsZSBwcm9wZXJ0aWVzIGFzXG4gICAqIHRoZSBzdXBwbGllZCBgc3RhdGljU3R5bGVgIG9iamVjdCwgZXhjZXB0IHdpdGggYW5pbWF0ZWQgbm9kZXMgZm9yIGFueVxuICAgKiBzdHlsZSBwcm9wZXJ0aWVzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IHRoaXMgYEFuaW1hdGVkU3R5bGVgIGluc3RhbmNlLlxuICAgKi9cbiAgX19nZXRWYWx1ZVdpdGhTdGF0aWNTdHlsZShzdGF0aWNTdHlsZTogT2JqZWN0KTogT2JqZWN0IHwgQXJyYXk8T2JqZWN0PiB7XG4gICAgY29uc3QgZmxhdFN0YXRpY1N0eWxlID0gZmxhdHRlblN0eWxlKHN0YXRpY1N0eWxlKTtcbiAgICBjb25zdCBzdHlsZToge1tzdHJpbmddOiBtaXhlZH0gPVxuICAgICAgZmxhdFN0YXRpY1N0eWxlID09IG51bGxcbiAgICAgICAgPyB7fVxuICAgICAgICA6IGZsYXRTdGF0aWNTdHlsZSA9PT0gc3RhdGljU3R5bGVcbiAgICAgICAgICA/IC8vIENvcHkgdGhlIGlucHV0IHN0eWxlLCBzaW5jZSB3ZSdsbCBtdXRhdGUgaXQgYmVsb3cuXG4gICAgICAgICAgICB7Li4uZmxhdFN0YXRpY1N0eWxlfVxuICAgICAgICAgIDogLy8gUmV1c2UgYGZsYXRTdGF0aWNTdHlsZWAgaWYgaXQgaXMgYSBuZXdseSBjcmVhdGVkIG9iamVjdC5cbiAgICAgICAgICAgIGZsYXRTdGF0aWNTdHlsZTtcblxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzdHlsZSk7XG4gICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaWldO1xuICAgICAgY29uc3QgbWF5YmVOb2RlID0gdGhpcy4jc3R5bGVba2V5XTtcblxuICAgICAgaWYgKGtleSA9PT0gJ3RyYW5zZm9ybScgJiYgbWF5YmVOb2RlIGluc3RhbmNlb2YgQW5pbWF0ZWRUcmFuc2Zvcm0pIHtcbiAgICAgICAgc3R5bGVba2V5XSA9IG1heWJlTm9kZS5fX2dldFZhbHVlV2l0aFN0YXRpY1RyYW5zZm9ybXMoXG4gICAgICAgICAgLy8gTk9URTogVGhpcyBjaGVjayBzaG91bGQgbm90IGJlIG5lY2Vzc2FyeSwgYnV0IHRoZSB0eXBlcyBhcmUgbm90XG4gICAgICAgICAgLy8gZW5mb3JjZWQgYXMgb2YgdGhpcyB3cml0aW5nLlxuICAgICAgICAgIEFycmF5LmlzQXJyYXkoc3R5bGVba2V5XSkgPyBzdHlsZVtrZXldIDogW10sXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG1heWJlTm9kZSBpbnN0YW5jZW9mIEFuaW1hdGVkT2JqZWN0KSB7XG4gICAgICAgIHN0eWxlW2tleV0gPSBtYXliZU5vZGUuX19nZXRWYWx1ZVdpdGhTdGF0aWNPYmplY3Qoc3R5bGVba2V5XSk7XG4gICAgICB9IGVsc2UgaWYgKG1heWJlTm9kZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgICBzdHlsZVtrZXldID0gbWF5YmVOb2RlLl9fZ2V0VmFsdWUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXSBFcnJvciBmb3VuZCBkdWUgdG8gaW5jb21wbGV0ZSB0eXBpbmcgb2ZcbiAgICAgKiBQbGF0Zm9ybS5mbG93LmpzICovXG4gICAgcmV0dXJuIFBsYXRmb3JtLk9TID09PSAnd2ViJyA/IFt0aGlzLiNpbnB1dFN0eWxlLCBzdHlsZV0gOiBzdHlsZTtcbiAgfVxuXG4gIF9fZ2V0QW5pbWF0ZWRWYWx1ZSgpOiBPYmplY3Qge1xuICAgIGNvbnN0IHN0eWxlOiB7W3N0cmluZ106IG1peGVkfSA9IHt9O1xuXG4gICAgY29uc3Qgbm9kZUtleXMgPSB0aGlzLiNub2RlS2V5cztcbiAgICBjb25zdCBub2RlcyA9IHRoaXMuI25vZGVzO1xuICAgIGZvciAobGV0IGlpID0gMCwgbGVuZ3RoID0gbm9kZXMubGVuZ3RoOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgICAgY29uc3Qga2V5ID0gbm9kZUtleXNbaWldO1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2lpXTtcbiAgICAgIHN0eWxlW2tleV0gPSBub2RlLl9fZ2V0QW5pbWF0ZWRWYWx1ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHlsZTtcbiAgfVxuXG4gIF9fYXR0YWNoKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vZGVzID0gdGhpcy4jbm9kZXM7XG4gICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBub2Rlcy5sZW5ndGg7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG4gICAgICBjb25zdCBub2RlID0gbm9kZXNbaWldO1xuICAgICAgbm9kZS5fX2FkZENoaWxkKHRoaXMpO1xuICAgIH1cbiAgICBzdXBlci5fX2F0dGFjaCgpO1xuICB9XG5cbiAgX19kZXRhY2goKTogdm9pZCB7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLiNub2RlcztcbiAgICBmb3IgKGxldCBpaSA9IDAsIGxlbmd0aCA9IG5vZGVzLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpaV07XG4gICAgICBub2RlLl9fcmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgfVxuICAgIHN1cGVyLl9fZGV0YWNoKCk7XG4gIH1cblxuICBfX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWc6ID9QbGF0Zm9ybUNvbmZpZykge1xuICAgIGNvbnN0IG5vZGVzID0gdGhpcy4jbm9kZXM7XG4gICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBub2Rlcy5sZW5ndGg7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG4gICAgICBjb25zdCBub2RlID0gbm9kZXNbaWldO1xuICAgICAgbm9kZS5fX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWcpO1xuICAgIH1cbiAgICBzdXBlci5fX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWcpO1xuICB9XG5cbiAgX19nZXROYXRpdmVDb25maWcoKTogT2JqZWN0IHtcbiAgICBjb25zdCBwbGF0Zm9ybUNvbmZpZyA9IHRoaXMuX19nZXRQbGF0Zm9ybUNvbmZpZygpO1xuICAgIGNvbnN0IHN0eWxlQ29uZmlnOiB7W3N0cmluZ106ID9udW1iZXJ9ID0ge307XG5cbiAgICBjb25zdCBub2RlS2V5cyA9IHRoaXMuI25vZGVLZXlzO1xuICAgIGNvbnN0IG5vZGVzID0gdGhpcy4jbm9kZXM7XG4gICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBub2Rlcy5sZW5ndGg7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBub2RlS2V5c1tpaV07XG4gICAgICBjb25zdCBub2RlID0gbm9kZXNbaWldO1xuICAgICAgbm9kZS5fX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWcpO1xuICAgICAgc3R5bGVDb25maWdba2V5XSA9IG5vZGUuX19nZXROYXRpdmVUYWcoKTtcbiAgICB9XG5cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgdmFsaWRhdGVTdHlsZXMoc3R5bGVDb25maWcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3N0eWxlJyxcbiAgICAgIHN0eWxlOiBzdHlsZUNvbmZpZyxcbiAgICAgIGRlYnVnSUQ6IHRoaXMuX19nZXREZWJ1Z0lEKCksXG4gICAgfTtcbiAgfVxufVxuXG4vLyBTdXBwb3J0ZWQgdmVyc2lvbnMgb2YgSlNDIGRvIG5vdCBpbXBsZW1lbnQgdGhlIG5ld2VyIE9iamVjdC5oYXNPd24uIFJlbW92ZVxuLy8gdGhpcyBzaGltIHdoZW4gdGhleSBkby5cbi8vICRGbG93SWdub3JlW21ldGhvZC11bmJpbmRpbmddXG5jb25zdCBfaGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5jb25zdCBoYXNPd246IChvYmo6ICRSZWFkT25seTx7Li4ufT4sIHByb3A6IHN0cmluZykgPT4gYm9vbGVhbiA9XG4gIC8vICRGbG93SWdub3JlW21ldGhvZC11bmJpbmRpbmddXG4gIE9iamVjdC5oYXNPd24gPz8gKChvYmosIHByb3ApID0+IF9oYXNPd25Qcm9wLmNhbGwob2JqLCBwcm9wKSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBYUEsSUFBQUEseUJBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLHVCQUFBLEdBQUFDLHVCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxhQUFBLEdBQUFDLHNCQUFBLENBQUFKLE9BQUE7QUFDQSxJQUFBSyxTQUFBLEdBQUFELHNCQUFBLENBQUFKLE9BQUE7QUFDQSxJQUFBTSxhQUFBLEdBQUFGLHNCQUFBLENBQUFKLE9BQUE7QUFDQSxJQUFBTyxlQUFBLEdBQUFILHNCQUFBLENBQUFKLE9BQUE7QUFDQSxJQUFBUSxrQkFBQSxHQUFBSixzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQVMsc0JBQUEsR0FBQUwsc0JBQUEsQ0FBQUosT0FBQTtBQUEwRCxJQUFBVSxjQUFBO0FBQUEsU0FBQUMseUJBQUFDLENBQUEsNkJBQUFDLE9BQUEsbUJBQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUYsd0JBQUEsWUFBQUEseUJBQUFDLENBQUEsV0FBQUEsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsS0FBQUYsQ0FBQTtBQUFBLFNBQUFWLHdCQUFBVSxDQUFBLEVBQUFFLENBQUEsU0FBQUEsQ0FBQSxJQUFBRixDQUFBLElBQUFBLENBQUEsQ0FBQUksVUFBQSxTQUFBSixDQUFBLGVBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsV0FBQUssT0FBQSxFQUFBTCxDQUFBLFFBQUFHLENBQUEsR0FBQUosd0JBQUEsQ0FBQUcsQ0FBQSxPQUFBQyxDQUFBLElBQUFBLENBQUEsQ0FBQUcsR0FBQSxDQUFBTixDQUFBLFVBQUFHLENBQUEsQ0FBQUks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