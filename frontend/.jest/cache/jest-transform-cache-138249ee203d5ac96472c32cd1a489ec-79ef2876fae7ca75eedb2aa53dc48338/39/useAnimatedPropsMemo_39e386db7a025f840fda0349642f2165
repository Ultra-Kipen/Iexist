840919edfaaa5caaf208db5ea8a6f425
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.areCompositeKeysEqual = areCompositeKeysEqual;
exports.createCompositeKeyForProps = createCompositeKeyForProps;
exports.useAnimatedPropsMemo = useAnimatedPropsMemo;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _AnimatedEvent = require("../../../Libraries/Animated/AnimatedEvent");
var _AnimatedNode = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedNode"));
var _AnimatedObject = require("../../../Libraries/Animated/nodes/AnimatedObject");
var _flattenStyle = _interopRequireDefault(require("../../../Libraries/StyleSheet/flattenStyle"));
var _nullthrows = _interopRequireDefault(require("nullthrows"));
var _react = require("react");
var _Object$hasOwn;
function useAnimatedPropsMemo(create, _ref) {
  var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
    allowlist = _ref2[0],
    props = _ref2[1];
  var compositeKey = (0, _react.useMemo)(function () {
    return createCompositeKeyForProps(props, allowlist);
  }, [allowlist, props]);
  var _useState = (0, _react.useState)(function () {
      return {
        allowlist: allowlist,
        compositeKey: compositeKey,
        value: create()
      };
    }),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    state = _useState2[0],
    setState = _useState2[1];
  if (state.allowlist !== allowlist || !areCompositeKeysEqual(state.compositeKey, compositeKey)) {
    setState({
      allowlist: allowlist,
      compositeKey: compositeKey,
      value: create()
    });
  }
  return state.value;
}
function createCompositeKeyForProps(props, allowlist) {
  var compositeKey = null;
  var keys = Object.keys(props);
  for (var ii = 0, length = keys.length; ii < length; ii++) {
    var key = keys[ii];
    var value = props[key];
    if (allowlist == null || hasOwn(allowlist, key)) {
      var compositeKeyComponent = void 0;
      if (key === 'style') {
        var flatStyle = (0, _flattenStyle.default)(value);
        if (flatStyle != null) {
          compositeKeyComponent = createCompositeKeyForObject(flatStyle, allowlist == null ? void 0 : allowlist.style);
        }
      } else if (value instanceof _AnimatedNode.default || value instanceof _AnimatedEvent.AnimatedEvent) {
        compositeKeyComponent = value;
      } else if (Array.isArray(value)) {
        compositeKeyComponent = allowlist == null ? value : createCompositeKeyForArray(value);
      } else if ((0, _AnimatedObject.isPlainObject)(value)) {
        compositeKeyComponent = allowlist == null ? value : createCompositeKeyForObject(value);
      }
      if (compositeKeyComponent != null) {
        if (compositeKey == null) {
          compositeKey = {};
        }
        compositeKey[key] = compositeKeyComponent;
      }
    }
  }
  return compositeKey;
}
function createCompositeKeyForArray(array) {
  var compositeKey = null;
  for (var ii = 0, length = array.length; ii < length; ii++) {
    var value = array[ii];
    var compositeKeyComponent = void 0;
    if (value instanceof _AnimatedNode.default) {
      compositeKeyComponent = value;
    } else if (Array.isArray(value)) {
      compositeKeyComponent = createCompositeKeyForArray(value);
    } else if ((0, _AnimatedObject.isPlainObject)(value)) {
      compositeKeyComponent = createCompositeKeyForObject(value);
    }
    if (compositeKeyComponent != null) {
      if (compositeKey == null) {
        compositeKey = new Array(array.length).fill(null);
      }
      compositeKey[ii] = compositeKeyComponent;
    }
  }
  return compositeKey;
}
function createCompositeKeyForObject(object, allowlist) {
  var compositeKey = null;
  var keys = Object.keys(object);
  for (var ii = 0, length = keys.length; ii < length; ii++) {
    var key = keys[ii];
    if (allowlist == null || hasOwn(allowlist, key)) {
      var value = object[key];
      var compositeKeyComponent = void 0;
      if (value instanceof _AnimatedNode.default) {
        compositeKeyComponent = value;
      } else if (Array.isArray(value)) {
        compositeKeyComponent = createCompositeKeyForArray(value);
      } else if ((0, _AnimatedObject.isPlainObject)(value)) {
        compositeKeyComponent = createCompositeKeyForObject(value);
      }
      if (compositeKeyComponent != null) {
        if (compositeKey == null) {
          compositeKey = {};
        }
        compositeKey[key] = compositeKeyComponent;
      }
    }
  }
  return compositeKey;
}
function areCompositeKeysEqual(maybePrev, maybeNext, allowlist) {
  if (maybePrev === maybeNext) {
    return true;
  }
  if (maybePrev === null || maybeNext === null) {
    return false;
  }
  var prev = maybePrev;
  var next = maybeNext;
  var keys = Object.keys(prev);
  var length = keys.length;
  if (length !== Object.keys(next).length) {
    return false;
  }
  for (var ii = 0; ii < length; ii++) {
    var key = keys[ii];
    if (!hasOwn(next, key)) {
      return false;
    }
    var prevComponent = prev[key];
    var nextComponent = next[key];
    if (key === 'style') {
      if (!areCompositeKeyComponentsEqual(prevComponent, nextComponent)) {
        return false;
      }
    } else if (prevComponent instanceof _AnimatedNode.default || prevComponent instanceof _AnimatedEvent.AnimatedEvent) {
      if (prevComponent !== nextComponent) {
        return false;
      }
    } else {
      if (allowlist == null) {
        if (prevComponent !== nextComponent) {
          return false;
        }
      } else {
        if (!areCompositeKeyComponentsEqual(prevComponent, nextComponent)) {
          return false;
        }
      }
    }
  }
  return true;
}
function areCompositeKeyComponentsEqual(prev, next) {
  if (prev === next) {
    return true;
  }
  if (prev instanceof _AnimatedNode.default) {
    return prev === next;
  }
  if (Array.isArray(prev)) {
    if (!Array.isArray(next)) {
      return false;
    }
    var length = prev.length;
    if (length !== next.length) {
      return false;
    }
    for (var ii = 0; ii < length; ii++) {
      if (!areCompositeKeyComponentsEqual(prev[ii], next[ii])) {
        return false;
      }
    }
    return true;
  }
  if ((0, _AnimatedObject.isPlainObject)(prev)) {
    if (!(0, _AnimatedObject.isPlainObject)(next)) {
      return false;
    }
    var keys = Object.keys(prev);
    var _length = keys.length;
    if (_length !== Object.keys(next).length) {
      return false;
    }
    for (var _ii = 0; _ii < _length; _ii++) {
      var key = keys[_ii];
      if (!hasOwn((0, _nullthrows.default)(next), key) || !areCompositeKeyComponentsEqual(prev[key], next[key])) {
        return false;
      }
    }
    return true;
  }
  return false;
}
var _hasOwnProp = Object.prototype.hasOwnProperty;
var hasOwn = (_Object$hasOwn = Object.hasOwn) != null ? _Object$hasOwn : function (obj, prop) {
  return _hasOwnProp.call(obj, prop);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQW5pbWF0ZWRFdmVudCIsInJlcXVpcmUiLCJfQW5pbWF0ZWROb2RlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9BbmltYXRlZE9iamVjdCIsIl9mbGF0dGVuU3R5bGUiLCJfbnVsbHRocm93cyIsIl9yZWFjdCIsIl9PYmplY3QkaGFzT3duIiwidXNlQW5pbWF0ZWRQcm9wc01lbW8iLCJjcmVhdGUiLCJfcmVmIiwiX3JlZjIiLCJfc2xpY2VkVG9BcnJheTIiLCJkZWZhdWx0IiwiYWxsb3dsaXN0IiwicHJvcHMiLCJjb21wb3NpdGVLZXkiLCJ1c2VNZW1vIiwiY3JlYXRlQ29tcG9zaXRlS2V5Rm9yUHJvcHMiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsInZhbHVlIiwiX3VzZVN0YXRlMiIsInN0YXRlIiwic2V0U3RhdGUiLCJhcmVDb21wb3NpdGVLZXlzRXF1YWwiLCJrZXlzIiwiT2JqZWN0IiwiaWkiLCJsZW5ndGgiLCJrZXkiLCJoYXNPd24iLCJjb21wb3NpdGVLZXlDb21wb25lbnQiLCJmbGF0U3R5bGUiLCJmbGF0dGVuU3R5bGUiLCJjcmVhdGVDb21wb3NpdGVLZXlGb3JPYmplY3QiLCJzdHlsZSIsIkFuaW1hdGVkTm9kZSIsIkFuaW1hdGVkRXZlbnQiLCJBcnJheSIsImlzQXJyYXkiLCJjcmVhdGVDb21wb3NpdGVLZXlGb3JBcnJheSIsImlzUGxhaW5PYmplY3QiLCJhcnJheSIsImZpbGwiLCJvYmplY3QiLCJtYXliZVByZXYiLCJtYXliZU5leHQiLCJwcmV2IiwibmV4dCIsInByZXZDb21wb25lbnQiLCJuZXh0Q29tcG9uZW50IiwiYXJlQ29tcG9zaXRlS2V5Q29tcG9uZW50c0VxdWFsIiwibnVsbHRocm93cyIsIl9oYXNPd25Qcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJvYmoiLCJwcm9wIiwiY2FsbCJdLCJzb3VyY2VzIjpbInVzZUFuaW1hdGVkUHJvcHNNZW1vLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqIEBvbmNhbGwgcmVhY3RfbmF0aXZlXG4gKi9cblxuaW1wb3J0IHR5cGUgQW5pbWF0ZWRQcm9wcyBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvQW5pbWF0ZWQvbm9kZXMvQW5pbWF0ZWRQcm9wcyc7XG5pbXBvcnQgdHlwZSB7QW5pbWF0ZWRQcm9wc0FsbG93bGlzdH0gZnJvbSAnLi4vLi4vLi4vTGlicmFyaWVzL0FuaW1hdGVkL25vZGVzL0FuaW1hdGVkUHJvcHMnO1xuaW1wb3J0IHR5cGUge0FuaW1hdGVkU3R5bGVBbGxvd2xpc3R9IGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9BbmltYXRlZC9ub2Rlcy9BbmltYXRlZFN0eWxlJztcblxuaW1wb3J0IHtBbmltYXRlZEV2ZW50fSBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvQW5pbWF0ZWQvQW5pbWF0ZWRFdmVudCc7XG5pbXBvcnQgQW5pbWF0ZWROb2RlIGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9BbmltYXRlZC9ub2Rlcy9BbmltYXRlZE5vZGUnO1xuaW1wb3J0IHtpc1BsYWluT2JqZWN0fSBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvQW5pbWF0ZWQvbm9kZXMvQW5pbWF0ZWRPYmplY3QnO1xuaW1wb3J0IGZsYXR0ZW5TdHlsZSBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvU3R5bGVTaGVldC9mbGF0dGVuU3R5bGUnO1xuaW1wb3J0IG51bGx0aHJvd3MgZnJvbSAnbnVsbHRocm93cyc7XG5pbXBvcnQge3VzZU1lbW8sIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5cbnR5cGUgQ29tcG9zaXRlS2V5ID0ge1xuICBzdHlsZT86IHtbc3RyaW5nXTogQ29tcG9zaXRlS2V5Q29tcG9uZW50fSxcbiAgW3N0cmluZ106XG4gICAgfCBDb21wb3NpdGVLZXlDb21wb25lbnRcbiAgICB8IEFuaW1hdGVkRXZlbnRcbiAgICB8ICRSZWFkT25seUFycmF5PG1peGVkPlxuICAgIHwgJFJlYWRPbmx5PHtbc3RyaW5nXTogbWl4ZWR9Pixcbn07XG5cbnR5cGUgQ29tcG9zaXRlS2V5Q29tcG9uZW50ID1cbiAgfCBBbmltYXRlZE5vZGVcbiAgfCBBcnJheTxDb21wb3NpdGVLZXlDb21wb25lbnQgfCBudWxsPlxuICB8IHtbc3RyaW5nXTogQ29tcG9zaXRlS2V5Q29tcG9uZW50fTtcblxudHlwZSAkUmVhZE9ubHlDb21wb3NpdGVLZXkgPSAkUmVhZE9ubHk8e1xuICBzdHlsZT86ICRSZWFkT25seTx7W3N0cmluZ106IENvbXBvc2l0ZUtleUNvbXBvbmVudH0+LFxuICBbc3RyaW5nXTpcbiAgICB8ICRSZWFkT25seUNvbXBvc2l0ZUtleUNvbXBvbmVudFxuICAgIHwgQW5pbWF0ZWRFdmVudFxuICAgIHwgJFJlYWRPbmx5QXJyYXk8bWl4ZWQ+XG4gICAgfCAkUmVhZE9ubHk8e1tzdHJpbmddOiBtaXhlZH0+LFxufT47XG5cbnR5cGUgJFJlYWRPbmx5Q29tcG9zaXRlS2V5Q29tcG9uZW50ID1cbiAgfCBBbmltYXRlZE5vZGVcbiAgfCAkUmVhZE9ubHlBcnJheTwkUmVhZE9ubHlDb21wb3NpdGVLZXlDb21wb25lbnQgfCBudWxsPlxuICB8ICRSZWFkT25seTx7W3N0cmluZ106ICRSZWFkT25seUNvbXBvc2l0ZUtleUNvbXBvbmVudH0+O1xuXG4vKipcbiAqIEEgaG9vayB0aGF0IHJldHVybnMgYW4gYEFuaW1hdGVkUHJvcHNgIG9iamVjdCB0aGF0IGlzIG1lbW9pemVkIGJhc2VkIG9uIHRoZVxuICogc3Vic2V0IG9mIGBwcm9wc2AgdGhhdCBhcmUgaW5zdGFuY2VzIG9mIGBBbmltYXRlZE5vZGVgIG9yIGBBbmltYXRlZEV2ZW50YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUFuaW1hdGVkUHJvcHNNZW1vKFxuICBjcmVhdGU6ICgpID0+IEFuaW1hdGVkUHJvcHMsXG4gIC8vIFRPRE86IE1ha2UgdGhpcyB0d28gc2VwYXJhdGUgYXJndW1lbnRzIGFmdGVyIHRoZSBleHBlcmltZW50IGlzIG92ZXIuIFRoaXNcbiAgLy8gaXMgb25seSBhbiBhcnJheS1saWtlIHN0cnVjdHVyZSB0byBtYWtlIGl0IGVhc2llciB0byBleHBlcmltZW50IHdpdGggdGhpc1xuICAvLyBhbmQgYHVzZU1lbW9gLlxuICBbYWxsb3dsaXN0LCBwcm9wc106IFs/QW5pbWF0ZWRQcm9wc0FsbG93bGlzdCwge1tzdHJpbmddOiBtaXhlZH1dLFxuKTogQW5pbWF0ZWRQcm9wcyB7XG4gIGNvbnN0IGNvbXBvc2l0ZUtleSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gY3JlYXRlQ29tcG9zaXRlS2V5Rm9yUHJvcHMocHJvcHMsIGFsbG93bGlzdCksXG4gICAgW2FsbG93bGlzdCwgcHJvcHNdLFxuICApO1xuXG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8e1xuICAgIGFsbG93bGlzdDogP0FuaW1hdGVkUHJvcHNBbGxvd2xpc3QsXG4gICAgY29tcG9zaXRlS2V5OiAkUmVhZE9ubHlDb21wb3NpdGVLZXkgfCBudWxsLFxuICAgIHZhbHVlOiBBbmltYXRlZFByb3BzLFxuICB9PigoKSA9PiAoe1xuICAgIGFsbG93bGlzdCxcbiAgICBjb21wb3NpdGVLZXksXG4gICAgdmFsdWU6IGNyZWF0ZSgpLFxuICB9KSk7XG5cbiAgaWYgKFxuICAgIHN0YXRlLmFsbG93bGlzdCAhPT0gYWxsb3dsaXN0IHx8XG4gICAgIWFyZUNvbXBvc2l0ZUtleXNFcXVhbChzdGF0ZS5jb21wb3NpdGVLZXksIGNvbXBvc2l0ZUtleSlcbiAgKSB7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgYWxsb3dsaXN0LFxuICAgICAgY29tcG9zaXRlS2V5LFxuICAgICAgdmFsdWU6IGNyZWF0ZSgpLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBzdGF0ZS52YWx1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGNvbXBvc2l0ZSBrZXkgZm9yIGEgYHByb3BzYCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXRlY3RcbiAqIHdoZXRoZXIgYSBuZXcgYEFuaW1hdGVkUHJvcHNgIGluc3RhbmNlIG11c3QgYmUgY3JlYXRlZC5cbiAqXG4gKiAtIFdpdGggYW4gYWxsb3dsaXN0LCB0aG9zZSBwcm9wcyBhcmUgc2VhcmNoZWQgZm9yIGBBbmltYXRlZE5vZGVgIGluc3RhbmNlcy5cbiAqIC0gV2l0aG91dCBhbiBhbGxvd2xpc3QsIGBzdHlsZWAgaXMgc2VhcmNoZWQgZm9yIGBBbmltYXRlZE5vZGVgIGluc3RhbmNlcyxcbiAqICAgYnV0IGFsbCBvdGhlciBvYmplY3RzIGFuZCBhcnJheXMgYXJlIGluY2x1ZGVkIChub3Qgc2VhcmNoZWQpLiBXZSBkbyBub3RcbiAqICAgc2VhcmNoIG9iamVjdHMgYW5kIGFycmF5cyB3aXRob3V0IGFuIGFsbG93bGlzdCBpbiBjYXNlIHRoZXkgYXJlIHZlcnkgbGFyZ2VcbiAqICAgZGF0YSBzdHJ1Y3R1cmVzLiBXZSBzYWZlbHkgdHJhdmVyc2UgYHN0eWxlYCBiZWN1YXNlIGl0IGlzIGJvdW5kZWQuXG4gKlxuICogQW55IGBBbmltYXRlZEV2ZW50YCBpbnN0YW5jZXMgYXQgdGhlIGZpcnN0IGRlcHRoIGFyZSBhbHdheXMgaW5jbHVkZWQuXG4gKlxuICogSWYgYHByb3BzYCBjb250YWlucyBubyBgQW5pbWF0ZWROb2RlYCBvciBgQW5pbWF0ZWRFdmVudGAgaW5zdGFuY2VzLCB0aGlzXG4gKiByZXR1cm5zIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb21wb3NpdGVLZXlGb3JQcm9wcyhcbiAgcHJvcHM6ICRSZWFkT25seTx7W3N0cmluZ106IG1peGVkfT4sXG4gIGFsbG93bGlzdDogP0FuaW1hdGVkUHJvcHNBbGxvd2xpc3QsXG4pOiAkUmVhZE9ubHlDb21wb3NpdGVLZXkgfCBudWxsIHtcbiAgbGV0IGNvbXBvc2l0ZUtleTogQ29tcG9zaXRlS2V5IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlzW2lpXTtcbiAgICBjb25zdCB2YWx1ZSA9IHByb3BzW2tleV07XG5cbiAgICBpZiAoYWxsb3dsaXN0ID09IG51bGwgfHwgaGFzT3duKGFsbG93bGlzdCwga2V5KSkge1xuICAgICAgbGV0IGNvbXBvc2l0ZUtleUNvbXBvbmVudDtcbiAgICAgIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF0gLSBgc3R5bGVgIGlzIGEgdmFsaWQgYXJndW1lbnQuXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIC0gYGZsYXR0ZW5TdHlsZWAgcmV0dXJucyBhbiBvYmplY3QuXG4gICAgICAgIGNvbnN0IGZsYXRTdHlsZTogP3tbc3RyaW5nXTogbWl4ZWR9ID0gZmxhdHRlblN0eWxlKHZhbHVlKTtcbiAgICAgICAgaWYgKGZsYXRTdHlsZSAhPSBudWxsKSB7XG4gICAgICAgICAgY29tcG9zaXRlS2V5Q29tcG9uZW50ID0gY3JlYXRlQ29tcG9zaXRlS2V5Rm9yT2JqZWN0KFxuICAgICAgICAgICAgZmxhdFN0eWxlLFxuICAgICAgICAgICAgYWxsb3dsaXN0Py5zdHlsZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSB8fFxuICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkRXZlbnRcbiAgICAgICkge1xuICAgICAgICBjb21wb3NpdGVLZXlDb21wb25lbnQgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgY29tcG9zaXRlS2V5Q29tcG9uZW50ID1cbiAgICAgICAgICBhbGxvd2xpc3QgPT0gbnVsbCA/IHZhbHVlIDogY3JlYXRlQ29tcG9zaXRlS2V5Rm9yQXJyYXkodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBjb21wb3NpdGVLZXlDb21wb25lbnQgPVxuICAgICAgICAgIGFsbG93bGlzdCA9PSBudWxsID8gdmFsdWUgOiBjcmVhdGVDb21wb3NpdGVLZXlGb3JPYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXBvc2l0ZUtleUNvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChjb21wb3NpdGVLZXkgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbXBvc2l0ZUtleSA9IHt9IGFzIENvbXBvc2l0ZUtleTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb3NpdGVLZXlba2V5XSA9IGNvbXBvc2l0ZUtleUNvbXBvbmVudDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29tcG9zaXRlS2V5O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgY29tcG9zaXRlIGtleSBmb3IgYW4gYXJyYXkgdGhhdCByZXRhaW5zIGFsbCB2YWx1ZXMgdGhhdCBhcmUgb3JcbiAqIGNvbnRhaW4gYEFuaW1hdGVkTm9kZWAgaW5zdGFuY2VzLCBhbmQgYG51bGxgIGZvciB0aGUgcmVzdC5cbiAqXG4gKiBJZiBgYXJyYXlgIGNvbnRhaW5zIG5vIGBBbmltYXRlZE5vZGVgIGluc3RhbmNlcywgdGhpcyByZXR1cm5zIG51bGwuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvc2l0ZUtleUZvckFycmF5KFxuICBhcnJheTogJFJlYWRPbmx5QXJyYXk8bWl4ZWQ+LFxuKTogJFJlYWRPbmx5QXJyYXk8JFJlYWRPbmx5Q29tcG9zaXRlS2V5Q29tcG9uZW50IHwgbnVsbD4gfCBudWxsIHtcbiAgbGV0IGNvbXBvc2l0ZUtleTogQXJyYXk8JFJlYWRPbmx5Q29tcG9zaXRlS2V5Q29tcG9uZW50IHwgbnVsbD4gfCBudWxsID0gbnVsbDtcblxuICBmb3IgKGxldCBpaSA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICBjb25zdCB2YWx1ZSA9IGFycmF5W2lpXTtcblxuICAgIGxldCBjb21wb3NpdGVLZXlDb21wb25lbnQ7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWROb2RlKSB7XG4gICAgICBjb21wb3NpdGVLZXlDb21wb25lbnQgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBjb21wb3NpdGVLZXlDb21wb25lbnQgPSBjcmVhdGVDb21wb3NpdGVLZXlGb3JBcnJheSh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgY29tcG9zaXRlS2V5Q29tcG9uZW50ID0gY3JlYXRlQ29tcG9zaXRlS2V5Rm9yT2JqZWN0KHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGNvbXBvc2l0ZUtleUNvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICBpZiAoY29tcG9zaXRlS2V5ID09IG51bGwpIHtcbiAgICAgICAgY29tcG9zaXRlS2V5ID0gbmV3IEFycmF5PCRSZWFkT25seUNvbXBvc2l0ZUtleUNvbXBvbmVudCB8IG51bGw+KFxuICAgICAgICAgIGFycmF5Lmxlbmd0aCxcbiAgICAgICAgKS5maWxsKG51bGwpO1xuICAgICAgfVxuICAgICAgY29tcG9zaXRlS2V5W2lpXSA9IGNvbXBvc2l0ZUtleUNvbXBvbmVudDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29tcG9zaXRlS2V5O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgY29tcG9zaXRlIGtleSBmb3IgYW4gb2JqZWN0IHRoYXQgcmV0YWlucyBvbmx5IHByb3BlcnRpZXMgdGhhdFxuICogYXJlIG9yIGNvbnRhaW4gYEFuaW1hdGVkTm9kZWAgaW5zdGFuY2VzLlxuICpcbiAqIFdoZW4gdXNlZCB0byBjcmVhdGUgY29tcG9zaXRlIGtleXMgZm9yIGBzdHlsZWAgcHJvcHM6XG4gKlxuICogLSBXaXRoIGFuIGFsbG93bGlzdCwgdGhvc2UgcHJvcGVydGllcyBhcmUgc2VhcmNoZWQuXG4gKiAtIFdpdGhvdXQgYW4gYWxsb3dsaXN0LCBldmVyeSBwcm9wZXJ0eSBpcyBzZWFyY2hlZC5cbiAqXG4gKiBJZiBgb2JqZWN0YCBjb250YWlucyBubyBgQW5pbWF0ZWROb2RlYCBpbnN0YW5jZXMsIHRoaXMgcmV0dXJucyBudWxsLlxuICovXG5mdW5jdGlvbiBjcmVhdGVDb21wb3NpdGVLZXlGb3JPYmplY3QoXG4gIG9iamVjdDogJFJlYWRPbmx5PHtbc3RyaW5nXTogbWl4ZWR9PixcbiAgYWxsb3dsaXN0PzogP0FuaW1hdGVkU3R5bGVBbGxvd2xpc3QsXG4pOiAkUmVhZE9ubHk8e1tzdHJpbmddOiAkUmVhZE9ubHlDb21wb3NpdGVLZXlDb21wb25lbnR9PiB8IG51bGwge1xuICBsZXQgY29tcG9zaXRlS2V5OiB7W3N0cmluZ106ICRSZWFkT25seUNvbXBvc2l0ZUtleUNvbXBvbmVudH0gfCBudWxsID0gbnVsbDtcblxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlzW2lpXTtcblxuICAgIGlmIChhbGxvd2xpc3QgPT0gbnVsbCB8fCBoYXNPd24oYWxsb3dsaXN0LCBrZXkpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgICBsZXQgY29tcG9zaXRlS2V5Q29tcG9uZW50O1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWROb2RlKSB7XG4gICAgICAgIGNvbXBvc2l0ZUtleUNvbXBvbmVudCA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBjb21wb3NpdGVLZXlDb21wb25lbnQgPSBjcmVhdGVDb21wb3NpdGVLZXlGb3JBcnJheSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGNvbXBvc2l0ZUtleUNvbXBvbmVudCA9IGNyZWF0ZUNvbXBvc2l0ZUtleUZvck9iamVjdCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoY29tcG9zaXRlS2V5Q29tcG9uZW50ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGNvbXBvc2l0ZUtleSA9PSBudWxsKSB7XG4gICAgICAgICAgY29tcG9zaXRlS2V5ID0ge30gYXMge1tzdHJpbmddOiAkUmVhZE9ubHlDb21wb3NpdGVLZXlDb21wb25lbnR9O1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvc2l0ZUtleVtrZXldID0gY29tcG9zaXRlS2V5Q29tcG9uZW50O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb21wb3NpdGVLZXk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcmVDb21wb3NpdGVLZXlzRXF1YWwoXG4gIG1heWJlUHJldjogJFJlYWRPbmx5Q29tcG9zaXRlS2V5IHwgbnVsbCxcbiAgbWF5YmVOZXh0OiAkUmVhZE9ubHlDb21wb3NpdGVLZXkgfCBudWxsLFxuICBhbGxvd2xpc3Q6ID9BbmltYXRlZFByb3BzQWxsb3dsaXN0LFxuKTogYm9vbGVhbiB7XG4gIGlmIChtYXliZVByZXYgPT09IG1heWJlTmV4dCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChtYXliZVByZXYgPT09IG51bGwgfHwgbWF5YmVOZXh0ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEhlbHAgRmxvdyByZXRhaW4gdGhlIHR5cGUgcmVmaW5lbWVudHMgb2YgdGhlc2UuXG4gIGNvbnN0IHByZXYgPSBtYXliZVByZXY7XG4gIGNvbnN0IG5leHQgPSBtYXliZU5leHQ7XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByZXYpO1xuICBjb25zdCBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgaWYgKGxlbmd0aCAhPT0gT2JqZWN0LmtleXMobmV4dCkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlzW2lpXTtcbiAgICBpZiAoIWhhc093bihuZXh0LCBrZXkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByZXZDb21wb25lbnQgPSBwcmV2W2tleV07XG4gICAgY29uc3QgbmV4dENvbXBvbmVudCA9IG5leHRba2V5XTtcblxuICAgIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgIC8vIFdlIGtub3cgc3R5bGUgY29tcG9uZW50cyBhcmUgb2JqZWN0cyB3aXRoIG5vbi1taXhlZCB2YWx1ZXMuXG4gICAgICBpZiAoXG4gICAgICAgICFhcmVDb21wb3NpdGVLZXlDb21wb25lbnRzRXF1YWwoXG4gICAgICAgICAgLy8gJEZsb3dJZ25vcmVbaW5jb21wYXRpYmxlLWNhc3RdXG4gICAgICAgICAgcHJldkNvbXBvbmVudCBhcyAkUmVhZE9ubHlDb21wb3NpdGVLZXlDb21wb25lbnQsXG4gICAgICAgICAgLy8gJEZsb3dJZ25vcmVbaW5jb21wYXRpYmxlLWNhc3RdXG4gICAgICAgICAgbmV4dENvbXBvbmVudCBhcyAkUmVhZE9ubHlDb21wb3NpdGVLZXlDb21wb25lbnQsXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHByZXZDb21wb25lbnQgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUgfHxcbiAgICAgIHByZXZDb21wb25lbnQgaW5zdGFuY2VvZiBBbmltYXRlZEV2ZW50XG4gICAgKSB7XG4gICAgICBpZiAocHJldkNvbXBvbmVudCAhPT0gbmV4dENvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gYGFsbG93bGlzdGAgaXMgbnVsbCwgdGhlIGNvbXBvbmVudHMgbXVzdCBiZSB0aGUgc2FtZS4gT3RoZXJ3aXNlLFxuICAgICAgLy8gd2UgY3JlYXRlZCB0aGUgY29tcG9uZW50cyB1c2luZyBkZWVwIHRyYXZlcnNhbCwgc28gZGVlcCBjb21wYXJlIHRoZW0uXG4gICAgICBpZiAoYWxsb3dsaXN0ID09IG51bGwpIHtcbiAgICAgICAgaWYgKHByZXZDb21wb25lbnQgIT09IG5leHRDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhYXJlQ29tcG9zaXRlS2V5Q29tcG9uZW50c0VxdWFsKFxuICAgICAgICAgICAgLy8gJEZsb3dJZ25vcmVbaW5jb21wYXRpYmxlLWNhc3RdXG4gICAgICAgICAgICBwcmV2Q29tcG9uZW50IGFzICRSZWFkT25seUNvbXBvc2l0ZUtleUNvbXBvbmVudCxcbiAgICAgICAgICAgIC8vICRGbG93SWdub3JlW2luY29tcGF0aWJsZS1jYXN0XVxuICAgICAgICAgICAgbmV4dENvbXBvbmVudCBhcyAkUmVhZE9ubHlDb21wb3NpdGVLZXlDb21wb25lbnQsXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGFyZUNvbXBvc2l0ZUtleUNvbXBvbmVudHNFcXVhbChcbiAgcHJldjogJFJlYWRPbmx5Q29tcG9zaXRlS2V5Q29tcG9uZW50IHwgbnVsbCxcbiAgbmV4dDogJFJlYWRPbmx5Q29tcG9zaXRlS2V5Q29tcG9uZW50IHwgbnVsbCxcbik6IGJvb2xlYW4ge1xuICBpZiAocHJldiA9PT0gbmV4dCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChwcmV2IGluc3RhbmNlb2YgQW5pbWF0ZWROb2RlKSB7XG4gICAgcmV0dXJuIHByZXYgPT09IG5leHQ7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkocHJldikpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobmV4dCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbGVuZ3RoID0gcHJldi5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCAhPT0gbmV4dC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgICAgaWYgKCFhcmVDb21wb3NpdGVLZXlDb21wb25lbnRzRXF1YWwocHJldltpaV0sIG5leHRbaWldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpc1BsYWluT2JqZWN0KHByZXYpKSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KG5leHQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcmV2KTtcbiAgICBjb25zdCBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhuZXh0KS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpaV07XG4gICAgICBpZiAoXG4gICAgICAgICFoYXNPd24obnVsbHRocm93cyhuZXh0KSwga2V5KSB8fFxuICAgICAgICAhYXJlQ29tcG9zaXRlS2V5Q29tcG9uZW50c0VxdWFsKHByZXZba2V5XSwgbmV4dFtrZXldKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0ZWQgdmVyc2lvbnMgb2YgSlNDIGRvIG5vdCBpbXBsZW1lbnQgdGhlIG5ld2VyIE9iamVjdC5oYXNPd24uIFJlbW92ZVxuLy8gdGhpcyBzaGltIHdoZW4gdGhleSBkby5cbi8vICRGbG93SWdub3JlW21ldGhvZC11bmJpbmRpbmddXG5jb25zdCBfaGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5jb25zdCBoYXNPd246IChvYmo6ICRSZWFkT25seTx7Li4ufT4sIHByb3A6IHN0cmluZykgPT4gYm9vbGVhbiA9XG4gIC8vICRGbG93SWdub3JlW21ldGhvZC11bmJpbmRpbmddXG4gIE9iamVjdC5oYXNPd24gPz8gKChvYmosIHByb3ApID0+IF9oYXNPd25Qcm9wLmNhbGwob2JqLCBwcm9wKSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBZUEsSUFBQUEsY0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksYUFBQSxHQUFBRixzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBSCxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQU0sTUFBQSxHQUFBTixPQUFBO0FBQXdDLElBQUFPLGNBQUE7QUFrQ2pDLFNBQVNDLG9CQUFvQkEsQ0FDbENDLE1BQTJCLEVBQUFDLElBQUEsRUFLWjtFQUFBLElBQUFDLEtBQUEsT0FBQUMsZUFBQSxDQUFBQyxPQUFBLEVBQUFILElBQUE7SUFEZEksU0FBUyxHQUFBSCxLQUFBO0lB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