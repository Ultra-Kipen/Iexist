{"version":3,"names":["_getJestObj","mock","useNavigation","navigate","jest","fn","goBack","alert","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_NotificationScreen","_notificationService","_reactNative2","_jsxRuntime","_require","mockNotifications","id","content","notification_type","related_id","is_read","created_at","Date","toISOString","now","describe","beforeEach","clearAllMocks","notificationService","getNotifications","mockResolvedValue","data","pagination","page","limit","total","markAsRead","success","markAllAsRead","it","_render","render","jsx","default","getByProps","expect","text","toBeTruthy","_render2","getByText","findByText","_render3","_render4","notification","fireEvent","press","toHaveBeenCalledWith","_render5","markAllButton","toHaveBeenCalled","Alert","mockRejectedValue","Error","_render6","_render7","markAllReadButton"],"sources":["NotificationScreen.test.tsx"],"sourcesContent":["// __tests__/screens/NotificationScreen.test.tsx\r\nimport React from 'react';\r\nimport { render, fireEvent, waitFor } from '@testing-library/react-native';\r\nimport NotificationScreen from '../../src/screens/NotificationScreen';\r\nimport notificationService from '../../src/services/api/notificationService';\r\nimport { Alert } from 'react-native';\r\n\r\n// 모킹\r\njest.mock('@react-navigation/native', () => ({\r\n  useNavigation: () => ({\r\n    navigate: jest.fn(),\r\n    goBack: jest.fn(),\r\n  }),\r\n}));\r\n\r\njest.mock('../../src/services/api/notificationService');\r\n\r\njest.mock('react-native/Libraries/Alert/Alert', () => ({\r\n  alert: jest.fn(),\r\n}));\r\n\r\njest.mock('../../src/components/LoadingIndicator', () => 'LoadingIndicator');\r\njest.mock('../../src/components/Button', () => 'Button');\r\n\r\n// 테스트 데이터\r\nconst mockNotifications = [\r\n  {\r\n    id: 1,\r\n    content: '홍길동님이 회원님의 게시물에 좋아요를 눌렀습니다.',\r\n    notification_type: 'like',\r\n    related_id: 101,\r\n    is_read: false,\r\n    created_at: new Date().toISOString(),\r\n  },\r\n  {\r\n    id: 2,\r\n    content: '김철수님이 회원님의 게시물에 댓글을 남겼습니다.',\r\n    notification_type: 'comment',\r\n    related_id: 102,\r\n    is_read: true,\r\n    created_at: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(), // 1일 전\r\n  },\r\n  {\r\n    id: 3,\r\n    content: '행복 챌린지가 시작되었습니다.',\r\n    notification_type: 'challenge',\r\n    related_id: 5,\r\n    is_read: false,\r\n    created_at: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), // 3일 전\r\n  },\r\n];\r\n\r\ndescribe('NotificationScreen', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    \r\n    // notificationService 모킹 설정\r\n    notificationService.getNotifications = jest.fn().mockResolvedValue({\r\n      data: { \r\n        data: mockNotifications,\r\n        pagination: { page: 1, limit: 20, total: 3 }\r\n      },\r\n    });\r\n    \r\n    notificationService.markAsRead = jest.fn().mockResolvedValue({ success: true });\r\n    notificationService.markAllAsRead = jest.fn().mockResolvedValue({ success: true });\r\n  });\r\n\r\n  it('renders loading state initially', () => {\r\n    const { getByProps } = render(<NotificationScreen />);\r\n    expect(getByProps({ text: '알림 로딩 중...' })).toBeTruthy();\r\n  });\r\n\r\n  it('renders notifications list correctly', async () => {\r\n    const { getByText, findByText } = render(<NotificationScreen />);\r\n    \r\n    // 비동기적으로 컴포넌트가 업데이트될 때까지 대기\r\n    await findByText('알림');\r\n    await findByText('홍길동님이 회원님의 게시물에 좋아요를 눌렀습니다.');\r\n    \r\n    expect(getByText('알림')).toBeTruthy();\r\n    expect(getByText('홍길동님이 회원님의 게시물에 좋아요를 눌렀습니다.')).toBeTruthy();\r\n    expect(getByText('김철수님이 회원님의 게시물에 댓글을 남겼습니다.')).toBeTruthy();\r\n    expect(getByText('행복 챌린지가 시작되었습니다.')).toBeTruthy();\r\n  });\r\n\r\n  it('shows empty state when no notifications', async () => {\r\n    notificationService.getNotifications = jest.fn().mockResolvedValue({\r\n      data: { \r\n        data: [],\r\n        pagination: { page: 1, limit: 20, total: 0 }\r\n      },\r\n    });\r\n    \r\n    const { findByText } = render(<NotificationScreen />);\r\n    \r\n    await findByText('알림이 없습니다.');\r\n  });\r\n\r\n  it('marks notification as read when clicked', async () => {\r\n    const { findByText } = render(<NotificationScreen />);\r\n    \r\n    const notification = await findByText('홍길동님이 회원님의 게시물에 좋아요를 눌렀습니다.');\r\n    fireEvent.press(notification);\r\n    \r\n    expect(notificationService.markAsRead).toHaveBeenCalledWith(1);\r\n  });\r\n\r\n  it('marks all notifications as read', async () => {\r\n    const { findByText } = render(<NotificationScreen />);\r\n    \r\n    const markAllButton = await findByText('모두 읽음');\r\n    fireEvent.press(markAllButton);\r\n    \r\n    expect(notificationService.markAllAsRead).toHaveBeenCalled();\r\n    expect(Alert.alert).toHaveBeenCalledWith('성공', '모든 알림이 읽음 처리되었습니다.');\r\n  });\r\n\r\n  it('handles error during loading', async () => {\r\n    notificationService.getNotifications = jest.fn().mockRejectedValue(new Error('네트워크 오류'));\r\n    \r\n    const { findByText } = render(<NotificationScreen />);\r\n    \r\n    await findByText('알림을 불러오는 중 오류가 발생했습니다.');\r\n    await findByText('다시 시도');\r\n  });\r\n\r\n  it('handles refresh functionality', async () => {\r\n    const { findByText } = render(<NotificationScreen />);\r\n    \r\n    const markAllReadButton = await findByText('모두 읽음');\r\n    fireEvent.press(markAllReadButton);\r\n    \r\n    expect(notificationService.markAllAsRead).toHaveBeenCalled();\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}