{"version":3,"names":["_reactHooks","require","_useMemoizedCallback","describe","it","callback","jest","fn","n","_renderHook","renderHook","_ref","deps","useMemoizedCallback","initialProps","result","rerender","initialCallback","current","expect","toBe","toHaveBeenCalledWith","_renderHook2","_ref2","firstCallback","not","props","_renderHook3","_renderHook4","_ref3","newCallback","multiplier","_renderHook5","memoizedCallback"],"sources":["useMemoizedCallback.test.ts"],"sourcesContent":["import { renderHook } from '@testing-library/react-hooks';\r\nimport { useMemoizedCallback } from '../../src/hooks/useMemoizedCallback';\r\n\r\ndescribe('useMemoizedCallback', () => {\r\n  it('should maintain reference equality across renders', () => {\r\n    // 초기 콜백 함수 생성\r\n    const callback = jest.fn((n) => n * 2);\r\n    \r\n    // 훅 렌더링\r\n    const { result, rerender } = renderHook(\r\n      ({ callback, deps }) => useMemoizedCallback(callback, deps),\r\n      { initialProps: { callback, deps: [1] } }\r\n    );\r\n    \r\n    // 초기 함수 참조 저장\r\n    const initialCallback = result.current;\r\n    \r\n    // 의존성 변경 없이 리렌더링\r\n    rerender({ callback, deps: [1] });\r\n    \r\n    // 함수 참조가 유지되는지 확인\r\n    expect(result.current).toBe(initialCallback);\r\n    \r\n    // 함수 호출 테스트\r\n    expect(result.current(5)).toBe(10);\r\n    expect(callback).toHaveBeenCalledWith(5);\r\n  });\r\n\r\n  it('should update callback when dependencies change', () => {\r\n    // 초기 콜백 함수 생성\r\n    const initialCallback = jest.fn((n) => n * 2);\r\n    \r\n    // 훅 렌더링\r\n    const { result, rerender } = renderHook(\r\n      ({ callback, deps }) => useMemoizedCallback(callback, deps),\r\n      { initialProps: { callback: initialCallback, deps: [1] } }\r\n    );\r\n    \r\n    // 초기 함수 참조 저장\r\n    const firstCallback = result.current;\r\n    \r\n    // 의존성 변경하여 리렌더링\r\n    rerender({ callback: initialCallback, deps: [2] });\r\n    \r\n    // 함수 참조가 변경되는지 확인\r\n    expect(result.current).not.toBe(firstCallback);\r\n  });\r\n\r\n  it('should update function behavior with new callback', () => {\r\n    // 초기 프롭스\r\n    let props = {\r\n      callback: (n: number) => n * 2,\r\n      deps: [1] as number[]\r\n    };\r\n    \r\n    // 훅 렌더링\r\n    const { result, rerender } = renderHook(\r\n      () => useMemoizedCallback(props.callback, props.deps)\r\n    );\r\n    \r\n    // 초기 함수 테스트\r\n    expect(result.current(5)).toBe(10);\r\n    \r\n    // 콜백 변경\r\n    props = {\r\n      callback: (n: number) => n * 3,\r\n      deps: [1]\r\n    };\r\n    \r\n    rerender();\r\n    \r\n    // 새 콜백 로직이 적용되는지 확인\r\n    expect(result.current(5)).toBe(15);\r\n  });\r\n\r\n  it('should handle empty dependencies array', () => {\r\n    const callback = jest.fn((n) => n * 2);\r\n    \r\n    const { result, rerender } = renderHook(\r\n      ({ callback }) => useMemoizedCallback(callback, []),\r\n      { initialProps: { callback } }\r\n    );\r\n    \r\n    const initialCallback = result.current;\r\n    \r\n    // 콜백 변경해도 의존성 배열이 비어있으면 함수 참조 유지\r\n    const newCallback = jest.fn((n) => n * 3);\r\n    rerender({ callback: newCallback });\r\n    \r\n    expect(result.current).toBe(initialCallback);\r\n    \r\n    // useMemoizedCallback은 콜백 함수의 참조는 유지하면서\r\n    // 내부적으로는 최신 콜백을 사용하므로 결과는 15가 되어야 함\r\n    expect(result.current(5)).toBe(15);\r\n  });\r\n\r\n  it('should capture the latest props inside the callback', () => {\r\n    let multiplier = 2;\r\n    \r\n    const { result, rerender } = renderHook(\r\n      () => useMemoizedCallback((n: number) => n * multiplier, [])\r\n    );\r\n    \r\n    // 초기 함수 참조 저장\r\n    const memoizedCallback = result.current;\r\n    \r\n    // 외부 변수 변경\r\n    multiplier = 3;\r\n    \r\n    // 리렌더링\r\n    rerender();\r\n    \r\n    // 함수 참조는 변경되지 않지만 내부 로직은 업데이트됨\r\n    expect(result.current).toBe(memoizedCallback);\r\n    expect(result.current(5)).toBe(15); // 최신 multiplier 값(3)이 반영됨\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}