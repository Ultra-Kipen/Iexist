{"version":3,"names":["_react","require","_reactNative","_ThemeContext","_theme","_useLocalStorage3","_interopRequireDefault","_constants","useTheme","exports","context","useContext","ThemeContext","_useLocalStorage","useLocalStorage","APP_CONSTANTS","STORAGE_KEYS","THEME","DEFAULT_THEME","_useLocalStorage2","_slicedToArray2","default","storedTheme","setStoredTheme","Error","themeType","theme","setTheme","getSystemTheme","useCallback","Appearance","getColorScheme","changeTheme","_ref","_asyncToGenerator2","newTheme","_x","apply","arguments","useEffect","subscription","addChangeListener","_ref2","colorScheme","remove","THEMES","themeSetting","isDarkMode","_default"],"sources":["useTheme.ts"],"sourcesContent":["// hooks/useTheme.ts\r\n// 테마 관리를 위한 커스텀 훅\r\nimport { useContext, useCallback, useEffect } from 'react';\r\nimport { Appearance, ColorSchemeName } from 'react-native';\r\nimport { ThemeContext } from '../contexts/ThemeContext';\r\nimport { ThemeType, THEMES, DEFAULT_THEME } from '../constants/theme';\r\nimport useLocalStorage from './useLocalStorage';\r\nimport { APP_CONSTANTS } from '../constants';\r\nexport const useTheme = () => {\r\nconst context = useContext(ThemeContext);\r\nconst [storedTheme, setStoredTheme] = useLocalStorage<ThemeType>(\r\nAPP_CONSTANTS.STORAGE_KEYS.THEME,\r\nDEFAULT_THEME\r\n);\r\nif (!context) {\r\nthrow new Error('useTheme must be used within a ThemeProvider');\r\n}\r\nconst { theme: themeType, setTheme } = context;\r\n// 시스템 테마 가져오기\r\nconst getSystemTheme = useCallback((): ColorSchemeName => {\r\nreturn Appearance.getColorScheme() || 'light';\r\n}, []);\r\n// 테마 변경하기\r\nconst changeTheme = useCallback(\r\nasync (newTheme: ThemeType) => {\r\nawait setStoredTheme(newTheme);\r\nsetTheme(newTheme === 'system' ? getSystemTheme() as ThemeType : newTheme);\r\n},\r\n[getSystemTheme, setStoredTheme, setTheme]\r\n);\r\n// 시스템 테마 변경 감지하기\r\nuseEffect(() => {\r\nif (storedTheme === 'system') {\r\n  setTheme(getSystemTheme() as ThemeType);\r\nconst subscription = Appearance.addChangeListener(({ colorScheme }) => {\r\n  if (colorScheme) {\r\n    setTheme(colorScheme);\r\n  }\r\n});\r\n\r\nreturn () => {\r\n  subscription.remove();\r\n};\r\n}\r\n}, [getSystemTheme, setTheme, storedTheme]);\r\n// 로컬 스토리지의 테마 불러오기\r\nuseEffect(() => {\r\nif (storedTheme) {\r\n  setTheme(storedTheme === 'system' ? getSystemTheme() as ThemeType : storedTheme);\r\n}\r\n}, [getSystemTheme, setTheme, storedTheme]);\r\nreturn {\r\ntheme: THEMES[themeType as keyof typeof THEMES],// theme 객체 반환\r\nthemeType, // 'light' 또는 'dark'\r\nthemeSetting: storedTheme, // 'light', 'dark', 또는 'system'\r\nisDarkMode: themeType === 'dark',\r\nchangeTheme,\r\ngetSystemTheme,\r\n};\r\n};\r\nexport default useTheme;"],"mappings":";;;;;;;AAEA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,aAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,iBAAA,GAAAC,sBAAA,CAAAL,OAAA;AACA,IAAAM,UAAA,GAAAN,OAAA;AACO,IAAMO,QAAQ,GAAAC,OAAA,CAAAD,QAAA,GAAG,SAAXA,QAAQA,CAAA,EAAS;EAC9B,IAAME,OAAO,GAAG,IAAAC,iBAAU,EAACC,0BAAY,CAAC;EACxC,IAAAC,gBAAA,GAAsC,IAAAC,yBAAe,EACrDC,wBAAa,CAACC,YAAY,CAACC,KAAK,EAChCC,oBACA,CAAC;IAAAC,iBAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAR,gBAAA;IAHMS,WAAW,GAAAH,iBAAA;IAAEI,cAAc,GAAAJ,iBAAA;EAIlC,IAAI,CAACT,OAAO,EAAE;IACd,MAAM,IAAIc,KAAK,CAAC,8CAA8C,CAAC;EAC/D;EACA,IAAeC,SAAS,GAAef,OAAO,CAAtCgB,KAAK;IAAaC,QAAQ,GAAKjB,OAAO,CAApBiB,QAAQ;EAElC,IAAMC,cAAc,GAAG,IAAAC,kBAAW,EAAC,YAAuB;IAC1D,OAAOC,uBAAU,CAACC,cAAc,CAAC,CAAC,IAAI,OAAO;EAC7C,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMC,WAAW,GAAG,IAAAH,kBAAW;IAAA,IAAAI,IAAA,OAAAC,kBAAA,CAAAb,OAAA,EAC/B,WAAOc,QAAmB,EAAK;MAC/B,MAAMZ,cAAc,CAACY,QAAQ,CAAC;MAC9BR,QAAQ,CAACQ,QAAQ,KAAK,QAAQ,GAAGP,cAAc,CAAC,CAAC,GAAgBO,QAAQ,CAAC;IAC1E,CAAC;IAAA,iBAAAC,EAAA;MAAA,OAAAH,IAAA,CAAAI,KAAA,OAAAC,SAAA;IAAA;EAAA,KACD,CAACV,cAAc,EAAEL,cAAc,EAAEI,QAAQ,CACzC,CAAC;EAED,IAAAY,gBAAS,EAAC,YAAM;IAChB,IAAIjB,WAAW,KAAK,QAAQ,EAAE;MAC5BK,QAAQ,CAACC,cAAc,CAAC,CAAc,CAAC;MACzC,IAAMY,YAAY,GAAGV,uBAAU,CAACW,iBAAiB,CAAC,UAAAC,KAAA,EAAqB;QAAA,IAAlBC,WAAW,GAAAD,KAAA,CAAXC,WAAW;QAC9D,IAAIA,WAAW,EAAE;UACfhB,QAAQ,CAACgB,WAAW,CAAC;QACvB;MACF,CAAC,CAAC;MAEF,OAAO,YAAM;QACXH,YAAY,CAACI,MAAM,CAAC,CAAC;MACvB,CAAC;IACD;EACA,CAAC,EAAE,CAAChB,cAAc,EAAED,QAAQ,EAAEL,WAAW,CAAC,CAAC;EAE3C,IAAAiB,gBAAS,EAAC,YAAM;IAChB,IAAIjB,WAAW,EAAE;MACfK,QAAQ,CAACL,WAAW,KAAK,QAAQ,GAAGM,cAAc,CAAC,CAAC,GAAgBN,WAAW,CAAC;IAClF;EACA,CAAC,EAAE,CAACM,cAAc,EAAED,QAAQ,EAAEL,WAAW,CAAC,CAAC;EAC3C,OAAO;IACPI,KAAK,EAAEmB,aAAM,CAACpB,SAAS,CAAwB;IAC/CA,SAAS,EAATA,SAAS;IACTqB,YAAY,EAAExB,WAAW;IACzByB,UAAU,EAAEtB,SAAS,KAAK,MAAM;IAChCO,WAAW,EAAXA,WAAW;IACXJ,cAAc,EAAdA;EACA,CAAC;AACD,CAAC;AAAC,IAAAoB,QAAA,GAAAvC,OAAA,CAAAY,OAAA,GACab,QAAQ","ignoreList":[]}