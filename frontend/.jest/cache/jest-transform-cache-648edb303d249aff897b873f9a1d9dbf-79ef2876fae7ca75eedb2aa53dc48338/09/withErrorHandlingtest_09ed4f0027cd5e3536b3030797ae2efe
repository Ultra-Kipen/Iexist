377a37923594e011d2cd89ed8c423a7b
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _withErrorHandling = require("../../src/hoc/withErrorHandling");
var _reactNative2 = require("react-native");
var _jsxRuntime = require("react/jsx-runtime");
var originalConsoleError = console.error;
beforeAll(function () {
  console.error = jest.fn();
});
afterAll(function () {
  console.error = originalConsoleError;
});
describe('withErrorHandling HOC', function () {
  var ErrorComponent = function ErrorComponent(_ref) {
    var _ref$shouldThrow = _ref.shouldThrow,
      shouldThrow = _ref$shouldThrow === void 0 ? false : _ref$shouldThrow;
    if (shouldThrow) {
      throw new Error('테스트 에러');
    }
    return (0, _jsxRuntime.jsx)(_reactNative2.Text, {
      children: "\uC815\uC0C1 \uCEF4\uD3EC\uB10C\uD2B8"
    });
  };
  var ComponentWithErrorHandling = (0, _withErrorHandling.withErrorHandling)(ErrorComponent);
  test('에러가 없으면 원래 컴포넌트를 렌더링해야 함', function () {
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(ComponentWithErrorHandling, {
        shouldThrow: false
      })),
      getByText = _render.getByText;
    expect(getByText('정상 컴포넌트')).toBeTruthy();
  });
  test('에러 발생 시 에러 UI를 표시해야 함', function () {
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(ComponentWithErrorHandling, {
        shouldThrow: true
      })),
      getByText = _render2.getByText;
    expect(getByText('문제가 발생했습니다')).toBeTruthy();
    expect(getByText(/테스트 에러/)).toBeTruthy();
  });
  test('에러 UI에서 다시 시도 버튼 클릭 시 에러 상태를 초기화해야 함', function () {
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(ComponentWithErrorHandling, {
        shouldThrow: true
      })),
      getByText = _render3.getByText,
      queryByText = _render3.queryByText;
    expect(getByText('문제가 발생했습니다')).toBeTruthy();
    var retryButton = getByText('다시 시도');
    _reactNative.fireEvent.press(retryButton);
    expect(getByText('문제가 발생했습니다')).toBeTruthy();
  });
  test('HOC가 displayName을 올바르게 설정해야 함', function () {
    expect(ComponentWithErrorHandling.displayName).toBe('withErrorHandling(ErrorComponent)');
  });
  test('componentDidCatch가 호출되고 에러 정보가 저장되어야 함', function () {
    var spy = jest.spyOn(ComponentWithErrorHandling.prototype, 'componentDidCatch');
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(ComponentWithErrorHandling, {
      shouldThrow: true
    }));
    expect(spy).toHaveBeenCalled();
    expect(console.error).toHaveBeenCalledWith('컴포넌트 오류:', expect.any(Error), expect.anything());
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl93aXRoRXJyb3JIYW5kbGluZyIsIl9yZWFjdE5hdGl2ZTIiLCJfanN4UnVudGltZSIsIm9yaWdpbmFsQ29uc29sZUVycm9yIiwiY29uc29sZSIsImVycm9yIiwiYmVmb3JlQWxsIiwiamVzdCIsImZuIiwiYWZ0ZXJBbGwiLCJkZXNjcmliZSIsIkVycm9yQ29tcG9uZW50IiwiX3JlZiIsIl9yZWYkc2hvdWxkVGhyb3ciLCJzaG91bGRUaHJvdyIsIkVycm9yIiwianN4IiwiVGV4dCIsImNoaWxkcmVuIiwiQ29tcG9uZW50V2l0aEVycm9ySGFuZGxpbmciLCJ3aXRoRXJyb3JIYW5kbGluZyIsInRlc3QiLCJfcmVuZGVyIiwicmVuZGVyIiwiZ2V0QnlUZXh0IiwiZXhwZWN0IiwidG9CZVRydXRoeSIsIl9yZW5kZXIyIiwiX3JlbmRlcjMiLCJxdWVyeUJ5VGV4dCIsInJldHJ5QnV0dG9uIiwiZmlyZUV2ZW50IiwicHJlc3MiLCJkaXNwbGF5TmFtZSIsInRvQmUiLCJzcHkiLCJzcHlPbiIsInByb3RvdHlwZSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImFueSIsImFueXRoaW5nIl0sInNvdXJjZXMiOlsid2l0aEVycm9ySGFuZGxpbmcudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgcmVuZGVyLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZSc7XHJcbmltcG9ydCB7IHdpdGhFcnJvckhhbmRsaW5nIH0gZnJvbSAnLi4vLi4vc3JjL2hvYy93aXRoRXJyb3JIYW5kbGluZyc7XHJcbmltcG9ydCB7IFRleHQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xyXG5cclxuLy8g7L2Y7IaUIOyXkOufrCDrsKnsp4BcclxuY29uc3Qgb3JpZ2luYWxDb25zb2xlRXJyb3IgPSBjb25zb2xlLmVycm9yO1xyXG5iZWZvcmVBbGwoKCkgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IgPSBqZXN0LmZuKCk7XHJcbn0pO1xyXG5hZnRlckFsbCgoKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvciA9IG9yaWdpbmFsQ29uc29sZUVycm9yO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCd3aXRoRXJyb3JIYW5kbGluZyBIT0MnLCAoKSA9PiB7XHJcbiAgLy8g7JeQ65+s66W8IOycoOuwnO2VmOuKlCDthYzsiqTtirgg7Lu07Y+s64SM7Yq4XHJcbiAgY29uc3QgRXJyb3JDb21wb25lbnQgPSAoeyBzaG91bGRUaHJvdyA9IGZhbHNlIH0pID0+IHtcclxuICAgIGlmIChzaG91bGRUaHJvdykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+2FjOyKpO2KuCDsl5Drn6wnKTtcclxuICAgIH1cclxuICAgIHJldHVybiA8VGV4dD7soJXsg4Eg7Lu07Y+s64SM7Yq4PC9UZXh0PjtcclxuICB9O1xyXG5cclxuICBjb25zdCBDb21wb25lbnRXaXRoRXJyb3JIYW5kbGluZyA9IHdpdGhFcnJvckhhbmRsaW5nKEVycm9yQ29tcG9uZW50KTtcclxuXHJcbiAgdGVzdCgn7JeQ65+s6rCAIOyXhuycvOuptCDsm5Drnpgg7Lu07Y+s64SM7Yq466W8IOugjOuNlOunge2VtOyVvCDtlagnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGdldEJ5VGV4dCB9ID0gcmVuZGVyKDxDb21wb25lbnRXaXRoRXJyb3JIYW5kbGluZyBzaG91bGRUaHJvdz17ZmFsc2V9IC8+KTtcclxuICAgIGV4cGVjdChnZXRCeVRleHQoJ+ygleyDgSDsu7Ttj6zrhIztirgnKSkudG9CZVRydXRoeSgpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCfsl5Drn6wg67Cc7IOdIOyLnCDsl5Drn6wgVUnrpbwg7ZGc7Iuc7ZW07JW8IO2VqCcsICgpID0+IHtcclxuICAgIGNvbnN0IHsgZ2V0QnlUZXh0IH0gPSByZW5kZXIoPENvbXBvbmVudFdpdGhFcnJvckhhbmRsaW5nIHNob3VsZFRocm93PXt0cnVlfSAvPik7XHJcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCfrrLjsoJzqsIAg67Cc7IOd7ZaI7Iq164uI64ukJykpLnRvQmVUcnV0aHkoKTtcclxuICAgIGV4cGVjdChnZXRCeVRleHQoL+2FjOyKpO2KuCDsl5Drn6wvKSkudG9CZVRydXRoeSgpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCfsl5Drn6wgVUnsl5DshJwg64uk7IucIOyLnOuPhCDrsoTtirwg7YG066atIOyLnCDsl5Drn6wg7IOB7YOc66W8IOy0iOq4sO2ZlO2VtOyVvCDtlagnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGdldEJ5VGV4dCwgcXVlcnlCeVRleHQgfSA9IHJlbmRlcig8Q29tcG9uZW50V2l0aEVycm9ySGFuZGxpbmcgc2hvdWxkVGhyb3c9e3RydWV9IC8+KTtcclxuICAgIFxyXG4gICAgLy8g7JeQ65+sIFVJ6rCAIO2RnOyLnOuQmOuKlOyngCDtmZXsnbhcclxuICAgIGV4cGVjdChnZXRCeVRleHQoJ+usuOygnOqwgCDrsJzsg53tlojsirXri4jri6QnKSkudG9CZVRydXRoeSgpO1xyXG4gICAgXHJcbiAgICAvLyDri6Tsi5wg7Iuc64+EIOuyhO2KvCDtgbTrpq1cclxuICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gZ2V0QnlUZXh0KCfri6Tsi5wg7Iuc64+EJyk7XHJcbiAgICBmaXJlRXZlbnQucHJlc3MocmV0cnlCdXR0b24pO1xyXG4gICAgXHJcbiAgICAvLyBzaG91bGRUaHJvdyDqsJLsnbQg7Jes7KCE7Z6IIHRydWXsnbTquLAg65WM66y47JeQIOuLpOyLnCDsl5Drn6wgVUnqsIAg7ZGc7Iuc65CY7Ja07JW8IO2VqFxyXG4gICAgLy8gKOyLpOygnCDsi5zrgpjrpqzsmKTsl5DshJzripQgcHJvcHPqsIAg67OA6rK965CY7Ja0IOygleyDgSDroIzrjZTrp4HrkKAg7IiYIOyeiOydjClcclxuICAgIGV4cGVjdChnZXRCeVRleHQoJ+usuOygnOqwgCDrsJzsg53tlojsirXri4jri6QnKSkudG9CZVRydXRoeSgpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdIT0PqsIAgZGlzcGxheU5hbWXsnYQg7Jis67CU66W06rKMIOyEpOygle2VtOyVvCDtlagnLCAoKSA9PiB7XHJcbiAgICBleHBlY3QoQ29tcG9uZW50V2l0aEVycm9ySGFuZGxpbmcuZGlzcGxheU5hbWUpLnRvQmUoJ3dpdGhFcnJvckhhbmRsaW5nKEVycm9yQ29tcG9uZW50KScpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdjb21wb25lbnREaWRDYXRjaOqwgCDtmLjstpzrkJjqs6Ag7JeQ65+sIOygleuztOqwgCDsoIDsnqXrkJjslrTslbwg7ZWoJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3B5ID0gamVzdC5zcHlPbihDb21wb25lbnRXaXRoRXJyb3JIYW5kbGluZy5wcm90b3R5cGUsICdjb21wb25lbnREaWRDYXRjaCcpO1xyXG4gICAgcmVuZGVyKDxDb21wb25lbnRXaXRoRXJyb3JIYW5kbGluZyBzaG91bGRUaHJvdz17dHJ1ZX0gLz4pO1xyXG4gICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgZXhwZWN0KGNvbnNvbGUuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfsu7Ttj6zrhIztirgg7Jik66WYOicsIGV4cGVjdC5hbnkoRXJyb3IpLCBleHBlY3QuYW55dGhpbmcoKSk7XHJcbiAgfSk7XHJcbn0pOyJdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGtCQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxhQUFBLEdBQUFILE9BQUE7QUFBb0MsSUFBQUksV0FBQSxHQUFBSixPQUFBO0FBR3BDLElBQU1LLG9CQUFvQixHQUFHQyxPQUFPLENBQUNDLEtBQUs7QUFDMUNDLFNBQVMsQ0FBQyxZQUFNO0VBQ2RGLE9BQU8sQ0FBQ0Ms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