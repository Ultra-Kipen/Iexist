12ee102b88de441580e08385137f37ec
_getJestObj().mock("../../../src/services/api/client", function () {
  return {
    get: jest.fn(),
    post: jest.fn(),
    interceptors: {
      request: {
        use: jest.fn()
      },
      response: {
        use: jest.fn()
      }
    }
  };
});
_getJestObj().mock("../../../src/services/api/emotionService", function () {
  return {
    getAllEmotions: jest.fn(),
    recordEmotions: jest.fn()
  };
});
_getJestObj().mock('react-native-vector-icons/MaterialCommunityIcons', function () {
  return "MaterialCommunityIcons";
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _reactNative2 = require("react-native");
var _EmotionLogScreen = _interopRequireDefault(require("../../../src/screens/EmotionLogScreen"));
var _emotionService = _interopRequireDefault(require("../../../src/services/api/emotionService"));
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockAlert = {
  alert: jest.fn()
};
jest.spyOn(_reactNative2.Alert, 'alert').mockImplementation(mockAlert.alert);
var mockEmotions = [{
  emotion_id: 1,
  name: '행복',
  icon: 'emoticon-happy-outline',
  color: '#FFD700'
}, {
  emotion_id: 2,
  name: '감사',
  icon: 'hand-heart',
  color: '#FF69B4'
}];
describe('EmotionLogScreen', function () {
  var mockNavigation = {
    goBack: jest.fn()
  };
  beforeEach(function () {
    jest.clearAllMocks();
    _emotionService.default.getAllEmotions.mockResolvedValue({
      data: {
        status: 'success',
        data: mockEmotions
      }
    });
    _emotionService.default.recordEmotions.mockResolvedValue({});
  });
  it('렌더링이 올바르게 됨', (0, _asyncToGenerator2.default)(function* () {
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findByText = _render.findByText;
    yield findByText('오늘의 감정');
    yield findByText('현재 어떤 감정을 느끼고 계신가요?');
  }));
  it('모든 감정 칩이 올바르게 렌더링됨', (0, _asyncToGenerator2.default)(function* () {
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findAllByTestId = _render2.findAllByTestId;
    var chips = yield findAllByTestId('emotion-chip');
    expect(chips.length).toBe(mockEmotions.length);
  }));
  it('감정 칩을 클릭하면 선택 상태가 변경됨', (0, _asyncToGenerator2.default)(function* () {
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findAllByTestId = _render3.findAllByTestId,
      findByTestId = _render3.findByTestId;
    var chips = yield findAllByTestId('emotion-chip');
    _reactNative.fireEvent.press(chips[0]);
    var submitButton = yield findByTestId('emotion-submit-button');
    expect(submitButton.props.disabled).toBeFalsy();
  }));
  it('여러 감정을 선택할 수 있음', (0, _asyncToGenerator2.default)(function* () {
    var _render4 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findAllByTestId = _render4.findAllByTestId,
      findByTestId = _render4.findByTestId;
    var chips = yield findAllByTestId('emotion-chip');
    _reactNative.fireEvent.press(chips[0]);
    _reactNative.fireEvent.press(chips[1]);
    var submitButton = yield findByTestId('emotion-submit-button');
    expect(submitButton.props.disabled).toBeFalsy();
  }));
  it('메모 입력이 가능함', (0, _asyncToGenerator2.default)(function* () {
    var _render5 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findByTestId = _render5.findByTestId;
    var noteInput = yield findByTestId('emotion-note-input');
    expect(noteInput).toBeTruthy();
    _reactNative.fireEvent.changeText(noteInput, '오늘은 정말 좋은 하루였습니다.');
  }));
  it('감정 기록 제출 성공 시 확인 메시지와 화면 이동이 동작함', (0, _asyncToGenerator2.default)(function* () {
    var _render6 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findAllByTestId = _render6.findAllByTestId,
      findByTestId = _render6.findByTestId;
    var chips = yield findAllByTestId('emotion-chip');
    _reactNative.fireEvent.press(chips[0]);
    var submitButton = yield findByTestId('emotion-submit-button');
    _reactNative.fireEvent.press(submitButton);
    yield new Promise(function (resolve) {
      return setTimeout(resolve, 100);
    });
    expect(_emotionService.default.recordEmotions).toHaveBeenCalled();
    expect(mockAlert.alert).toHaveBeenCalled();
    var alertCall = mockAlert.alert.mock.calls[0];
    if (alertCall && alertCall[2] && alertCall[2][0] && alertCall[2][0].onPress) {
      alertCall[2][0].onPress();
    }
    expect(mockNavigation.goBack).toHaveBeenCalled();
  }));
  it('감정 기록 제출 실패 시 에러 메시지가 표시됨', (0, _asyncToGenerator2.default)(function* () {
    _emotionService.default.recordEmotions.mockRejectedValueOnce({
      response: {
        data: {
          message: '감정 기록 실패'
        }
      }
    });
    var _render7 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findAllByTestId = _render7.findAllByTestId,
      findByTestId = _render7.findByTestId;
    var chips = yield findAllByTestId('emotion-chip');
    _reactNative.fireEvent.press(chips[0]);
    var submitButton = yield findByTestId('emotion-submit-button');
    _reactNative.fireEvent.press(submitButton);
    yield new Promise(function (resolve) {
      return setTimeout(resolve, 100);
    });
    expect(mockAlert.alert).toHaveBeenCalledWith('오류', '감정 기록 실패');
  }));
  it('감정을 선택했다가 다시 클릭하면 선택이 해제됨', (0, _asyncToGenerator2.default)(function* () {
    var _render8 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_EmotionLogScreen.default, {
        navigation: mockNavigation
      })),
      findAllByTestId = _render8.findAllByTestId,
      findByTestId = _render8.findByTestId;
    var chips = yield findAllByTestId('emotion-chip');
    _reactNative.fireEvent.press(chips[0]);
    var submitButton = yield findByTestId('emotion-submit-button');
    expect(submitButton.props.disabled).toBeFalsy();
    _reactNative.fireEvent.press(chips[0]);
    yield new Promise(function (resolve) {
      return setTimeout(resolve, 50);
    });
    expect(submitButton.props.disabled).toBeTruthy();
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXQiLCJqZXN0IiwiZm4iLCJwb3N0IiwiaW50ZXJjZXB0b3JzIiwicmVxdWVzdCIsInVzZSIsInJlc3BvbnNlIiwiZ2V0QWxsRW1vdGlvbnMiLCJyZWNvcmRFbW90aW9ucyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlYWN0IiwiX3JlYWN0TmF0aXZlIiwiX3JlYWN0TmF0aXZlMiIsIl9FbW90aW9uTG9nU2NyZWVuIiwiX2Vtb3Rpb25TZXJ2aWNlIiwiX2pzeFJ1bnRpbWUiLCJfcmVxdWlyZSIsIm1vY2tBbGVydCIsImFsZXJ0Iiwic3B5T24iLCJBbGVydCIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIm1vY2tFbW90aW9ucyIsImVtb3Rpb25faWQiLCJuYW1lIiwiaWNvbiIsImNvbG9yIiwiZGVzY3JpYmUiLCJtb2NrTmF2aWdhdGlvbiIsImdvQmFjayIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiZW1vdGlvblNlcnZpY2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJzdGF0dXMiLCJpdCIsImRlZmF1bHQiLCJfcmVuZGVyIiwicmVuZGVyIiwianN4IiwibmF2aWdhdGlvbiIsImZpbmRCeVRleHQiLCJfcmVuZGVyMiIsImZpbmRBbGxCeVRlc3RJZCIsImNoaXBzIiwiZXhwZWN0IiwibGVuZ3RoIiwidG9CZSIsIl9yZW5kZXIzIiwiZmluZEJ5VGVzdElkIiwiZmlyZUV2ZW50IiwicHJlc3MiLCJzdWJtaXRCdXR0b24iLCJwcm9wcyIsImRpc2FibGVkIiwidG9CZUZhbHN5IiwiX3JlbmRlcjQiLCJfcmVuZGVyNSIsIm5vdGVJbnB1dCIsInRvQmVUcnV0aHkiLCJjaGFuZ2VUZXh0IiwiX3JlbmRlcjYiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiYWxlcnRDYWxsIiwiY2FsbHMiLCJvblByZXNzIiwibW9ja1JlamVjdGVkVmFsdWVPbmNlIiwibWVzc2FnZSIsIl9yZW5kZXI3IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJfcmVuZGVyOCJdLCJzb3VyY2VzIjpbIkVtb3Rpb25Mb2dTY3JlZW4uaW50ZWdyYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgcmVuZGVyLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZSc7XHJcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcclxuXHJcbi8vIGFwaUNsaWVudCDrqqjtgrkgKGVtb3Rpb25TZXJ2aWNlIOuqqO2CuSDsoITsl5Ag7JyE7LmY7ZW07JW8IO2VqClcclxuamVzdC5tb2NrKCcuLi8uLi8uLi9zcmMvc2VydmljZXMvYXBpL2NsaWVudCcsICgpID0+ICh7XHJcbiAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgcG9zdDogamVzdC5mbigpLFxyXG4gIGludGVyY2VwdG9yczoge1xyXG4gICAgcmVxdWVzdDogeyB1c2U6IGplc3QuZm4oKSB9LFxyXG4gICAgcmVzcG9uc2U6IHsgdXNlOiBqZXN0LmZuKCkgfVxyXG4gIH1cclxufSkpO1xyXG5cclxuLy8gZW1vdGlvblNlcnZpY2Ug66qo7YK5XHJcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2FwaS9lbW90aW9uU2VydmljZScsICgpID0+ICh7XHJcbiAgZ2V0QWxsRW1vdGlvbnM6IGplc3QuZm4oKSxcclxuICByZWNvcmRFbW90aW9uczogamVzdC5mbigpXHJcbn0pKTtcclxuXHJcbi8vIEFsZXJ0IOuqqO2CuVxyXG5jb25zdCBtb2NrQWxlcnQgPSB7IGFsZXJ0OiBqZXN0LmZuKCkgfTtcclxuamVzdC5zcHlPbihBbGVydCwgJ2FsZXJ0JykubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tBbGVydC5hbGVydCk7XHJcblxyXG4vLyByZWFjdC1uYXRpdmUtdmVjdG9yLWljb25zIOuqqO2CuVxyXG5qZXN0Lm1vY2soJ3JlYWN0LW5hdGl2ZS12ZWN0b3ItaWNvbnMvTWF0ZXJpYWxDb21tdW5pdHlJY29ucycsICgpID0+IFwiTWF0ZXJpYWxDb21tdW5pdHlJY29uc1wiKTtcclxuXHJcbi8vIOyLpOygnCDsu7Ttj6zrhIztirgg7J6E7Y+s7Yq4XHJcbmltcG9ydCBFbW90aW9uTG9nU2NyZWVuIGZyb20gJy4uLy4uLy4uL3NyYy9zY3JlZW5zL0Vtb3Rpb25Mb2dTY3JlZW4nO1xyXG5pbXBvcnQgZW1vdGlvblNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2FwaS9lbW90aW9uU2VydmljZSc7XHJcblxyXG4vLyDrqqkg642w7J207YSwXHJcbmNvbnN0IG1vY2tFbW90aW9ucyA9IFtcclxuICB7IGVtb3Rpb25faWQ6IDEsIG5hbWU6ICftlonrs7UnLCBpY29uOiAnZW1vdGljb24taGFwcHktb3V0bGluZScsIGNvbG9yOiAnI0ZGRDcwMCcgfSxcclxuICB7IGVtb3Rpb25faWQ6IDIsIG5hbWU6ICfqsJDsgqwnLCBpY29uOiAnaGFuZC1oZWFydCcsIGNvbG9yOiAnI0ZGNjlCNCcgfSxcclxuXTtcclxuXHJcbmRlc2NyaWJlKCdFbW90aW9uTG9nU2NyZWVuJywgKCkgPT4ge1xyXG4gIGNvbnN0IG1vY2tOYXZpZ2F0aW9uID0geyBnb0JhY2s6IGplc3QuZm4oKSB9O1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgXHJcbiAgICAoZW1vdGlvblNlcnZpY2UuZ2V0QWxsRW1vdGlvbnMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBkYXRhOiBtb2NrRW1vdGlvbnNcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIChlbW90aW9uU2VydmljZS5yZWNvcmRFbW90aW9ucyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHt9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gYWN066W8IOyCrOyaqe2VmOyngCDslYrqs6Ag67mE64+Z6riwIO2FjOyKpO2KuCDsp4TtlolcclxuICBpdCgn66CM642U66eB7J20IOyYrOuwlOultOqyjCDrkKgnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGZpbmRCeVRleHQgfSA9IHJlbmRlcig8RW1vdGlvbkxvZ1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4pO1xyXG4gICAgXHJcbiAgICBhd2FpdCBmaW5kQnlUZXh0KCfsmKTripjsnZgg6rCQ7KCVJyk7XHJcbiAgICBhd2FpdCBmaW5kQnlUZXh0KCftmITsnqwg7Ja065akIOqwkOygleydhCDripDrgbzqs6Ag6rOE7Iug6rCA7JqUPycpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgn66qo65OgIOqwkOyglSDsuansnbQg7Jis67CU66W06rKMIOugjOuNlOungeuQqCcsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHsgZmluZEFsbEJ5VGVzdElkIH0gPSByZW5kZXIoPEVtb3Rpb25Mb2dTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+KTtcclxuICAgIFxyXG4gICAgY29uc3QgY2hpcHMgPSBhd2FpdCBmaW5kQWxsQnlUZXN0SWQoJ2Vtb3Rpb24tY2hpcCcpO1xyXG4gICAgZXhwZWN0KGNoaXBzLmxlbmd0aCkudG9CZShtb2NrRW1vdGlvbnMubGVuZ3RoKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ+qwkOyglSDsuansnYQg7YG066at7ZWY66m0IOyEoO2DnSDsg4Htg5zqsIAg67OA6rK965CoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgeyBmaW5kQWxsQnlUZXN0SWQsIGZpbmRCeVRlc3RJZCB9ID0gcmVuZGVyKDxFbW90aW9uTG9nU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPik7XHJcbiAgICBcclxuICAgIGNvbnN0IGNoaXBzID0gYXdhaXQgZmluZEFsbEJ5VGVzdElkKCdlbW90aW9uLWNoaXAnKTtcclxuICAgIGZpcmVFdmVudC5wcmVzcyhjaGlwc1swXSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGF3YWl0IGZpbmRCeVRlc3RJZCgnZW1vdGlvbi1zdWJtaXQtYnV0dG9uJyk7XHJcbiAgICBleHBlY3Qoc3VibWl0QnV0dG9uLnByb3BzLmRpc2FibGVkKS50b0JlRmFsc3koKTtcclxuICB9KTtcclxuICBcclxuICBpdCgn7Jes65+sIOqwkOygleydhCDshKDtg53tlaAg7IiYIOyeiOydjCcsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHsgZmluZEFsbEJ5VGVzdElkLCBmaW5kQnlUZXN0SWQgfSA9IHJlbmRlcig8RW1vdGlvbkxvZ1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4pO1xyXG4gICAgXHJcbiAgICBjb25zdCBjaGlwcyA9IGF3YWl0IGZpbmRBbGxCeVRlc3RJZCgnZW1vdGlvbi1jaGlwJyk7XHJcbiAgICBmaXJlRXZlbnQucHJlc3MoY2hpcHNbMF0pO1xyXG4gICAgZmlyZUV2ZW50LnByZXNzKGNoaXBzWzFdKTtcclxuICAgIFxyXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gYXdhaXQgZmluZEJ5VGVzdElkKCdlbW90aW9uLXN1Ym1pdC1idXR0b24nKTtcclxuICAgIGV4cGVjdChzdWJtaXRCdXR0b24ucHJvcHMuZGlzYWJsZWQpLnRvQmVGYWxzeSgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgn66mU66qoIOyeheugpeydtCDqsIDriqXtlagnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGZpbmRCeVRlc3RJZCB9ID0gcmVuZGVyKDxFbW90aW9uTG9nU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPik7XHJcbiAgICBcclxuICAgIGNvbnN0IG5vdGVJbnB1dCA9IGF3YWl0IGZpbmRCeVRlc3RJZCgnZW1vdGlvbi1ub3RlLWlucHV0Jyk7XHJcbiAgICBleHBlY3Qobm90ZUlucHV0KS50b0JlVHJ1dGh5KCk7XHJcbiAgICBcclxuICAgIGZpcmVFdmVudC5jaGFuZ2VUZXh0KG5vdGVJbnB1dCwgJ+yYpOuKmOydgCDsoJXrp5Ag7KKL7J2AIO2VmOujqOyYgOyKteuLiOuLpC4nKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ+qwkOyglSDquLDroZ0g7KCc7LacIOyEseqztSDsi5wg7ZmV7J24IOuplOyLnOyngOyZgCDtmZTrqbQg7J2064+Z7J20IOuPmeyeke2VqCcsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHsgZmluZEFsbEJ5VGVzdElkLCBmaW5kQnlUZXN0SWQgfSA9IHJlbmRlcig8RW1vdGlvbkxvZ1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4pO1xyXG4gICAgXHJcbiAgICBjb25zdCBjaGlwcyA9IGF3YWl0IGZpbmRBbGxCeVRlc3RJZCgnZW1vdGlvbi1jaGlwJyk7XHJcbiAgICBmaXJlRXZlbnQucHJlc3MoY2hpcHNbMF0pO1xyXG4gICAgXHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBhd2FpdCBmaW5kQnlUZXN0SWQoJ2Vtb3Rpb24tc3VibWl0LWJ1dHRvbicpO1xyXG4gICAgZmlyZUV2ZW50LnByZXNzKHN1Ym1pdEJ1dHRvbik7XHJcbiAgICBcclxuICAgIC8vIOu5hOuPmeq4sCDsnpHsl4XsnbQg7JmE66OM65CgIOuVjOq5jOyngCDquLDri6TrprxcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KGVtb3Rpb25TZXJ2aWNlLnJlY29yZEVtb3Rpb25zKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICBleHBlY3QobW9ja0FsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICBcclxuICAgIC8vIEFsZXJ07J2YIOy9nOuwsSDtlajsiJjrpbwg7IiY64+Z7Jy866GcIO2YuOy2nFxyXG4gICAgY29uc3QgYWxlcnRDYWxsID0gbW9ja0FsZXJ0LmFsZXJ0Lm1vY2suY2FsbHNbMF07XHJcbiAgICBpZiAoYWxlcnRDYWxsICYmIGFsZXJ0Q2FsbFsyXSAmJiBhbGVydENhbGxbMl1bMF0gJiYgYWxlcnRDYWxsWzJdWzBdLm9uUHJlc3MpIHtcclxuICAgICAgYWxlcnRDYWxsWzJdWzBdLm9uUHJlc3MoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZXhwZWN0KG1vY2tOYXZpZ2F0aW9uLmdvQmFjaykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgn6rCQ7KCVIOq4sOuhnSDsoJzstpwg7Iuk7YyoIOyLnCDsl5Drn6wg66mU7Iuc7KeA6rCAIO2RnOyLnOuQqCcsIGFzeW5jICgpID0+IHtcclxuICAgIChlbW90aW9uU2VydmljZS5yZWNvcmRFbW90aW9ucyBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlT25jZSh7XHJcbiAgICAgIHJlc3BvbnNlOiB7IGRhdGE6IHsgbWVzc2FnZTogJ+qwkOyglSDquLDroZ0g7Iuk7YyoJyB9IH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGZpbmRBbGxCeVRlc3RJZCwgZmluZEJ5VGVzdElkIH0gPSByZW5kZXIoPEVtb3Rpb25Mb2dTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+KTtcclxuICAgIFxyXG4gICAgY29uc3QgY2hpcHMgPSBhd2FpdCBmaW5kQWxsQnlUZXN0SWQoJ2Vtb3Rpb24tY2hpcCcpO1xyXG4gICAgZmlyZUV2ZW50LnByZXNzKGNoaXBzWzBdKTtcclxuICAgIFxyXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gYXdhaXQgZmluZEJ5VGVzdElkKCdlbW90aW9uLXN1Ym1pdC1idXR0b24nKTtcclxuICAgIGZpcmVFdmVudC5wcmVzcyhzdWJtaXRCdXR0b24pO1xyXG4gICAgXHJcbiAgICAvLyDruYTrj5nquLAg7J6R7JeF7J20IOyZhOujjOuQoCDrlYzquYzsp4Ag6riw64uk66a8XHJcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcbiAgICBcclxuICAgIGV4cGVjdChtb2NrQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfsmKTrpZgnLCAn6rCQ7KCVIOq4sOuhnSDsi6TtjKgnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ+qwkOygleydhCDshKDtg53tlojri6TqsIAg64uk7IucIO2BtOumre2VmOuptCDshKDtg53snbQg7ZW07KCc65CoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgeyBmaW5kQWxsQnlUZXN0SWQsIGZpbmRCeVRlc3RJZCB9ID0gcmVuZGVyKDxFbW90aW9uTG9nU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPik7XHJcbiAgICBcclxuICAgIGNvbnN0IGNoaXBzID0gYXdhaXQgZmluZEFsbEJ5VGVzdElkKCdlbW90aW9uLWNoaXAnKTtcclxuICAgIGZpcmVFdmVudC5wcmVzcyhjaGlwc1swXSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGF3YWl0IGZpbmRCeVRlc3RJZCgnZW1vdGlvbi1zdWJtaXQtYnV0dG9uJyk7XHJcbiAgICBleHBlY3Qoc3VibWl0QnV0dG9uLnByb3BzLmRpc2FibGVkKS50b0JlRmFsc3koKTtcclxuICAgIFxyXG4gICAgZmlyZUV2ZW50LnByZXNzKGNoaXBzWzBdKTtcclxuICAgIFxyXG4gICAgLy8gRE9NIOyXheuNsOydtO2KuOulvCDquLDri6TrprxcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xyXG4gICAgXHJcbiAgICBleHBlY3Qoc3VibWl0QnV0dG9uLnByb3BzLmRpc2FibGVkKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcbn0pOyJdLCJtYXBwaW5ncyI6IkFBS0FBLFdBQUEsR0FBS0MsSUFB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