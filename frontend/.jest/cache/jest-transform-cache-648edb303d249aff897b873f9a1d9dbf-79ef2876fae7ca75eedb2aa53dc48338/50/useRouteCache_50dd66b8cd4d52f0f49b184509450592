a9499f9533c987c962c87c523e65deb6
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CHILD_STATE = void 0;
exports.useRouteCache = useRouteCache;
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var React = _interopRequireWildcard(require("react"));
var _isRecordEqual = require("./isRecordEqual.js");
var _excluded = ["state"];
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
var CHILD_STATE = exports.CHILD_STATE = Symbol('CHILD_STATE');
function useRouteCache(routes) {
  var cache = React.useMemo(function () {
    return {
      current: new Map()
    };
  }, []);
  if (process.env.NODE_ENV === 'production') {
    return routes;
  }
  cache.current = routes.reduce(function (acc, route) {
    var previous = cache.current.get(route.key);
    var state = route.state,
      routeWithoutState = (0, _objectWithoutProperties2.default)(route, _excluded);
    var proxy;
    if (previous && (0, _isRecordEqual.isRecordEqual)(previous, routeWithoutState)) {
      proxy = previous;
    } else {
      proxy = routeWithoutState;
    }
    if (process.env.NODE_ENV !== 'production') {
      for (var key in proxy) {
        var value = proxy[key];
        Object.defineProperty(proxy, key, {
          enumerable: true,
          configurable: true,
          writable: false,
          value: value
        });
      }
    }
    Object.defineProperty(proxy, CHILD_STATE, {
      enumerable: false,
      configurable: true,
      value: state
    });
    acc.set(route.key, proxy);
    return acc;
  }, new Map());
  return Array.from(cache.current.values());
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9pc1JlY29yZEVxdWFsIiwiX2V4Y2x1ZGVkIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiQ0hJTERfU1RBVEUiLCJleHBvcnRzIiwiU3ltYm9sIiwidXNlUm91dGVDYWNoZSIsInJvdXRlcyIsImNhY2hlIiwidXNlTWVtbyIsImN1cnJlbnQiLCJNYXAiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJyZWR1Y2UiLCJhY2MiLCJyb3V0ZSIsInByZXZpb3VzIiwia2V5Iiwic3RhdGUiLCJyb3V0ZVdpdGhvdXRTdGF0ZSIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJwcm94eSIsImlzUmVjb3JkRXF1YWwiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91c2VSb3V0ZUNhY2hlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6W251bGxdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ0EsSUFBQUEsS0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQStDLElBQUFFLFNBQUE7QUFBQSxTQUFBQyx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENB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