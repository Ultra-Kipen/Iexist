{"version":3,"names":["_react","require","_client","_interopRequireDefault","useAPI","url","method","arguments","length","undefined","options","_useState","useState","data","loading","error","_useState2","_slicedToArray2","default","state","setState","execute","useCallback","_ref","_asyncToGenerator2","payload","prev","Object","assign","response","client","get","params","post","put","delete","Error","responseData","onSuccess","errorObj","onError","_x","apply","reset","_default","exports"],"sources":["useAPI.ts"],"sourcesContent":["// hooks/useAPI.ts\r\nimport { useState, useCallback } from 'react';\r\nimport client from '../services/api/client';\r\n\r\ninterface UseAPIOptions {\r\n  onSuccess?: (data: any) => void;\r\n  onError?: (error: Error) => void;\r\n  immediate?: boolean;\r\n}\r\n\r\ninterface APIState<T> {\r\n  data: T | null;\r\n  loading: boolean;\r\n  error: Error | null;\r\n}\r\n\r\nexport function useAPI<T = any, P = any>(\r\n  url: string,\r\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE' = 'GET',\r\n  options?: UseAPIOptions\r\n) {\r\n  const [state, setState] = useState<APIState<T>>({\r\n    data: null,\r\n    loading: false,\r\n    error: null,\r\n  });\r\n  \r\n  const execute = useCallback(async (payload?: P) => {\r\n    setState(prev => ({ ...prev, loading: true, error: null }));\r\n    \r\n    try {\r\n      let response;\r\n      \r\n      switch (method) {\r\n        case 'GET':\r\n          // GET 메서드의 경우 파라미터를 명시적으로 전달\r\n          response = await client.get<T>(url, { params: payload });\r\n          break;\r\n        case 'POST':\r\n          response = await client.post<T>(url, payload);\r\n          break;\r\n        case 'PUT':\r\n          response = await client.put<T>(url, payload);\r\n          break;\r\n        case 'DELETE':\r\n          response = await client.delete<T>(url, { params: payload });\r\n          break;\r\n        default:\r\n          throw new Error(`지원되지 않는 메서드: ${method}`);\r\n      }\r\n      \r\n      const responseData = (response as any).data || response;\r\n      \r\n      setState({\r\n        data: responseData,\r\n        loading: false,\r\n        error: null,\r\n      });\r\n      \r\n      options?.onSuccess?.(responseData);\r\n      \r\n      return responseData;\r\n    } catch (error) {\r\n      const errorObj = error instanceof Error \r\n        ? error \r\n        : new Error('알 수 없는 오류가 발생했습니다');\r\n      \r\n      setState({\r\n        data: null,\r\n        loading: false,\r\n        error: errorObj,\r\n      });\r\n      \r\n      options?.onError?.(errorObj);\r\n      \r\n      throw errorObj;\r\n    }\r\n  }, [url, method, options]);\r\n  \r\n  const reset = useCallback(() => {\r\n    setState({\r\n      data: null,\r\n      loading: false,\r\n      error: null,\r\n    });\r\n  }, []);\r\n  \r\n  return {\r\n    ...state,\r\n    execute,\r\n    reset,\r\n  };\r\n}\r\n\r\nexport default useAPI;"],"mappings":"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","ignoreList":[]}