118bb2af8341404f71ed24c295a7c91c
_getJestObj().mock("../../../src/services/api/client", function () {
  return {
    get: jest.fn(),
    post: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _emotionService = _interopRequireDefault(require("../../../src/services/api/emotionService"));
var _client = _interopRequireDefault(require("../../../src/services/api/client"));
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('Emotion Service Integration Tests', function () {
  beforeEach(function () {
    jest.clearAllMocks();
  });
  describe('getAllEmotions and recordEmotions integration', function () {
    it('should fetch emotions and then record them', (0, _asyncToGenerator2.default)(function* () {
      var mockEmotions = {
        status: 'success',
        data: [{
          emotion_id: 1,
          name: '행복',
          icon: 'emoticon-happy-outline',
          color: '#FFD700'
        }, {
          emotion_id: 2,
          name: '슬픔',
          icon: 'emoticon-sad-outline',
          color: '#4682B4'
        }]
      };
      _client.default.get.mockResolvedValueOnce({
        data: mockEmotions
      });
      var mockRecordResponse = {
        status: 'success',
        data: {
          log_id: 123,
          emotion_ids: [1],
          created_at: '2025-04-09T10:00:00Z'
        }
      };
      _client.default.post.mockResolvedValueOnce({
        data: mockRecordResponse
      });
      var emotionsResult = yield _emotionService.default.getAllEmotions();
      var emotionData = {
        emotion_ids: [emotionsResult.data.data[0].emotion_id]
      };
      var recordResult = yield _emotionService.default.recordEmotions(emotionData);
      expect(_client.default.get).toHaveBeenCalledWith('/emotions');
      expect(_client.default.post).toHaveBeenCalledWith('/emotions', emotionData);
      expect(emotionsResult.data).toEqual(mockEmotions);
      expect(recordResult.data).toEqual(mockRecordResponse);
    }));
  });
  describe('getEmotionStats and getEmotionTrends integration', function () {
    it('should fetch both stats and trends for the same period', (0, _asyncToGenerator2.default)(function* () {
      var params = {
        start_date: '2025-03-01',
        end_date: '2025-03-31'
      };
      var mockStats = {
        status: 'success',
        data: {
          total_logs: 20,
          emotions: [{
            emotion_id: 1,
            name: '행복',
            count: 12
          }, {
            emotion_id: 2,
            name: '슬픔',
            count: 8
          }]
        }
      };
      _client.default.get.mockResolvedValueOnce({
        data: mockStats
      });
      var mockTrends = {
        status: 'success',
        data: {
          trends: [{
            date: '2025-03-01',
            emotions: [{
              emotion_id: 1,
              count: 1
            }]
          }, {
            date: '2025-03-15',
            emotions: [{
              emotion_id: 2,
              count: 1
            }]
          }, {
            date: '2025-03-30',
            emotions: [{
              emotion_id: 1,
              count: 1
            }]
          }]
        }
      };
      _client.default.get.mockResolvedValueOnce({
        data: mockTrends
      });
      var statsResult = yield _emotionService.default.getEmotionStats(params);
      var trendsResult = yield _emotionService.default.getEmotionTrends(Object.assign({}, params, {
        type: 'day'
      }));
      expect(_client.default.get).toHaveBeenNthCalledWith(1, '/emotions/stats', {
        params: params
      });
      expect(_client.default.get).toHaveBeenNthCalledWith(2, '/stats/trends', {
        params: Object.assign({}, params, {
          type: 'day'
        })
      });
      expect(statsResult.data).toEqual(mockStats);
      expect(trendsResult.data).toEqual(mockTrends);
    }));
  });
  describe('getDailyEmotionCheck and recordEmotions integration', function () {
    it('should check daily status and record emotions if not checked yet', (0, _asyncToGenerator2.default)(function* () {
      var _secondCheckResult;
      var mockCheckResponse = {
        status: 'success',
        data: {
          has_checked: false
        }
      };
      _client.default.get.mockResolvedValueOnce({
        data: mockCheckResponse
      });
      var mockRecordResponse = {
        status: 'success',
        data: {
          log_id: 123,
          emotion_ids: [1, 2],
          note: '오늘 감정 기록',
          created_at: '2025-04-09T10:00:00Z'
        }
      };
      _client.default.post.mockResolvedValueOnce({
        data: mockRecordResponse
      });
      var mockCheckAfterResponse = {
        status: 'success',
        data: {
          has_checked: true,
          last_check: '2025-04-09T10:00:00Z',
          emotions: [{
            emotion_id: 1,
            name: '행복'
          }, {
            emotion_id: 2,
            name: '슬픔'
          }]
        }
      };
      _client.default.get.mockResolvedValueOnce({
        data: mockCheckAfterResponse
      });
      var checkResult = yield _emotionService.default.getDailyEmotionCheck();
      var secondCheckResult = null;
      if (!checkResult.data.data.has_checked) {
        var emotionData = {
          emotion_ids: [1, 2],
          note: '오늘 감정 기록'
        };
        yield _emotionService.default.recordEmotions(emotionData);
        secondCheckResult = yield _emotionService.default.getDailyEmotionCheck();
      }
      expect(_client.default.get).toHaveBeenNthCalledWith(1, '/emotions/daily-check');
      expect(_client.default.post).toHaveBeenCalledWith('/emotions', {
        emotion_ids: [1, 2],
        note: '오늘 감정 기록'
      });
      expect(_client.default.get).toHaveBeenNthCalledWith(2, '/emotions/daily-check');
      expect(checkResult.data).toEqual(mockCheckResponse);
      expect((_secondCheckResult = secondCheckResult) == null ? void 0 : _secondCheckResult.data).toEqual(mockCheckAfterResponse);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXQiLCJqZXN0IiwiZm4iLCJwb3N0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfZW1vdGlvblNlcnZpY2UiLCJfY2xpZW50IiwiX3JlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJkZWZhdWx0IiwibW9ja0Vtb3Rpb25zIiwic3RhdHVzIiwiZGF0YSIsImVtb3Rpb25faWQiLCJuYW1lIiwiaWNvbiIsImNvbG9yIiwiYXBpQ2xpZW50IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwibW9ja1JlY29yZFJlc3BvbnNlIiwibG9nX2lkIiwiZW1vdGlvbl9pZHMiLCJjcmVhdGVkX2F0IiwiZW1vdGlvbnNSZXN1bHQiLCJlbW90aW9uU2VydmljZSIsImdldEFsbEVtb3Rpb25zIiwiZW1vdGlvbkRhdGEiLCJyZWNvcmRSZXN1bHQiLCJyZWNvcmRFbW90aW9ucyIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidG9FcXVhbCIsInBhcmFtcyIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsIm1vY2tTdGF0cyIsInRvdGFsX2xvZ3MiLCJlbW90aW9ucyIsImNvdW50IiwibW9ja1RyZW5kcyIsInRyZW5kcyIsImRhdGUiLCJzdGF0c1Jlc3VsdCIsImdldEVtb3Rpb25TdGF0cyIsInRyZW5kc1Jlc3VsdCIsImdldEVtb3Rpb25UcmVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0eXBlIiwidG9IYXZlQmVlbk50aENhbGxlZFdpdGgiLCJfc2Vjb25kQ2hlY2tSZXN1bHQiLCJtb2NrQ2hlY2tSZXNwb25zZSIsImhhc19jaGVja2VkIiwibm90ZSIsIm1vY2tDaGVja0FmdGVyUmVzcG9uc2UiLCJsYXN0X2NoZWNrIiwiY2hlY2tSZXN1bHQiLCJnZXREYWlseUVtb3Rpb25DaGVjayIsInNlY29uZENoZWNrUmVzdWx0Il0sInNvdXJjZXMiOlsiZW1vdGlvblNlcnZpY2UuaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBfX3Rlc3RzX18vaW50ZWdyYXRpb24vc2VydmljZXMvZW1vdGlvblNlcnZpY2UuaW50ZWdyYXRpb24udGVzdC50c1xyXG5cclxuaW1wb3J0IGVtb3Rpb25TZXJ2aWNlLCB7IEVtb3Rpb25DcmVhdGVEVE8gfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvYXBpL2Vtb3Rpb25TZXJ2aWNlJztcclxuaW1wb3J0IGFwaUNsaWVudCBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvYXBpL2NsaWVudCc7XHJcblxyXG4vLyBhcGlDbGllbnQg66qo7YK5XHJcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2FwaS9jbGllbnQnLCAoKSA9PiAoe1xyXG4gIGdldDogamVzdC5mbigpLFxyXG4gIHBvc3Q6IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG5kZXNjcmliZSgnRW1vdGlvbiBTZXJ2aWNlIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gIC8vIOqwgSDthYzsiqTtirgg7KCE7JeQIOuqqO2CuSDstIjquLDtmZRcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0QWxsRW1vdGlvbnMgYW5kIHJlY29yZEVtb3Rpb25zIGludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBlbW90aW9ucyBhbmQgdGhlbiByZWNvcmQgdGhlbScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gZ2V0QWxsRW1vdGlvbnMg66qo7J2YIOydkeuLtSDshKTsoJVcclxuICAgICAgY29uc3QgbW9ja0Vtb3Rpb25zID0ge1xyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgIHsgZW1vdGlvbl9pZDogMSwgbmFtZTogJ+2WieuztScsIGljb246ICdlbW90aWNvbi1oYXBweS1vdXRsaW5lJywgY29sb3I6ICcjRkZENzAwJyB9LFxyXG4gICAgICAgICAgeyBlbW90aW9uX2lkOiAyLCBuYW1lOiAn7Iqs7ZSUJywgaWNvbjogJ2Vtb3RpY29uLXNhZC1vdXRsaW5lJywgY29sb3I6ICcjNDY4MkI0JyB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgKGFwaUNsaWVudC5nZXQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiBtb2NrRW1vdGlvbnMgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyByZWNvcmRFbW90aW9ucyDrqqjsnZgg7J2R64u1IOyEpOyglVxyXG4gICAgICBjb25zdCBtb2NrUmVjb3JkUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgbG9nX2lkOiAxMjMsXHJcbiAgICAgICAgICBlbW90aW9uX2lkczogWzFdLFxyXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDQtMDlUMTA6MDA6MDBaJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIChhcGlDbGllbnQucG9zdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IG1vY2tSZWNvcmRSZXNwb25zZSB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIO2FjOyKpO2KuCDsi6TtlokgLSDrqLzsoIAg6rCQ7KCVIOuqqeuhnSDqsIDsoLjsmKTquLBcclxuICAgICAgY29uc3QgZW1vdGlvbnNSZXN1bHQgPSBhd2FpdCBlbW90aW9uU2VydmljZS5nZXRBbGxFbW90aW9ucygpO1xyXG4gICAgICBcclxuICAgICAgLy8g7LKrIOuyiOynuCDqsJDsoJUg7ISg7YOd7ZWY7JesIOq4sOuhnVxyXG4gICAgICBjb25zdCBlbW90aW9uRGF0YTogRW1vdGlvbkNyZWF0ZURUTyA9IHtcclxuICAgICAgICBlbW90aW9uX2lkczogW2Vtb3Rpb25zUmVzdWx0LmRhdGEuZGF0YVswXS5lbW90aW9uX2lkXVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVjb3JkUmVzdWx0ID0gYXdhaXQgZW1vdGlvblNlcnZpY2UucmVjb3JkRW1vdGlvbnMoZW1vdGlvbkRhdGEpO1xyXG4gICAgICBcclxuICAgICAgLy8g6rKA7KadXHJcbiAgICAgIGV4cGVjdChhcGlDbGllbnQuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2Vtb3Rpb25zJyk7XHJcbiAgICAgIGV4cGVjdChhcGlDbGllbnQucG9zdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9lbW90aW9ucycsIGVtb3Rpb25EYXRhKTtcclxuICAgICAgZXhwZWN0KGVtb3Rpb25zUmVzdWx0LmRhdGEpLnRvRXF1YWwobW9ja0Vtb3Rpb25zKTtcclxuICAgICAgZXhwZWN0KHJlY29yZFJlc3VsdC5kYXRhKS50b0VxdWFsKG1vY2tSZWNvcmRSZXNwb25zZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldEVtb3Rpb25TdGF0cyBhbmQgZ2V0RW1vdGlvblRyZW5kcyBpbnRlZ3JhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZmV0Y2ggYm90aCBzdGF0cyBhbmQgdHJlbmRzIGZvciB0aGUgc2FtZSBwZXJpb2QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOuCoOynnCDtjIzrnbzrr7jthLAg7ISk7KCVXHJcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBzdGFydF9kYXRlOiAnMjAyNS0wMy0wMScsXHJcbiAgICAgICAgZW5kX2RhdGU6ICcyMDI1LTAzLTMxJ1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgLy8gZ2V0RW1vdGlvblN0YXRzIOuqqOydmCDsnZHri7Ug7ISk7KCVXHJcbiAgICAgIGNvbnN0IG1vY2tTdGF0cyA9IHtcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB0b3RhbF9sb2dzOiAyMCxcclxuICAgICAgICAgIGVtb3Rpb25zOiBbXHJcbiAgICAgICAgICAgIHsgZW1vdGlvbl9pZDogMSwgbmFtZTogJ+2WieuztScsIGNvdW50OiAxMiB9LFxyXG4gICAgICAgICAgICB7IGVtb3Rpb25faWQ6IDIsIG5hbWU6ICfsiqztlJQnLCBjb3VudDogOCB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgKGFwaUNsaWVudC5nZXQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiBtb2NrU3RhdHMgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBnZXRFbW90aW9uVHJlbmRzIOuqqOydmCDsnZHri7Ug7ISk7KCVXHJcbiAgICAgIGNvbnN0IG1vY2tUcmVuZHMgPSB7XHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgdHJlbmRzOiBbXHJcbiAgICAgICAgICAgIHsgZGF0ZTogJzIwMjUtMDMtMDEnLCBlbW90aW9uczogW3sgZW1vdGlvbl9pZDogMSwgY291bnQ6IDEgfV0gfSxcclxuICAgICAgICAgICAgeyBkYXRlOiAnMjAyNS0wMy0xNScsIGVtb3Rpb25zOiBbeyBlbW90aW9uX2lkOiAyLCBjb3VudDogMSB9XSB9LFxyXG4gICAgICAgICAgICB7IGRhdGU6ICcyMDI1LTAzLTMwJywgZW1vdGlvbnM6IFt7IGVtb3Rpb25faWQ6IDEsIGNvdW50OiAxIH1dIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAoYXBpQ2xpZW50LmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IG1vY2tUcmVuZHMgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDthYzsiqTtirgg7Iuk7ZaJXHJcbiAgICAgIGNvbnN0IHN0YXRzUmVzdWx0ID0gYXdhaXQgZW1vdGlvblNlcnZpY2UuZ2V0RW1vdGlvblN0YXRzKHBhcmFtcyk7XHJcbiAgICAgIGNvbnN0IHRyZW5kc1Jlc3VsdCA9IGF3YWl0IGVtb3Rpb25TZXJ2aWNlLmdldEVtb3Rpb25UcmVuZHMoe1xyXG4gICAgICAgIC4uLnBhcmFtcyxcclxuICAgICAgICB0eXBlOiAnZGF5J1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIOqygOymnVxyXG4gICAgICBleHBlY3QoYXBpQ2xpZW50LmdldCkudG9IYXZlQmVlbk50aENhbGxlZFdpdGgoMSwgJy9lbW90aW9ucy9zdGF0cycsIHsgcGFyYW1zIH0pO1xyXG4gICAgICBleHBlY3QoYXBpQ2xpZW50LmdldCkudG9IYXZlQmVlbk50aENhbGxlZFdpdGgoMiwgJy9zdGF0cy90cmVuZHMnLCB7IFxyXG4gICAgICAgIHBhcmFtczogeyAuLi5wYXJhbXMsIHR5cGU6ICdkYXknIH0gXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN0YXRzUmVzdWx0LmRhdGEpLnRvRXF1YWwobW9ja1N0YXRzKTtcclxuICAgICAgZXhwZWN0KHRyZW5kc1Jlc3VsdC5kYXRhKS50b0VxdWFsKG1vY2tUcmVuZHMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXREYWlseUVtb3Rpb25DaGVjayBhbmQgcmVjb3JkRW1vdGlvbnMgaW50ZWdyYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNoZWNrIGRhaWx5IHN0YXR1cyBhbmQgcmVjb3JkIGVtb3Rpb25zIGlmIG5vdCBjaGVja2VkIHlldCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gZ2V0RGFpbHlFbW90aW9uQ2hlY2sg66qo7J2YIOydkeuLtSDshKTsoJUgLSDslYTsp4Eg7LK07YGs7ZWY7KeAIOyViuydjFxyXG4gICAgICBjb25zdCBtb2NrQ2hlY2tSZXNwb25zZSA9IHtcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBoYXNfY2hlY2tlZDogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAoYXBpQ2xpZW50LmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IG1vY2tDaGVja1Jlc3BvbnNlIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gcmVjb3JkRW1vdGlvbnMg66qo7J2YIOydkeuLtSDshKTsoJVcclxuICAgICAgY29uc3QgbW9ja1JlY29yZFJlc3BvbnNlID0ge1xyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGxvZ19pZDogMTIzLFxyXG4gICAgICAgICAgZW1vdGlvbl9pZHM6IFsxLCAyXSxcclxuICAgICAgICAgIG5vdGU6ICfsmKTripgg6rCQ7KCVIOq4sOuhnScsXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wNC0wOVQxMDowMDowMFonXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgKGFwaUNsaWVudC5wb3N0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZGF0YTogbW9ja1JlY29yZFJlc3BvbnNlIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gZ2V0RGFpbHlFbW90aW9uQ2hlY2sg66qo7J2YIOydkeuLtSDshKTsoJUgLSDrkZAg67KI7Ke4IO2YuOy2nCAo7LK07YGsIO2bhClcclxuICAgICAgY29uc3QgbW9ja0NoZWNrQWZ0ZXJSZXNwb25zZSA9IHtcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBoYXNfY2hlY2tlZDogdHJ1ZSxcclxuICAgICAgICAgIGxhc3RfY2hlY2s6ICcyMDI1LTA0LTA5VDEwOjAwOjAwWicsXHJcbiAgICAgICAgICBlbW90aW9uczogW1xyXG4gICAgICAgICAgICB7IGVtb3Rpb25faWQ6IDEsIG5hbWU6ICftlonrs7UnIH0sXHJcbiAgICAgICAgICAgIHsgZW1vdGlvbl9pZDogMiwgbmFtZTogJ+yKrO2UlCcgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIChhcGlDbGllbnQuZ2V0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZGF0YTogbW9ja0NoZWNrQWZ0ZXJSZXNwb25zZSB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIO2FjOyKpO2KuCDsi6TtlokgLSDrqLzsoIAg7Jik64qYIOydtOuvuCDssrTtgaztlojripTsp4Ag7ZmV7J24XHJcbiAgICAgIGNvbnN0IGNoZWNrUmVzdWx0ID0gYXdhaXQgZW1vdGlvblNlcnZpY2UuZ2V0RGFpbHlFbW90aW9uQ2hlY2soKTtcclxuICAgICAgXHJcbiAgICAgIC8vIOyytO2BrO2VmOyngCDslYrslZjri6TrqbQg6rCQ7KCVIOq4sOuhnVxyXG4gICAgICBsZXQgc2Vjb25kQ2hlY2tSZXN1bHQgPSBudWxsO1xyXG4gICAgICBpZiAoIWNoZWNrUmVzdWx0LmRhdGEuZGF0YS5oYXNfY2hlY2tlZCkge1xyXG4gICAgICAgIGNvbnN0IGVtb3Rpb25EYXRhOiBFbW90aW9uQ3JlYXRlRFRPID0ge1xyXG4gICAgICAgICAgZW1vdGlvbl9pZHM6IFsxLCAyXSxcclxuICAgICAgICAgIG5vdGU6ICfsmKTripgg6rCQ7KCVIOq4sOuhnSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IGVtb3Rpb25TZXJ2aWNlLnJlY29yZEVtb3Rpb25zKGVtb3Rpb25EYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDquLDroZ0g7ZuEIOuLpOyLnCDssrTtgawg7IOB7YOcIO2ZleyduFxyXG4gICAgICAgIHNlY29uZENoZWNrUmVzdWx0ID0gYXdhaXQgZW1vdGlvblNlcnZpY2UuZ2V0RGFpbHlFbW90aW9uQ2hlY2soKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g6rKA7KadXHJcbiAgICAgIGV4cGVjdChhcGlDbGllbnQuZ2V0KS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgxLCAnL2Vtb3Rpb25zL2RhaWx5LWNoZWNrJyk7XHJcbiAgICAgIGV4cGVjdChhcGlDbGllbnQucG9zdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9lbW90aW9ucycsIHtcclxuICAgICAgICBlbW90aW9uX2lkczogWzEsIDJdLFxyXG4gICAgICAgIG5vdGU6ICfsmKTripgg6rCQ7KCVIOq4sOuhnSdcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChhcGlDbGllbnQuZ2V0KS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgyLCAnL2Vtb3Rpb25zL2RhaWx5LWNoZWNrJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY2hlY2tSZXN1bHQuZGF0YSkudG9FcXVhbChtb2NrQ2hlY2tSZXNwb25zZSk7XHJcbiAgICAgIGV4cGVjdChzZWNvbmRDaGVja1Jlc3VsdD8uZGF0YSkudG9FcXVhbChtb2NrQ2hlY2tBZnRlclJlc3BvbnNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiJBQU1BQSxXQUFBLEdBQUtDLElBQUkscUNBQXFDO0VBQUEsT0FBTztJQUNuREMsR0FBRyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2RDLElBQUksRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUM7RUFDaEIsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUFDLElBQUFFLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxrQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBUEosSUFBQUUsZUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQXlE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