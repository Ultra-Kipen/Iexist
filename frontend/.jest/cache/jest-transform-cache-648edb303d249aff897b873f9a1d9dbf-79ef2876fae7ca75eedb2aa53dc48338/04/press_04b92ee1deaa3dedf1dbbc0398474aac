11b4cbff2c00bced27b4c0aea1a5ce08
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault2(require("@babel/runtime/helpers/asyncToGenerator"));
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DEFAULT_MIN_PRESS_DURATION = exports.DEFAULT_LONG_PRESS_DELAY_MS = void 0;
exports.longPress = longPress;
exports.press = press;
var _act = _interopRequireDefault(require("../../act"));
var _eventHandler = require("../../event-handler");
var _componentTree = require("../../helpers/component-tree");
var _errors = require("../../helpers/errors");
var _hostComponentNames = require("../../helpers/host-component-names");
var _pointerEvents = require("../../helpers/pointer-events");
var _eventBuilder = require("../event-builder");
var _utils = require("../utils");
function _interopRequireDefault(e) {
  return e && e.__esModule ? e : {
    default: e
  };
}
var DEFAULT_MIN_PRESS_DURATION = exports.DEFAULT_MIN_PRESS_DURATION = 130;
var DEFAULT_LONG_PRESS_DELAY_MS = exports.DEFAULT_LONG_PRESS_DELAY_MS = 500;
function press(_x) {
  return _press.apply(this, arguments);
}
function _press() {
  _press = (0, _asyncToGenerator2.default)(function* (element) {
    if (!(0, _componentTree.isHostElement)(element)) {
      throw new _errors.ErrorWithStack(`press() works only with host elements. Passed element has type "${element.type}".`, press);
    }
    yield _basePress(this.config, element, {
      type: 'press'
    });
  });
  return _press.apply(this, arguments);
}
function longPress(_x2, _x3) {
  return _longPress.apply(this, arguments);
}
function _longPress() {
  _longPress = (0, _asyncToGenerator2.default)(function* (element, options) {
    var _options$duration;
    if (!(0, _componentTree.isHostElement)(element)) {
      throw new _errors.ErrorWithStack(`longPress() works only with host elements. Passed element has type "${element.type}".`, longPress);
    }
    yield _basePress(this.config, element, {
      type: 'longPress',
      duration: (_options$duration = options == null ? void 0 : options.duration) != null ? _options$duration : DEFAULT_LONG_PRESS_DELAY_MS
    });
  });
  return _longPress.apply(this, arguments);
}
var _basePress = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* (config, element, options) {
    if (isEnabledHostElement(element) && hasPressEventHandler(element)) {
      yield emitDirectPressEvents(config, element, options);
      return;
    }
    if (isEnabledTouchResponder(element)) {
      yield emitPressabilityPressEvents(config, element, options);
      return;
    }
    var hostParentElement = (0, _componentTree.getHostParent)(element);
    if (!hostParentElement) {
      return;
    }
    yield _basePress(config, hostParentElement, options);
  });
  return function basePress(_x4, _x5, _x6) {
    return _ref.apply(this, arguments);
  };
}();
function isEnabledHostElement(element) {
  if (!(0, _pointerEvents.isPointerEventEnabled)(element)) {
    return false;
  }
  if ((0, _hostComponentNames.isHostText)(element)) {
    return element.props.disabled !== true;
  }
  if ((0, _hostComponentNames.isHostTextInput)(element)) {
    return element.props.editable !== false;
  }
  return true;
}
function isEnabledTouchResponder(element) {
  return (0, _pointerEvents.isPointerEventEnabled)(element) && (element.props.onStartShouldSetResponder == null ? void 0 : element.props.onStartShouldSetResponder());
}
function hasPressEventHandler(element) {
  return (0, _eventHandler.getEventHandler)(element, 'press') || (0, _eventHandler.getEventHandler)(element, 'longPress') || (0, _eventHandler.getEventHandler)(element, 'pressIn') || (0, _eventHandler.getEventHandler)(element, 'pressOut');
}
function emitDirectPressEvents(_x7, _x8, _x9) {
  return _emitDirectPressEvents.apply(this, arguments);
}
function _emitDirectPressEvents() {
  _emitDirectPressEvents = (0, _asyncToGenerator2.default)(function* (config, element, options) {
    yield (0, _utils.wait)(config);
    (0, _utils.dispatchEvent)(element, 'pressIn', _eventBuilder.EventBuilder.Common.touch());
    yield (0, _utils.wait)(config, options.duration);
    if (options.type === 'longPress') {
      (0, _utils.dispatchEvent)(element, 'longPress', _eventBuilder.EventBuilder.Common.touch());
    }
    (0, _utils.dispatchEvent)(element, 'pressOut', _eventBuilder.EventBuilder.Common.touch());
    if (options.type === 'press') {
      (0, _utils.dispatchEvent)(element, 'press', _eventBuilder.EventBuilder.Common.touch());
    }
  });
  return _emitDirectPressEvents.apply(this, arguments);
}
function emitPressabilityPressEvents(_x10, _x11, _x12) {
  return _emitPressabilityPressEvents.apply(this, arguments);
}
function _emitPressabilityPressEvents() {
  _emitPressabilityPressEvents = (0, _asyncToGenerator2.default)(function* (config, element, options) {
    var _options$duration2;
    yield (0, _utils.wait)(config);
    (0, _utils.dispatchEvent)(element, 'responderGrant', _eventBuilder.EventBuilder.Common.responderGrant());
    var duration = (_options$duration2 = options.duration) != null ? _options$duration2 : DEFAULT_MIN_PRESS_DURATION;
    yield (0, _utils.wait)(config, duration);
    (0, _utils.dispatchEvent)(element, 'responderRelease', _eventBuilder.EventBuilder.Common.responderRelease());
    if (DEFAULT_MIN_PRESS_DURATION - duration > 0) {
      yield (0, _act.default)(function () {
        return (0, _utils.wait)(config, DEFAULT_MIN_PRESS_DURATION - duration);
      });
    }
  });
  return _emitPressabilityPressEvents.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYWN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZXZlbnRIYW5kbGVyIiwiX2NvbXBvbmVudFRyZWUiLCJfZXJyb3JzIiwiX2hvc3RDb21wb25lbnROYW1lcyIsIl9wb2ludGVyRXZlbnRzIiwiX2V2ZW50QnVpbGRlciIsIl91dGlscyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkRFRkFVTFRfTUlOX1BSRVNTX0RVUkFUSU9OIiwiZXhwb3J0cyIsIkRFRkFVTFRfTE9OR19QUkVTU19ERUxBWV9NUyIsInByZXNzIiwiX3giLCJfcHJlc3MiLCJhcHBseSIsImFyZ3VtZW50cyIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImVsZW1lbnQiLCJpc0hvc3RFbGVtZW50IiwiRXJyb3JXaXRoU3RhY2siLCJ0eXBlIiwiYmFzZVByZXNzIiwiY29uZmlnIiwibG9uZ1ByZXNzIiwiX3gyIiwiX3gzIiwiX2xvbmdQcmVzcyIsIm9wdGlvbnMiLCJfb3B0aW9ucyRkdXJhdGlvbiIsImR1cmF0aW9uIiwiX3JlZiIsImlzRW5hYmxlZEhvc3RFbGVtZW50IiwiaGFzUHJlc3NFdmVudEhhbmRsZXIiLCJlbWl0RGlyZWN0UHJlc3NFdmVudHMiLCJpc0VuYWJsZWRUb3VjaFJlc3BvbmRlciIsImVtaXRQcmVzc2FiaWxpdHlQcmVzc0V2ZW50cyIsImhvc3RQYXJlbnRFbGVtZW50IiwiZ2V0SG9zdFBhcmVudCIsIl94NCIsIl94NSIsIl94NiIsImlzUG9pbnRlckV2ZW50RW5hYmxlZCIsImlzSG9zdFRleHQiLCJwcm9wcyIsImRpc2FibGVkIiwiaXNIb3N0VGV4dElucHV0IiwiZWRpdGFibGUiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwiZ2V0RXZlbnRIYW5kbGVyIiwiX3g3IiwiX3g4IiwiX3g5IiwiX2VtaXREaXJlY3RQcmVzc0V2ZW50cyIsIndhaXQiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnRCdWlsZGVyIiwiQ29tbW9uIiwidG91Y2giLCJfeDEwIiwiX3gxMSIsIl94MTIiLCJfZW1pdFByZXNzYWJpbGl0eVByZXNzRXZlbnRzIiwiX29wdGlvbnMkZHVyYXRpb24yIiwicmVzcG9uZGVyR3JhbnQiLCJyZXNwb25kZXJSZWxlYXNlIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3VzZXItZXZlbnQvcHJlc3MvcHJlc3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBSZWFjdFRlc3RJbnN0YW5jZSB9IGZyb20gJ3JlYWN0LXRlc3QtcmVuZGVyZXInO1xuXG5pbXBvcnQgYWN0IGZyb20gJy4uLy4uL2FjdCc7XG5pbXBvcnQgeyBnZXRFdmVudEhhbmRsZXIgfSBmcm9tICcuLi8uLi9ldmVudC1oYW5kbGVyJztcbmltcG9ydCB0eXBlIHsgSG9zdFRlc3RJbnN0YW5jZSB9IGZyb20gJy4uLy4uL2hlbHBlcnMvY29tcG9uZW50LXRyZWUnO1xuaW1wb3J0IHsgZ2V0SG9zdFBhcmVudCwgaXNIb3N0RWxlbWVudCB9IGZyb20gJy4uLy4uL2hlbHBlcnMvY29tcG9uZW50LXRyZWUnO1xuaW1wb3J0IHsgRXJyb3JXaXRoU3RhY2sgfSBmcm9tICcuLi8uLi9oZWxwZXJzL2Vycm9ycyc7XG5pbXBvcnQgeyBpc0hvc3RUZXh0LCBpc0hvc3RUZXh0SW5wdXQgfSBmcm9tICcuLi8uLi9oZWxwZXJzL2hvc3QtY29tcG9uZW50LW5hbWVzJztcbmltcG9ydCB7IGlzUG9pbnRlckV2ZW50RW5hYmxlZCB9IGZyb20gJy4uLy4uL2hlbHBlcnMvcG9pbnRlci1ldmVudHMnO1xuaW1wb3J0IHsgRXZlbnRCdWlsZGVyIH0gZnJvbSAnLi4vZXZlbnQtYnVpbGRlcic7XG5pbXBvcnQgdHlwZSB7IFVzZXJFdmVudENvbmZpZywgVXNlckV2ZW50SW5zdGFuY2UgfSBmcm9tICcuLi9zZXR1cCc7XG5pbXBvcnQgeyBkaXNwYXRjaEV2ZW50LCB3YWl0IH0gZnJvbSAnLi4vdXRpbHMnO1xuXG4vLyBUaGVzZSBhcmUgY29uc3RhbnRzIGRlZmluZWQgaW4gdGhlIFJlYWN0IE5hdGl2ZSByZXBvXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvYmxvYi81MGUzOGNjOWYxZTY3MTMyMjhhOTFhZDUwZjQyNmM0ZjY1ZTY1ZTFhL3BhY2thZ2VzL3JlYWN0LW5hdGl2ZS9MaWJyYXJpZXMvUHJlc3NhYmlsaXR5L1ByZXNzYWJpbGl0eS5qcyNMMjY0XG5leHBvcnQgY29uc3QgREVGQVVMVF9NSU5fUFJFU1NfRFVSQVRJT04gPSAxMzA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9MT05HX1BSRVNTX0RFTEFZX01TID0gNTAwO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByZXNzT3B0aW9ucyB7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlc3ModGhpczogVXNlckV2ZW50SW5zdGFuY2UsIGVsZW1lbnQ6IFJlYWN0VGVzdEluc3RhbmNlKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghaXNIb3N0RWxlbWVudChlbGVtZW50KSkge1xuICAgIHRocm93IG5ldyBFcnJvcldpdGhTdGFjayhcbiAgICAgIGBwcmVzcygpIHdvcmtzIG9ubHkgd2l0aCBob3N0IGVsZW1lbnRzLiBQYXNzZWQgZWxlbWVudCBoYXMgdHlwZSBcIiR7ZWxlbWVudC50eXBlfVwiLmAsXG4gICAgICBwcmVzcyxcbiAgICApO1xuICB9XG5cbiAgYXdhaXQgYmFzZVByZXNzKHRoaXMuY29uZmlnLCBlbGVtZW50LCB7XG4gICAgdHlwZTogJ3ByZXNzJyxcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb25nUHJlc3MoXG4gIHRoaXM6IFVzZXJFdmVudEluc3RhbmNlLFxuICBlbGVtZW50OiBSZWFjdFRlc3RJbnN0YW5jZSxcbiAgb3B0aW9ucz86IFByZXNzT3B0aW9ucyxcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIWlzSG9zdEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3JXaXRoU3RhY2soXG4gICAgICBgbG9uZ1ByZXNzKCkgd29ya3Mgb25seSB3aXRoIGhvc3QgZWxlbWVudHMuIFBhc3NlZCBlbGVtZW50IGhhcyB0eXBlIFwiJHtlbGVtZW50LnR5cGV9XCIuYCxcbiAgICAgIGxvbmdQcmVzcyxcbiAgICApO1xuICB9XG5cbiAgYXdhaXQgYmFzZVByZXNzKHRoaXMuY29uZmlnLCBlbGVtZW50LCB7XG4gICAgdHlwZTogJ2xvbmdQcmVzcycsXG4gICAgZHVyYXRpb246IG9wdGlvbnM/LmR1cmF0aW9uID8/IERFRkFVTFRfTE9OR19QUkVTU19ERUxBWV9NUyxcbiAgfSk7XG59XG5cbmludGVyZmFjZSBCYXNlUHJlc3NPcHRpb25zIHtcbiAgdHlwZTogJ3ByZXNzJyB8ICdsb25nUHJlc3MnO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbn1cblxuY29uc3QgYmFzZVByZXNzID0gYXN5bmMgKFxuICBjb25maWc6IFVzZXJFdmVudENvbmZpZyxcbiAgZWxlbWVudDogSG9zdFRlc3RJbnN0YW5jZSxcbiAgb3B0aW9uczogQmFzZVByZXNzT3B0aW9ucyxcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBpZiAoaXNFbmFibGVkSG9zdEVsZW1lbnQoZWxlbWVudCkgJiYgaGFzUHJlc3NFdmVudEhhbmRsZXIoZWxlbWVudCkpIHtcbiAgICBhd2FpdCBlbWl0RGlyZWN0UHJlc3NFdmVudHMoY29uZmlnLCBlbGVtZW50LCBvcHRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNFbmFibGVkVG91Y2hSZXNwb25kZXIoZWxlbWVudCkpIHtcbiAgICBhd2FpdCBlbWl0UHJlc3NhYmlsaXR5UHJlc3NFdmVudHMoY29uZmlnLCBlbGVtZW50LCBvcHRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBob3N0UGFyZW50RWxlbWVudCA9IGdldEhvc3RQYXJlbnQoZWxlbWVudCk7XG4gIGlmICghaG9zdFBhcmVudEVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCBiYXNlUHJlc3MoY29uZmlnLCBob3N0UGFyZW50RWxlbWVudCwgb3B0aW9ucyk7XG59O1xuXG5mdW5jdGlvbiBpc0VuYWJsZWRIb3N0RWxlbWVudChlbGVtZW50OiBIb3N0VGVzdEluc3RhbmNlKSB7XG4gIGlmICghaXNQb2ludGVyRXZlbnRFbmFibGVkKGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGlzSG9zdFRleHQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gZWxlbWVudC5wcm9wcy5kaXNhYmxlZCAhPT0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChpc0hvc3RUZXh0SW5wdXQoZWxlbWVudCkpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gd29ya2Fyb3VuZCBpbmNvcnJlY3QgUmVhY3RUZXN0SW5zdGFuY2UgdHlwZVxuICAgIHJldHVybiBlbGVtZW50LnByb3BzLmVkaXRhYmxlICE9PSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc0VuYWJsZWRUb3VjaFJlc3BvbmRlcihlbGVtZW50OiBIb3N0VGVzdEluc3RhbmNlKSB7XG4gIHJldHVybiBpc1BvaW50ZXJFdmVudEVuYWJsZWQoZWxlbWVudCkgJiYgZWxlbWVudC5wcm9wcy5vblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPy4oKTtcbn1cblxuZnVuY3Rpb24gaGFzUHJlc3NFdmVudEhhbmRsZXIoZWxlbWVudDogSG9zdFRlc3RJbnN0YW5jZSkge1xuICByZXR1cm4gKFxuICAgIGdldEV2ZW50SGFuZGxlcihlbGVtZW50LCAncHJlc3MnKSB8fFxuICAgIGdldEV2ZW50SGFuZGxlcihlbGVtZW50LCAnbG9uZ1ByZXNzJykgfHxcbiAgICBnZXRFdmVudEhhbmRsZXIoZWxlbWVudCwgJ3ByZXNzSW4nKSB8fFxuICAgIGdldEV2ZW50SGFuZGxlcihlbGVtZW50LCAncHJlc3NPdXQnKVxuICApO1xufVxuXG4vKipcbiAqIERpc3BhdGNoZXMgYSBwcmVzcyBldmVudCBzZXF1ZW5jZSBmb3IgaG9zdCBlbGVtZW50cyB0aGF0IGhhdmUgYG9uUHJlc3MqYCBldmVudCBoYW5kbGVycy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW1pdERpcmVjdFByZXNzRXZlbnRzKFxuICBjb25maWc6IFVzZXJFdmVudENvbmZpZyxcbiAgZWxlbWVudDogSG9zdFRlc3RJbnN0YW5jZSxcbiAgb3B0aW9uczogQmFzZVByZXNzT3B0aW9ucyxcbikge1xuICBhd2FpdCB3YWl0KGNvbmZpZyk7XG4gIGRpc3BhdGNoRXZlbnQoZWxlbWVudCwgJ3ByZXNzSW4nLCBFdmVudEJ1aWxkZXIuQ29tbW9uLnRvdWNoKCkpO1xuXG4gIGF3YWl0IHdhaXQoY29uZmlnLCBvcHRpb25zLmR1cmF0aW9uKTtcblxuICAvLyBMb25nIHByZXNzIGV2ZW50cyBhcmUgZW1pdHRlZCBiZWZvcmUgYHByZXNzT3V0YC5cbiAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ2xvbmdQcmVzcycpIHtcbiAgICBkaXNwYXRjaEV2ZW50KGVsZW1lbnQsICdsb25nUHJlc3MnLCBFdmVudEJ1aWxkZXIuQ29tbW9uLnRvdWNoKCkpO1xuICB9XG5cbiAgZGlzcGF0Y2hFdmVudChlbGVtZW50LCAncHJlc3NPdXQnLCBFdmVudEJ1aWxkZXIuQ29tbW9uLnRvdWNoKCkpO1xuXG4gIC8vIFJlZ3VsYXIgcHJlc3MgZXZlbnRzIGFyZSBlbWl0dGVkIGFmdGVyIGBwcmVzc091dGAgYWNjb3JkaW5nIHRvIHRoZSBSZWFjdCBOYXRpdmUgZG9jcy5cbiAgLy8gU2VlOiBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3ByZXNzYWJsZSNvbnByZXNzXG4gIC8vIEV4cGVyaW1lbnRhbGx5IGZvciB2ZXJ5IHNob3J0IHByZXNzZXMgKDwgMTMwbXMpIGBwcmVzc2AgZXZlbnRzIGFyZSBhY3R1YWxseSBlbWl0dGVkIGJlZm9yZSBgb25QcmVzc091dGAsIGJ1dFxuICAvLyB3ZSB3aWxsIGlnbm9yZSB0aGF0IGFzIGluIHJlYWxpdHkgbW9zdCBwcmVzc2VkIHdvdWxkIGJlIGFib3ZlIHRoZSAxMzBtcyB0aHJlc2hvbGQuXG4gIGlmIChvcHRpb25zLnR5cGUgPT09ICdwcmVzcycpIHtcbiAgICBkaXNwYXRjaEV2ZW50KGVsZW1lbnQsICdwcmVzcycsIEV2ZW50QnVpbGRlci5Db21tb24udG91Y2goKSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZW1pdFByZXNzYWJpbGl0eVByZXNzRXZlbnRzKFxuICBjb25maWc6IFVzZXJFdmVudENvbmZpZyxcbiAgZWxlbWVudDogSG9zdFRlc3RJbnN0YW5jZSxcbiAgb3B0aW9uczogQmFzZVByZXNzT3B0aW9ucyxcbikge1xuICBhd2FpdCB3YWl0KGNvbmZpZyk7XG5cbiAgZGlzcGF0Y2hFdmVudChlbGVtZW50LCAncmVzcG9uZGVyR3JhbnQnLCBFdmVudEJ1aWxkZXIuQ29tbW9uLnJlc3BvbmRlckdyYW50KCkpO1xuXG4gIGNvbnN0IGR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbiA/PyBERUZBVUxUX01JTl9QUkVTU19EVVJBVElPTjtcbiAgYXdhaXQgd2FpdChjb25maWcsIGR1cmF0aW9uKTtcblxuICBkaXNwYXRjaEV2ZW50KGVsZW1lbnQsICdyZXNwb25kZXJSZWxlYXNlJywgRXZlbnRCdWlsZGVyLkNvbW1vbi5yZXNwb25kZXJSZWxlYXNlKCkpO1xuXG4gIC8vIFJlYWN0IE5hdGl2ZSB3aWxsIHdhaXQgZm9yIG1pbmltYWwgZGVsYXkgb2YgREVGQVVMVF9NSU5fUFJFU1NfRFVSQVRJT05cbiAgLy8gYmVmb3JlIGVtaXR0aW5nIHRoZSBgcHJlc3NPdXRgIGV2ZW50LiBXZSBuZWVkIHRvIHdhaXQgaGVyZSwgc28gdGhhdFxuICAvLyBgcHJlc3MoKWAgZnVuY3Rpb24gZG9lcyBub3QgcmV0dXJuIGJlZm9yZSB0aGF0LlxuICBpZiAoREVGQVVMVF9NSU5fUFJFU1NfRFVSQVRJT04gLSBkdXJhdGlvbiA+IDApIHtcbiAgICBhd2FpdCBhY3QoKCkgPT4gd2FpdChjb25maWcsIERFRkFVTFRfTUlOX1BSRVNTX0RVUkFUSU9OIC0gZHVyYXRpb24p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QUNDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFNL0QsSUFBSTlCLE9BQU8sQ0FBQ1AsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUM1QixJQUFBaEIsTUFBQSxDQUFBa0QsYUFBYSxFQUFDckMsT0FBTyxFQUFFLE9BQU8sRUFBRWQsYUFBQSxDQUFBb0QsWUFBWSxDQUFDQyxNQUFNLENBQUNDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDOUQ7RUFDRjtFQUFBLE9BQUFMLHNCQUFBLENBQUF0QyxLQUFBLE9BQUFDLFNBQUE7QUFBQTtBQUFBLFNBRWVvQiwyQkFBMkJBLENBQUF1QixJQUFBLEVBQUFDLElBQUEsRUFBQUMsSUFBQTtFQUFBLE9BQUFDLDRCQUFBLENBQUEvQyxLQUFBLE9BQUFDLFNBQUE7QUFBQTtBQUFBLFNBQUE4Qyw2QkFBQTtFQUFBQSw0QkFBQSxPQUFBN0Msa0JBQUEsQ0FBQVQsT0FBQSxFQUExQyxXQUNFZSxNQUF1QixFQUN2QkwsT0FBeUIsRUFDekJVLE9BQXlCLEVBQ3pCO0lBQUEsSUFBQW1DLGtCQUFBO0lBQ0EsTUFBTSxJQUFBMUQsTUFBQSxDQUFBaUQsSUFBSSxFQUFDL0IsTUFBTSxDQUFDO0lBRWxCLElBQUFsQixNQUFBLENBQUFrRCxhQUFhLEVBQUNyQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUVkLGFBQUEsQ0FBQW9ELFlBQVksQ0FBQ0MsTUFBTSxDQUFDTyxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBRTlFLElBQU1sQyxRQUFRLElBQUFpQyxrQkFBQSxHQUFHbkMsT0FBTyxDQUFDRSxRQUFRLFlBQUFpQyxrQkFBQSxHQUFJdEQsMEJBQTBCO0lBQy9ELE1BQU0sSUFBQUosTUFBQSxDQUFBaUQsSUFBSSxFQUFDL0IsTUFBTSxFQUFFTyxRQUFRLENBQUM7SUFFNUIsSUFBQXpCLE1BQUEsQ0FBQWtELGFBQWEsRUFBQ3JDLE9BQU8sRUFBRSxrQkFBa0IsRUFBRWQsYUFBQSxDQUFBb0QsWUFBWSxDQUFDQyxNQUFNLENBQUNRLGdCQUFnQixDQUFDLENBQUMsQ0FBQztJQUtsRixJQUFJeEQsMEJBQTBCLEdBQUdxQixRQUFRLEdBQUcsQ0FBQyxFQUFFO01BQzdDLE1BQU0sSUFBQWxDLElBQUEsQ0FBQVksT0FBRyxFQUFDO1FBQUEsT0FBTSxJQUFBSCxNQUFBLENBQUFpRCxJQUFJLEVBQUMvQixNQUFNLEVBQUVkLDBCQUEwQixHQUFHcUIsUUFBUSxDQUFDO01BQUEsRUFBQztJQUN0RTtFQUNGO0VBQUEsT0FBQWdDLDRCQUFBLENBQUEvQyxLQUFBLE9BQUFDLFNBQUE7QUFBQSIsImlnbm9yZUxpc3QiOltdfQ==