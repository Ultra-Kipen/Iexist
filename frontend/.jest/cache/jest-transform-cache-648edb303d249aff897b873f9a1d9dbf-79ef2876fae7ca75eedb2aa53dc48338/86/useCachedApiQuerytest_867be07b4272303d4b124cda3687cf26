2bc443190d10c05ca5d8025c3d50ae79
_getJestObj().mock("../../src/hooks/useCache", function () {
  return {
    useCache: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _reactHooks = require("@testing-library/react-hooks");
var _useCachedApiQuery = require("../../src/hooks/useCachedApiQuery");
var _useCache = require("../../src/hooks/useCache");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
global.fetch = jest.fn();
describe('useCachedApiQuery', function () {
  var mockEndpoint = '/api/test';
  var mockParams = {
    id: 1,
    filter: 'active'
  };
  var mockData = {
    id: 1,
    name: 'Test Data'
  };
  var mockUseCacheReturn = {
    data: mockData,
    loading: false,
    error: null,
    refetch: jest.fn(),
    invalidateCache: jest.fn()
  };
  beforeEach(function () {
    jest.clearAllMocks();
    _useCache.useCache.mockReturnValue(mockUseCacheReturn);
    global.fetch.mockResolvedValue({
      ok: true,
      json: jest.fn().mockResolvedValue({
        success: true,
        data: mockData
      })
    });
  });
  it('useCache를 올바른 파라미터로 호출한다', function () {
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams);
    });
    expect(_useCache.useCache).toHaveBeenCalledWith(`api:${mockEndpoint}:${JSON.stringify(mockParams)}`, expect.any(Function), {
      ttl: undefined,
      autoLoad: true
    });
  });
  it('useCache에서 반환된 데이터, 로딩, 에러 상태를 반환한다', function () {
    var _renderHook = (0, _reactHooks.renderHook)(function () {
        return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams);
      }),
      result = _renderHook.result;
    expect(result.current.data).toBe(mockData);
    expect(result.current.loading).toBe(false);
    expect(result.current.error).toBe(null);
    expect(result.current.refetch).toBe(mockUseCacheReturn.refetch);
    expect(result.current.invalidateCache).toBe(mockUseCacheReturn.invalidateCache);
  });
  it('fetchData 함수는 올바른 API 엔드포인트로 요청한다', (0, _asyncToGenerator2.default)(function* () {
    var fetchDataFn;
    _useCache.useCache.mockImplementation(function (key, fetchFn) {
      fetchDataFn = fetchFn;
      return mockUseCacheReturn;
    });
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams);
    });
    yield fetchDataFn();
    expect(global.fetch).toHaveBeenCalledWith(`${mockEndpoint}?id=1&filter=active`);
  }));
  it('API 응답이 실패하면 오류를 발생시킨다', (0, _asyncToGenerator2.default)(function* () {
    global.fetch.mockResolvedValue({
      ok: true,
      json: jest.fn().mockResolvedValue({
        success: false,
        error: '데이터를 가져오는데 실패했습니다.'
      })
    });
    var fetchDataFn;
    _useCache.useCache.mockImplementation(function (key, fetchFn) {
      fetchDataFn = fetchFn;
      return mockUseCacheReturn;
    });
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams);
    });
    yield expect(fetchDataFn()).rejects.toThrow('데이터를 가져오는데 실패했습니다.');
  }));
  it('onSuccess 콜백이 제공되면 데이터 로드 성공 시 호출된다', (0, _asyncToGenerator2.default)(function* () {
    var mockOnSuccess = jest.fn();
    var fetchDataFn;
    _useCache.useCache.mockImplementation(function (key, fetchFn) {
      fetchDataFn = fetchFn;
      return mockUseCacheReturn;
    });
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams, {
        onSuccess: mockOnSuccess
      });
    });
    yield fetchDataFn();
    expect(mockOnSuccess).toHaveBeenCalledWith(mockData);
  }));
  it('HTTP 요청 실패 시 오류를 발생시킨다', (0, _asyncToGenerator2.default)(function* () {
    global.fetch.mockResolvedValue({
      ok: false,
      status: 404
    });
    var fetchDataFn;
    _useCache.useCache.mockImplementation(function (key, fetchFn) {
      fetchDataFn = fetchFn;
      return mockUseCacheReturn;
    });
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams);
    });
    yield expect(fetchDataFn()).rejects.toThrow('API 요청 오류: 404');
  }));
  it('onError 콜백이 제공되면 오류 발생 시 호출된다', function () {
    var mockOnError = jest.fn();
    var mockError = new Error('테스트 에러');
    _useCache.useCache.mockReturnValue(Object.assign({}, mockUseCacheReturn, {
      error: mockError
    }));
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams, {
        onError: mockOnError
      });
    });
    expect(mockOnError).toHaveBeenCalledWith(mockError);
  });
  it('ttl과 autoLoad 옵션을 useCache에 전달한다', function () {
    var ttl = 60000;
    var autoLoad = false;
    (0, _reactHooks.renderHook)(function () {
      return (0, _useCachedApiQuery.useCachedApiQuery)(mockEndpoint, mockParams, {
        ttl: ttl,
        autoLoad: autoLoad
      });
    });
    expect(_useCache.useCache).toHaveBeenCalledWith(expect.any(String), expect.any(Function), {
      ttl: ttl,
      autoLoad: autoLoad
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJ1c2VDYWNoZSIsImplc3QiLCJmbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlYWN0SG9va3MiLCJfdXNlQ2FjaGVkQXBpUXVlcnkiLCJfdXNlQ2FjaGUiLCJfcmVxdWlyZSIsImdsb2JhbCIsImZldGNoIiwiZGVzY3JpYmUiLCJtb2NrRW5kcG9pbnQiLCJtb2NrUGFyYW1zIiwiaWQiLCJmaWx0ZXIiLCJtb2NrRGF0YSIsIm5hbWUiLCJtb2NrVXNlQ2FjaGVSZXR1cm4iLCJkYXRhIiwibG9hZGluZyIsImVycm9yIiwicmVmZXRjaCIsImludmFsaWRhdGVDYWNoZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJvayIsImpzb24iLCJzdWNjZXNzIiwiaXQiLCJyZW5kZXJIb29rIiwidXNlQ2FjaGVkQXBpUXVlcnkiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbnkiLCJGdW5jdGlvbiIsInR0bCIsInVuZGVmaW5lZCIsImF1dG9Mb2FkIiwiX3JlbmRlckhvb2siLCJyZXN1bHQiLCJjdXJyZW50IiwidG9CZSIsImRlZmF1bHQiLCJmZXRjaERhdGFGbiIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImtleSIsImZldGNoRm4iLCJyZWplY3RzIiwidG9UaHJvdyIsIm1vY2tPblN1Y2Nlc3MiLCJvblN1Y2Nlc3MiLCJzdGF0dXMiLCJtb2NrT25FcnJvciIsIm1vY2tFcnJvciIsIkVycm9yIiwiT2JqZWN0IiwiYXNzaWduIiwib25FcnJvciIsIlN0cmluZyJdLCJzb3VyY2VzIjpbInVzZUNhY2hlZEFwaVF1ZXJ5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gX190ZXN0c19fL2hvb2tzL3VzZUNhY2hlZEFwaVF1ZXJ5LnRlc3QudHNcclxuaW1wb3J0IHsgcmVuZGVySG9vaywgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1ob29rcyc7XHJcbmltcG9ydCB7IHVzZUNhY2hlZEFwaVF1ZXJ5IH0gZnJvbSAnLi4vLi4vc3JjL2hvb2tzL3VzZUNhY2hlZEFwaVF1ZXJ5JztcclxuaW1wb3J0IHsgdXNlQ2FjaGUgfSBmcm9tICcuLi8uLi9zcmMvaG9va3MvdXNlQ2FjaGUnO1xyXG5cclxuLy8gZmV0Y2gg66qo7YK5XHJcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcclxuXHJcbi8vIHVzZUNhY2hlIOuqqO2CuVxyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9ob29rcy91c2VDYWNoZScsICgpID0+ICh7XHJcbiAgdXNlQ2FjaGU6IGplc3QuZm4oKSxcclxufSkpO1xyXG5cclxuZGVzY3JpYmUoJ3VzZUNhY2hlZEFwaVF1ZXJ5JywgKCkgPT4ge1xyXG4gIGNvbnN0IG1vY2tFbmRwb2ludCA9ICcvYXBpL3Rlc3QnO1xyXG4gIGNvbnN0IG1vY2tQYXJhbXMgPSB7IGlkOiAxLCBmaWx0ZXI6ICdhY3RpdmUnIH07XHJcbiAgY29uc3QgbW9ja0RhdGEgPSB7IGlkOiAxLCBuYW1lOiAnVGVzdCBEYXRhJyB9O1xyXG4gIFxyXG4gIC8vIHVzZUNhY2hlIOuwmO2ZmOqwkiDquLDrs7gg7ISk7KCVXHJcbiAgY29uc3QgbW9ja1VzZUNhY2hlUmV0dXJuID0ge1xyXG4gICAgZGF0YTogbW9ja0RhdGEsXHJcbiAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgIGVycm9yOiBudWxsLFxyXG4gICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgaW52YWxpZGF0ZUNhY2hlOiBqZXN0LmZuKCksXHJcbiAgfTtcclxuICBcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgXHJcbiAgICAvLyB1c2VDYWNoZSDrqqjtgrkg7ISk7KCVXHJcbiAgICAodXNlQ2FjaGUgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1VzZUNhY2hlUmV0dXJuKTtcclxuICAgIFxyXG4gICAgLy8gZmV0Y2gg66qo7YK5IOyEpOyglVxyXG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgb2s6IHRydWUsXHJcbiAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkYXRhOiBtb2NrRGF0YSxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3VzZUNhY2hl66W8IOyYrOuwlOuluCDtjIzrnbzrr7jthLDroZwg7Zi47Lac7ZWc64ukJywgKCkgPT4ge1xyXG4gICAgcmVuZGVySG9vaygoKSA9PiBcclxuICAgICAgdXNlQ2FjaGVkQXBpUXVlcnkobW9ja0VuZHBvaW50LCBtb2NrUGFyYW1zKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gdXNlQ2FjaGUg7Zi47LacIO2ZleyduFxyXG4gICAgZXhwZWN0KHVzZUNhY2hlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgYGFwaToke21vY2tFbmRwb2ludH06JHtKU09OLnN0cmluZ2lmeShtb2NrUGFyYW1zKX1gLFxyXG4gICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKSxcclxuICAgICAgeyB0dGw6IHVuZGVmaW5lZCwgYXV0b0xvYWQ6IHRydWUgfVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3VzZUNhY2hl7JeQ7IScIOuwmO2ZmOuQnCDrjbDsnbTthLAsIOuhnOuUqSwg7JeQ65+sIOyDge2DnOulvCDrsJjtmZjtlZzri6QnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcclxuICAgICAgdXNlQ2FjaGVkQXBpUXVlcnkobW9ja0VuZHBvaW50LCBtb2NrUGFyYW1zKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvQmUobW9ja0RhdGEpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmxvYWRpbmcpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlKG51bGwpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnJlZmV0Y2gpLnRvQmUobW9ja1VzZUNhY2hlUmV0dXJuLnJlZmV0Y2gpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmludmFsaWRhdGVDYWNoZSkudG9CZShtb2NrVXNlQ2FjaGVSZXR1cm4uaW52YWxpZGF0ZUNhY2hlKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2ZldGNoRGF0YSDtlajsiJjripQg7Jis67CU66W4IEFQSSDsl5Trk5ztj6zsnbjtirjroZwg7JqU7LKt7ZWc64ukJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gdXNlQ2FjaGUg64K067aAIGZldGNoRGF0YSDtlajsiJgg7LaU7LacXHJcbiAgICBsZXQgZmV0Y2hEYXRhRm46ICgpID0+IFByb21pc2U8YW55PjtcclxuICAgIFxyXG4gICAgKHVzZUNhY2hlIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKChrZXksIGZldGNoRm4pID0+IHtcclxuICAgICAgZmV0Y2hEYXRhRm4gPSBmZXRjaEZuO1xyXG4gICAgICByZXR1cm4gbW9ja1VzZUNhY2hlUmV0dXJuO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJlbmRlckhvb2soKCkgPT4gXHJcbiAgICAgIHVzZUNhY2hlZEFwaVF1ZXJ5KG1vY2tFbmRwb2ludCwgbW9ja1BhcmFtcylcclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIGZldGNoRGF0YSDtlajsiJgg7Zi47LacXHJcbiAgICBhd2FpdCAoZmV0Y2hEYXRhRm4gYXMgYW55KSgpO1xyXG4gICAgXHJcbiAgICAvLyBmZXRjaCDtmLjstpwg7ZmV7J24XHJcbiAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgYCR7bW9ja0VuZHBvaW50fT9pZD0xJmZpbHRlcj1hY3RpdmVgXHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnQVBJIOydkeuLteydtCDsi6TtjKjtlZjrqbQg7Jik66WY66W8IOuwnOyDneyLnO2CqOuLpCcsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIOyLpO2MqCDsnZHri7Ug66qo7YK5XHJcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICBvazogdHJ1ZSxcclxuICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ+uNsOydtO2EsOulvCDqsIDsoLjsmKTripTrjbAg7Iuk7Yyo7ZaI7Iq164uI64ukLicsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIHVzZUNhY2hlIOuCtOu2gCBmZXRjaERhdGEg7ZWo7IiYIOy2lOy2nFxyXG4gICAgbGV0IGZldGNoRGF0YUZuOiAoKSA9PiBQcm9taXNlPGFueT47XHJcbiAgICBcclxuICAgICh1c2VDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoa2V5LCBmZXRjaEZuKSA9PiB7XHJcbiAgICAgIGZldGNoRGF0YUZuID0gZmV0Y2hGbjtcclxuICAgICAgcmV0dXJuIG1vY2tVc2VDYWNoZVJldHVybjtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZW5kZXJIb29rKCgpID0+IFxyXG4gICAgICB1c2VDYWNoZWRBcGlRdWVyeShtb2NrRW5kcG9pbnQsIG1vY2tQYXJhbXMpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBmZXRjaERhdGEg7ZWo7IiYIO2YuOy2nCDsi5wg7Jik66WYIOuwnOyDnSDtmZXsnbhcclxuICAgIGF3YWl0IGV4cGVjdCgoZmV0Y2hEYXRhRm4gYXMgYW55KSgpKS5yZWplY3RzLnRvVGhyb3coJ+uNsOydtO2EsOulvCDqsIDsoLjsmKTripTrjbAg7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnb25TdWNjZXNzIOy9nOuwseydtCDsoJzqs7XrkJjrqbQg642w7J207YSwIOuhnOuTnCDshLHqs7Ug7IucIO2YuOy2nOuQnOuLpCcsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tPblN1Y2Nlc3MgPSBqZXN0LmZuKCk7XHJcbiAgICBcclxuICAgIC8vIHVzZUNhY2hlIOuCtOu2gCBmZXRjaERhdGEg7ZWo7IiYIOy2lOy2nFxyXG4gICAgbGV0IGZldGNoRGF0YUZuOiAoKSA9PiBQcm9taXNlPGFueT47XHJcbiAgICBcclxuICAgICh1c2VDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoa2V5LCBmZXRjaEZuKSA9PiB7XHJcbiAgICAgIGZldGNoRGF0YUZuID0gZmV0Y2hGbjtcclxuICAgICAgcmV0dXJuIG1vY2tVc2VDYWNoZVJldHVybjtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZW5kZXJIb29rKCgpID0+IFxyXG4gICAgICB1c2VDYWNoZWRBcGlRdWVyeShtb2NrRW5kcG9pbnQsIG1vY2tQYXJhbXMsIHsgb25TdWNjZXNzOiBtb2NrT25TdWNjZXNzIH0pXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBmZXRjaERhdGEg7ZWo7IiYIO2YuOy2nFxyXG4gICAgYXdhaXQgKGZldGNoRGF0YUZuIGFzIGFueSkoKTtcclxuICAgIFxyXG4gICAgLy8gb25TdWNjZXNzIOy9nOuwsSDtmLjstpwg7ZmV7J24XHJcbiAgICBleHBlY3QobW9ja09uU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja0RhdGEpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnSFRUUCDsmpTssq0g7Iuk7YyoIOyLnCDsmKTrpZjrpbwg67Cc7IOd7Iuc7YKo64ukJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gSFRUUCDsmKTrpZgg66qo7YK5XHJcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICBvazogZmFsc2UsXHJcbiAgICAgIHN0YXR1czogNDA0LFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIHVzZUNhY2hlIOuCtOu2gCBmZXRjaERhdGEg7ZWo7IiYIOy2lOy2nFxyXG4gICAgbGV0IGZldGNoRGF0YUZuOiAoKSA9PiBQcm9taXNlPGFueT47XHJcbiAgICBcclxuICAgICh1c2VDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoa2V5LCBmZXRjaEZuKSA9PiB7XHJcbiAgICAgIGZldGNoRGF0YUZuID0gZmV0Y2hGbjtcclxuICAgICAgcmV0dXJuIG1vY2tVc2VDYWNoZVJldHVybjtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZW5kZXJIb29rKCgpID0+IFxyXG4gICAgICB1c2VDYWNoZWRBcGlRdWVyeShtb2NrRW5kcG9pbnQsIG1vY2tQYXJhbXMpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBmZXRjaERhdGEg7ZWo7IiYIO2YuOy2nCDsi5wg7Jik66WYIOuwnOyDnSDtmZXsnbhcclxuICAgIGF3YWl0IGV4cGVjdCgoZmV0Y2hEYXRhRm4gYXMgYW55KSgpKS5yZWplY3RzLnRvVGhyb3coJ0FQSSDsmpTssq0g7Jik66WYOiA0MDQnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ29uRXJyb3Ig7L2c67Cx7J20IOygnOqzteuQmOuptCDsmKTrpZgg67Cc7IOdIOyLnCDtmLjstpzrkJzri6QnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrT25FcnJvciA9IGplc3QuZm4oKTtcclxuICAgIGNvbnN0IG1vY2tFcnJvciA9IG5ldyBFcnJvcign7YWM7Iqk7Yq4IOyXkOufrCcpO1xyXG4gICAgXHJcbiAgICAvLyDsl5Drn6wg7IOB7YOc66GcIHVzZUNhY2hlIOuqqO2CuVxyXG4gICAgKHVzZUNhY2hlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgLi4ubW9ja1VzZUNhY2hlUmV0dXJuLFxyXG4gICAgICBlcnJvcjogbW9ja0Vycm9yLFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJlbmRlckhvb2soKCkgPT4gXHJcbiAgICAgIHVzZUNhY2hlZEFwaVF1ZXJ5KG1vY2tFbmRwb2ludCwgbW9ja1BhcmFtcywgeyBvbkVycm9yOiBtb2NrT25FcnJvciB9KVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gb25FcnJvciDsvZzrsLEg7Zi47LacIO2ZleyduFxyXG4gICAgZXhwZWN0KG1vY2tPbkVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrRXJyb3IpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgndHRs6rO8IGF1dG9Mb2FkIOyYteyFmOydhCB1c2VDYWNoZeyXkCDsoITri6ztlZzri6QnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0dGwgPSA2MDAwMDsgLy8gMeu2hFxyXG4gICAgY29uc3QgYXV0b0xvYWQgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgcmVuZGVySG9vaygoKSA9PiBcclxuICAgICAgdXNlQ2FjaGVkQXBpUXVlcnkobW9ja0VuZHBvaW50LCBtb2NrUGFyYW1zLCB7IHR0bCwgYXV0b0xvYWQgfSlcclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIHVzZUNhY2hlIO2YuOy2nCDtmZXsnbhcclxuICAgIGV4cGVjdCh1c2VDYWNoZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKSxcclxuICAgICAgZXhwZWN0LmFueShGdW5jdGlvbiksXHJcbiAgICAgIHsgdHRsLCBhdXRvTG9hZCB9XHJcbiAgICApO1xyXG4gIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiJBQVNBQSxXQUFBLEdBQUtDLElBQUksNkJBQTZCO0VBQUEsT0FBTztJQUMzQ0MsUUFBUSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNwQixDQUFDO0FBQUEsQ0FBQyxDQUFD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