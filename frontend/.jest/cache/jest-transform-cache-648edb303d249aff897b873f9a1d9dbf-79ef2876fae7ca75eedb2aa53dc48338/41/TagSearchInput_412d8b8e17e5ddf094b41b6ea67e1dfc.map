{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_tagService","_interopRequireDefault","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","isValidApiTagResponse","response","data","Array","isArray","every","tag","tag_id","name","TagSearchInput","_ref","onTagSelect","_ref$selectedTags","selectedTags","_ref$placeholder","placeholder","_ref$maxTags","maxTags","_useState","useState","_useState2","_slicedToArray2","searchText","setSearchText","_useState3","_useState4","tags","setTags","_useState5","_useState6","filteredTags","setFilteredTags","_useState7","_useState8","loading","setLoading","_useState9","_useState10","isDropdownVisible","setIsDropdownVisible","_useState11","_useState12","error","setError","inputRef","useRef","selectedTagIds","useMemo","map","fetchTags","useCallback","_asyncToGenerator2","tagService","getAllTags","Error","console","fallbackTags","useEffect","handleSearchChange","text","trim","filtered","filter","toLowerCase","includes","handleTagPress","length","current","focus","handleCreateTag","_ref3","createTag","newTag","prevTags","concat","_toConsumableArray2","apply","arguments","hideDropdown","renderTagItem","jsx","TouchableOpacity","style","styles","dropdownItem","onPress","children","jsxs","Text","dropdownItemText","toString","View","container","errorText","maxTagsText","Fragment","TextInput","ref","input","value","onChangeText","onFocus","onSubmitEditing","ActivityIndicator","size","color","dropdown","ScrollView","dropdownList","createTagButton","createTagText","noResultsText","StyleSheet","create","width","height","borderWidth","borderColor","borderRadius","paddingHorizontal","fontSize","backgroundColor","marginTop","fontStyle","marginBottom","position","top","left","right","maxHeight","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","zIndex","padding","borderBottomWidth","hairlineWidth","borderBottomColor","fontWeight","textAlign","_default","exports"],"sources":["TagSearchInput.tsx"],"sourcesContent":["// components/TagSearchInput.tsx\r\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { \r\n  View, \r\n  Text, \r\n  TextInput, \r\n  TouchableOpacity, \r\n  StyleSheet, \r\n  ActivityIndicator,\r\n  ScrollView,\r\n  // Keyboard API 직접 사용 제거\r\n} from 'react-native';\r\nimport tagService from '../services/api/tagService';\r\n\r\n// 타입 정의\r\ninterface Tag {\r\n  tag_id: number;\r\n  name: string;\r\n}\r\n\r\ninterface ApiTagResponse {\r\n  data: {\r\n    data: Tag[];\r\n  };\r\n}\r\n\r\ninterface TagSearchInputProps {\r\n  onTagSelect: (tag: Tag) => void;\r\n  selectedTags?: Tag[];\r\n  placeholder?: string;\r\n  maxTags?: number;\r\n}\r\n\r\n// 타입 가드 함수\r\nfunction isValidApiTagResponse(response: any): response is ApiTagResponse {\r\n  return (\r\n    response &&\r\n    response.data &&\r\n    Array.isArray(response.data.data) &&\r\n    response.data.data.every(\r\n      (tag: any) => \r\n        typeof tag === 'object' &&\r\n        typeof tag.tag_id === 'number' &&\r\n        typeof tag.name === 'string'\r\n    )\r\n  );\r\n}\r\n\r\nconst TagSearchInput: React.FC<TagSearchInputProps> = ({\r\n  onTagSelect,\r\n  selectedTags = [],\r\n  placeholder = '태그를 검색하세요',\r\n  maxTags = 5\r\n}) => {\r\n  const [searchText, setSearchText] = useState<string>('');\r\n  const [tags, setTags] = useState<Tag[]>([]);\r\n  const [filteredTags, setFilteredTags] = useState<Tag[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [isDropdownVisible, setIsDropdownVisible] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const inputRef = useRef<typeof TextInput>(null); // 수정: TextInput 타입 처리\r\n  \r\n  // 선택된 태그 ID 목록을 메모이제이션\r\n  const selectedTagIds = useMemo(() => {\r\n    return selectedTags.map(tag => tag.tag_id);\r\n  }, [selectedTags]);\r\n  \r\n  // 태그 목록 가져오기\r\n  const fetchTags = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // 실제 태그 서비스 API 호출\r\n      const response = await tagService.getAllTags();\r\n      \r\n      if (isValidApiTagResponse(response)) {\r\n        setTags(response.data.data);\r\n      } else {\r\n        throw new Error('유효하지 않은 태그 응답 형식');\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('태그 가져오기 오류:', error);\r\n      setError('태그 목록을 불러오는데 실패했습니다.');\r\n      \r\n      // 오류 발생 시 기본 태그 목록 제공\r\n      const fallbackTags: Tag[] = [\r\n        { tag_id: 1, name: '일상' },\r\n        { tag_id: 2, name: '감정' }\r\n      ];\r\n      setTags(fallbackTags);\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n  \r\n  // 컴포넌트 마운트 시 태그 목록 가져오기\r\n  useEffect(() => {\r\n    fetchTags();\r\n  }, [fetchTags]);\r\n  \r\n  // 검색어 변경 핸들러\r\n  const handleSearchChange = (text: string) => {\r\n    setSearchText(text);\r\n    \r\n    // 검색어 필터링 로직\r\n    if (text.trim() === '') {\r\n      setFilteredTags([]);\r\n      setIsDropdownVisible(false);\r\n    } else {\r\n      const filtered = tags.filter(tag => \r\n        tag.name.toLowerCase().includes(text.toLowerCase()) &&\r\n        !selectedTagIds.includes(tag.tag_id)\r\n      );\r\n      setFilteredTags(filtered);\r\n      setIsDropdownVisible(true);\r\n    }\r\n  };\r\n  \r\n  // 태그 클릭 핸들러\r\n  const handleTagPress = (tag: Tag) => {\r\n    // 태그 최대 개수 확인\r\n    if (selectedTags.length >= maxTags) {\r\n      return;\r\n    }\r\n    \r\n    onTagSelect(tag);\r\n    setSearchText('');\r\n    setFilteredTags([]);\r\n    setIsDropdownVisible(false);\r\n    \r\n    // focus 메서드 타입 오류 해결\r\n    if (inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  };\r\n  \r\n  // 태그 생성 핸들러 (검색 결과가 없을 때)\r\n  const handleCreateTag = async () => {\r\n    if (searchText.trim().length < 2) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      // 실제 태그 생성 API 호출\r\n      const response = await tagService.createTag(searchText.trim());\r\n      \r\n      if (response && response.data && response.data.data) {\r\n        const newTag: Tag = {\r\n          tag_id: response.data.data.tag_id,\r\n          name: response.data.data.name\r\n        };\r\n        \r\n        // 태그 목록에 추가\r\n        setTags(prevTags => [...prevTags, newTag]);\r\n        \r\n        // 선택된 태그로 추가\r\n        onTagSelect(newTag);\r\n        \r\n        // 상태 초기화\r\n        setSearchText('');\r\n        setFilteredTags([]);\r\n        setIsDropdownVisible(false);\r\n      } else {\r\n        throw new Error('유효하지 않은 태그 생성 응답');\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('태그 생성 오류:', error);\r\n      setError('태그 생성에 실패했습니다.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 드롭다운 외부 클릭 시 닫기\r\n  useEffect(() => {\r\n    const hideDropdown = () => {\r\n      setIsDropdownVisible(false);\r\n    };\r\n    \r\n    // 키보드 이벤트 관련 코드 제거 (테스트 환경에서 오류 발생)\r\n    \r\n    return () => {\r\n      // 클린업 함수 유지 (필요시 추가 로직)\r\n    };\r\n  }, []);\r\n  \r\n  // 태그 아이템 렌더링 함수\r\n  const renderTagItem = (tag: Tag) => {\r\n    return (\r\n      <TouchableOpacity\r\n        key={tag.tag_id.toString()}\r\n        style={styles.dropdownItem}\r\n        onPress={() => handleTagPress(tag)}\r\n      >\r\n        <Text style={styles.dropdownItemText}>#{tag.name}</Text>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <View style={styles.container}>\r\n      {/* 오류 메시지 */}\r\n      {error && (\r\n        <Text style={styles.errorText}>{error}</Text>\r\n      )}\r\n      \r\n      {/* 태그 최대 개수 도달 메시지 */}\r\n      {selectedTags.length >= maxTags ? (\r\n        <Text style={styles.maxTagsText}>최대 {maxTags}개의 태그까지 선택할 수 있습니다.</Text>\r\n      ) : (\r\n        <>\r\n          {/* 검색 입력 */}\r\n          <TextInput\r\n            ref={inputRef}\r\n            style={styles.input}\r\n            value={searchText}\r\n            onChangeText={handleSearchChange}\r\n            placeholder={selectedTags.length === 0 ? placeholder : `태그 추가 (${selectedTags.length}/${maxTags})`}\r\n            onFocus={() => searchText.trim() !== '' && setIsDropdownVisible(true)}\r\n            onSubmitEditing={() => {\r\n              if (filteredTags.length > 0) {\r\n                handleTagPress(filteredTags[0]);\r\n              } else if (searchText.trim() !== '') {\r\n                handleCreateTag();\r\n              }\r\n            }}\r\n          />\r\n          \r\n          {/* 로딩 인디케이터 */}\r\n          {loading && (\r\n            <View style={styles.loading}>\r\n              <ActivityIndicator size=\"small\" color=\"#4A6572\" />\r\n            </View>\r\n          )}\r\n          \r\n          {/* 검색 결과 드롭다운 */}\r\n          {isDropdownVisible && searchText.trim() !== '' && (\r\n            <View style={styles.dropdown}>\r\n              <ScrollView style={styles.dropdownList}>\r\n                {filteredTags.length > 0 ? (\r\n                  filteredTags.map(tag => renderTagItem(tag))\r\n                ) : (\r\n                  searchText.trim().length >= 2 ? (\r\n                    <TouchableOpacity\r\n                      style={styles.createTagButton}\r\n                      onPress={handleCreateTag}\r\n                    >\r\n                      <Text style={styles.createTagText}>\r\n                        \"{searchText}\" 태그 만들기\r\n                      </Text>\r\n                    </TouchableOpacity>\r\n                  ) : (\r\n                    <Text style={styles.noResultsText}>\r\n                      검색 결과가 없습니다. 2자 이상 입력하여 새 태그를 만들 수 있습니다.\r\n                    </Text>\r\n                  )\r\n                )}\r\n              </ScrollView>\r\n            </View>\r\n          )}\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    width: '100%',\r\n  },\r\n  input: {\r\n    height: 48,\r\n    borderWidth: 1,\r\n    borderColor: '#E1E8ED',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 12,\r\n    fontSize: 16,\r\n    backgroundColor: '#F8F9FA',\r\n  },\r\n  maxTagsText: {\r\n    fontSize: 14,\r\n    color: '#657786',\r\n    marginTop: 8,\r\n    fontStyle: 'italic',\r\n  },\r\n  errorText: {\r\n    fontSize: 14,\r\n    color: '#D32F2F',\r\n    marginBottom: 8,\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 52,\r\n    left: 0,\r\n    right: 0,\r\n    maxHeight: 200,\r\n    backgroundColor: '#FFFFFF',\r\n    borderWidth: 1,\r\n    borderColor: '#E1E8ED',\r\n    borderRadius: 8,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 3,\r\n    zIndex: 1000,\r\n  },\r\n  dropdownList: {\r\n    maxHeight: 200,\r\n  },\r\n  dropdownItem: {\r\n    padding: 12,\r\n    borderBottomWidth: StyleSheet.hairlineWidth,\r\n    borderBottomColor: '#E1E8ED',\r\n  },\r\n  dropdownItemText: {\r\n    fontSize: 14,\r\n    color: '#14171A',\r\n  },\r\n  createTagButton: {\r\n    padding: 12,\r\n    backgroundColor: '#F2F7FA',\r\n  },\r\n  createTagText: {\r\n    fontSize: 14,\r\n    color: '#4A6572',\r\n    fontWeight: '600',\r\n  },\r\n  noResultsText: {\r\n    padding: 12,\r\n    fontSize: 14,\r\n    color: '#657786',\r\n    fontStyle: 'italic',\r\n    textAlign: 'center',\r\n  },\r\n  loading: {\r\n    position: 'absolute',\r\n    right: 12,\r\n    top: 14,\r\n  },\r\n});\r\n\r\nexport default TagSearchInput;"],"mappings":"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","ignoreList":[]}