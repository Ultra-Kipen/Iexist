4c24e513eb5a92b8f3c80fbd6316de79
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var infoLog = require("../Utilities/infoLog");
var invariant = require('invariant');
var DEBUG = false;
var TaskQueue = function () {
  function TaskQueue(_ref) {
    var onMoreTasks = _ref.onMoreTasks;
    (0, _classCallCheck2.default)(this, TaskQueue);
    this._onMoreTasks = onMoreTasks;
    this._queueStack = [{
      tasks: [],
      popable: false
    }];
  }
  return (0, _createClass2.default)(TaskQueue, [{
    key: "enqueue",
    value: function enqueue(task) {
      this._getCurrentQueue().push(task);
    }
  }, {
    key: "enqueueTasks",
    value: function enqueueTasks(tasks) {
      var _this = this;
      tasks.forEach(function (task) {
        return _this.enqueue(task);
      });
    }
  }, {
    key: "cancelTasks",
    value: function cancelTasks(tasksToCancel) {
      this._queueStack = this._queueStack.map(function (queue) {
        return Object.assign({}, queue, {
          tasks: queue.tasks.filter(function (task) {
            return tasksToCancel.indexOf(task) === -1;
          })
        });
      }).filter(function (queue, idx) {
        return queue.tasks.length > 0 || idx === 0;
      });
    }
  }, {
    key: "hasTasksToProcess",
    value: function hasTasksToProcess() {
      return this._getCurrentQueue().length > 0;
    }
  }, {
    key: "processNext",
    value: function processNext() {
      var queue = this._getCurrentQueue();
      if (queue.length) {
        var task = queue.shift();
        try {
          if (typeof task === 'object' && task.gen) {
            DEBUG && infoLog('TaskQueue: genPromise for task ' + task.name);
            this._genPromise(task);
          } else if (typeof task === 'object' && task.run) {
            DEBUG && infoLog('TaskQueue: run task ' + task.name);
            task.run();
          } else {
            invariant(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\n' + JSON.stringify(task, null, 2));
            DEBUG && infoLog('TaskQueue: run anonymous task');
            task();
          }
        } catch (e) {
          e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;
          throw e;
        }
      }
    }
  }, {
    key: "_getCurrentQueue",
    value: function _getCurrentQueue() {
      var stackIdx = this._queueStack.length - 1;
      var queue = this._queueStack[stackIdx];
      if (queue.popable && queue.tasks.length === 0 && this._queueStack.length > 1) {
        this._queueStack.pop();
        DEBUG && infoLog('TaskQueue: popped queue: ', {
          stackIdx: stackIdx,
          queueStackSize: this._queueStack.length
        });
        return this._getCurrentQueue();
      } else {
        return queue.tasks;
      }
    }
  }, {
    key: "_genPromise",
    value: function _genPromise(task) {
      var _this2 = this;
      this._queueStack.push({
        tasks: [],
        popable: false
      });
      var stackIdx = this._queueStack.length - 1;
      var stackItem = this._queueStack[stackIdx];
      DEBUG && infoLog('TaskQueue: push new queue: ', {
        stackIdx: stackIdx
      });
      DEBUG && infoLog('TaskQueue: exec gen task ' + task.name);
      task.gen().then(function () {
        DEBUG && infoLog('TaskQueue: onThen for gen task ' + task.name, {
          stackIdx: stackIdx,
          queueStackSize: _this2._queueStack.length
        });
        stackItem.popable = true;
        _this2.hasTasksToProcess() && _this2._onMoreTasks();
      }).catch(function (ex) {
        setTimeout(function () {
          ex.message = `TaskQueue: Error resolving Promise in task ${task.name}: ${ex.message}`;
          throw ex;
        }, 0);
      });
    }
  }]);
}();
module.exports = TaskQueue;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiaW5mb0xvZyIsImludmFyaWFudCIsIkRFQlVHIiwiVGFza1F1ZXVlIiwiX3JlZiIsIm9uTW9yZVRhc2tzIiwiZGVmYXVsdCIsIl9vbk1vcmVUYXNrcyIsIl9xdWV1ZVN0YWNrIiwidGFza3MiLCJwb3BhYmxlIiwia2V5IiwidmFsdWUiLCJlbnF1ZXVlIiwidGFzayIsIl9nZXRDdXJyZW50UXVldWUiLCJwdXNoIiwiZW5xdWV1ZVRhc2tzIiwiX3RoaXMiLCJmb3JFYWNoIiwiY2FuY2VsVGFza3MiLCJ0YXNrc1RvQ2FuY2VsIiwibWFwIiwicXVldWUiLCJPYmplY3QiLCJhc3NpZ24iLCJmaWx0ZXIiLCJpbmRleE9mIiwiaWR4IiwibGVuZ3RoIiwiaGFzVGFza3NUb1Byb2Nlc3MiLCJwcm9jZXNzTmV4dCIsInNoaWZ0IiwiZ2VuIiwibmFtZSIsIl9nZW5Qcm9taXNlIiwicnVuIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJtZXNzYWdlIiwic3RhY2tJZHgiLCJwb3AiLCJxdWV1ZVN0YWNrU2l6ZSIsIl90aGlzMiIsInN0YWNrSXRlbSIsInRoZW4iLCJjYXRjaCIsImV4Iiwic2V0VGltZW91dCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJUYXNrUXVldWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93IHN0cmljdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgaW5mb0xvZyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9pbmZvTG9nJyk7XG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxudHlwZSBTaW1wbGVUYXNrID0ge1xuICBuYW1lOiBzdHJpbmcsXG4gIHJ1bjogKCkgPT4gdm9pZCxcbn07XG50eXBlIFByb21pc2VUYXNrID0ge1xuICBuYW1lOiBzdHJpbmcsXG4gIGdlbjogKCkgPT4gUHJvbWlzZTx2b2lkPixcbn07XG5leHBvcnQgdHlwZSBUYXNrID0gU2ltcGxlVGFzayB8IFByb21pc2VUYXNrIHwgKCgpID0+IHZvaWQpO1xuXG5jb25zdCBERUJVRzogZmFsc2UgPSBmYWxzZTtcblxuLyoqXG4gKiBUYXNrUXVldWUgLSBBIHN5c3RlbSBmb3IgcXVldWVpbmcgYW5kIGV4ZWN1dGluZyBhIG1peCBvZiBzaW1wbGUgY2FsbGJhY2tzIGFuZFxuICogdHJlZXMgb2YgZGVwZW5kZW50IHRhc2tzIGJhc2VkIG9uIFByb21pc2VzLiBObyB0YXNrcyBhcmUgZXhlY3V0ZWQgdW5sZXNzXG4gKiBgcHJvY2Vzc05leHRgIGlzIGNhbGxlZC5cbiAqXG4gKiBgZW5xdWV1ZWAgdGFrZXMgYSBUYXNrIG9iamVjdCB3aXRoIGVpdGhlciBhIHNpbXBsZSBgcnVuYCBjYWxsYmFjaywgb3IgYVxuICogYGdlbmAgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYFByb21pc2VgIGFuZCBwdXRzIGl0IGluIHRoZSBxdWV1ZS4gIElmIGEgZ2VuXG4gKiBmdW5jdGlvbiBpcyBzdXBwbGllZCwgdGhlbiB0aGUgcHJvbWlzZSBpdCByZXR1cm5zIHdpbGwgYmxvY2sgZXhlY3V0aW9uIG9mXG4gKiB0YXNrcyBhbHJlYWR5IGluIHRoZSBxdWV1ZSB1bnRpbCBpdCByZXNvbHZlcy4gVGhpcyBjYW4gYmUgdXNlZCB0byBtYWtlIHN1cmVcbiAqIHRoZSBmaXJzdCB0YXNrIGlzIGZ1bGx5IHJlc29sdmVkIChpbmNsdWRpbmcgYXN5bmNocm9ub3VzIGRlcGVuZGVuY2llcyB0aGF0XG4gKiBhbHNvIHNjaGVkdWxlIG1vcmUgdGFza3MgdmlhIGBlbnF1ZXVlYCkgYmVmb3JlIHN0YXJ0aW5nIG9uIHRoZSBuZXh0IHRhc2suXG4gKiBUaGUgYG9uTW9yZVRhc2tzYCBjb25zdHJ1Y3RvciBhcmd1bWVudCBpcyB1c2VkIHRvIGluZm9ybSB0aGUgb3duZXIgdGhhdCBhblxuICogYXN5bmMgdGFzayBoYXMgcmVzb2x2ZWQgYW5kIHRoYXQgdGhlIHF1ZXVlIHNob3VsZCBiZSBwcm9jZXNzZWQgYWdhaW4uXG4gKlxuICogTm90ZTogVGFza3MgYXJlIG9ubHkgYWN0dWFsbHkgZXhlY3V0ZWQgd2l0aCBleHBsaWNpdCBjYWxscyB0byBgcHJvY2Vzc05leHRgLlxuICovXG5jbGFzcyBUYXNrUXVldWUge1xuICAvKipcbiAgICogVGFza1F1ZXVlIGluc3RhbmNlcyBhcmUgc2VsZiBjb250YWluZWQgYW5kIGluZGVwZW5kZW50LCBzbyBtdWx0aXBsZSB0YXNrc1xuICAgKiBvZiB2YXJ5aW5nIHNlbWFudGljcyBhbmQgcHJpb3JpdHkgY2FuIG9wZXJhdGUgdG9nZXRoZXIuXG4gICAqXG4gICAqIGBvbk1vcmVUYXNrc2AgaXMgaW52b2tlZCB3aGVuIGBQcm9taXNlVGFza2BzIHJlc29sdmUgaWYgdGhlcmUgYXJlIG1vcmVcbiAgICogdGFza3MgdG8gcHJvY2Vzcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtvbk1vcmVUYXNrc306IHtvbk1vcmVUYXNrczogKCkgPT4gdm9pZCwgLi4ufSkge1xuICAgIHRoaXMuX29uTW9yZVRhc2tzID0gb25Nb3JlVGFza3M7XG4gICAgdGhpcy5fcXVldWVTdGFjayA9IFt7dGFza3M6IFtdLCBwb3BhYmxlOiBmYWxzZX1dO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRhc2sgdG8gdGhlIHF1ZXVlLiAgSXQgaXMgcmVjb21tZW5kZWQgdG8gbmFtZSB5b3VyIHRhc2tzIGZvciBlYXNpZXJcbiAgICogYXN5bmMgZGVidWdnaW5nLiBUYXNrcyB3aWxsIG5vdCBiZSBleGVjdXRlZCB1bnRpbCBgcHJvY2Vzc05leHRgIGlzIGNhbGxlZFxuICAgKiBleHBsaWNpdGx5LlxuICAgKi9cbiAgZW5xdWV1ZSh0YXNrOiBUYXNrKTogdm9pZCB7XG4gICAgdGhpcy5fZ2V0Q3VycmVudFF1ZXVlKCkucHVzaCh0YXNrKTtcbiAgfVxuXG4gIGVucXVldWVUYXNrcyh0YXNrczogQXJyYXk8VGFzaz4pOiB2b2lkIHtcbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4gdGhpcy5lbnF1ZXVlKHRhc2spKTtcbiAgfVxuXG4gIGNhbmNlbFRhc2tzKHRhc2tzVG9DYW5jZWw6IEFycmF5PFRhc2s+KTogdm9pZCB7XG4gICAgLy8gc2VhcmNoIHRocm91Z2ggYWxsIHRhc2tzIGFuZCByZW1vdmUgdGhlbS5cbiAgICB0aGlzLl9xdWV1ZVN0YWNrID0gdGhpcy5fcXVldWVTdGFja1xuICAgICAgLm1hcChxdWV1ZSA9PiAoe1xuICAgICAgICAuLi5xdWV1ZSxcbiAgICAgICAgdGFza3M6IHF1ZXVlLnRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2tzVG9DYW5jZWwuaW5kZXhPZih0YXNrKSA9PT0gLTEpLFxuICAgICAgfSkpXG4gICAgICAuZmlsdGVyKChxdWV1ZSwgaWR4KSA9PiBxdWV1ZS50YXNrcy5sZW5ndGggPiAwIHx8IGlkeCA9PT0gMCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIGBwcm9jZXNzTmV4dGAgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgdGFza3MgdGhhdCBhcmUgcmVhZHkgdG8gYmVcbiAgICogcHJvY2Vzc2VkIHdpdGggYHByb2Nlc3NOZXh0YCwgb3IgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0YXNrc1xuICAgKiB0byBiZSBwcm9jZXNzZWQgcmlnaHQgbm93LCBhbHRob3VnaCB0aGVyZSBtYXkgYmUgdGFza3MgaW4gdGhlIHF1ZXVlIHRoYXRcbiAgICogYXJlIGJsb2NrZWQgYnkgZWFybGllciBgUHJvbWlzZVRhc2tgcyB0aGF0IGhhdmVuJ3QgcmVzb2x2ZWQgeWV0LlxuICAgKiBgb25Nb3JlVGFza3NgIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGVhY2ggYFByb21pc2VUYXNrYCByZXNvbHZlcyBpZiB0aGVyZSBhcmVcbiAgICogdGFza3MgcmVhZHkgdG8gcnVuIGF0IHRoYXQgcG9pbnQuXG4gICAqL1xuICBoYXNUYXNrc1RvUHJvY2VzcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q3VycmVudFF1ZXVlKCkubGVuZ3RoID4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyB0aGUgbmV4dCB0YXNrIGluIHRoZSBxdWV1ZS5cbiAgICovXG4gIHByb2Nlc3NOZXh0KCk6IHZvaWQge1xuICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5fZ2V0Q3VycmVudFF1ZXVlKCk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgY29uc3QgdGFzayA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHRhc2sgPT09ICdvYmplY3QnICYmIHRhc2suZ2VuKSB7XG4gICAgICAgICAgREVCVUcgJiYgaW5mb0xvZygnVGFza1F1ZXVlOiBnZW5Qcm9taXNlIGZvciB0YXNrICcgKyB0YXNrLm5hbWUpO1xuICAgICAgICAgIHRoaXMuX2dlblByb21pc2UodGFzayk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRhc2sgPT09ICdvYmplY3QnICYmIHRhc2sucnVuKSB7XG4gICAgICAgICAgREVCVUcgJiYgaW5mb0xvZygnVGFza1F1ZXVlOiBydW4gdGFzayAnICsgdGFzay5uYW1lKTtcbiAgICAgICAgICB0YXNrLnJ1bigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAgIHR5cGVvZiB0YXNrID09PSAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgJ0V4cGVjdGVkIEZ1bmN0aW9uLCBTaW1wbGVUYXNrLCBvciBQcm9taXNlVGFzaywgYnV0IGdvdDpcXG4nICtcbiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGFzaywgbnVsbCwgMiksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBERUJVRyAmJiBpbmZvTG9nKCdUYXNrUXVldWU6IHJ1biBhbm9ueW1vdXMgdGFzaycpO1xuICAgICAgICAgIHRhc2soKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlLm1lc3NhZ2UgPVxuICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdXG4gICAgICAgICAgJ1Rhc2tRdWV1ZTogRXJyb3Igd2l0aCB0YXNrICcgKyAodGFzay5uYW1lIHx8ICcnKSArICc6ICcgKyBlLm1lc3NhZ2U7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3F1ZXVlU3RhY2s6IEFycmF5PHtcbiAgICB0YXNrczogQXJyYXk8VGFzaz4sXG4gICAgcG9wYWJsZTogYm9vbGVhbixcbiAgICAuLi5cbiAgfT47XG4gIF9vbk1vcmVUYXNrczogKCkgPT4gdm9pZDtcblxuICBfZ2V0Q3VycmVudFF1ZXVlKCk6IEFycmF5PFRhc2s+IHtcbiAgICBjb25zdCBzdGFja0lkeCA9IHRoaXMuX3F1ZXVlU3RhY2subGVuZ3RoIC0gMTtcbiAgICBjb25zdCBxdWV1ZSA9IHRoaXMuX3F1ZXVlU3RhY2tbc3RhY2tJZHhdO1xuICAgIGlmIChcbiAgICAgIHF1ZXVlLnBvcGFibGUgJiZcbiAgICAgIHF1ZXVlLnRhc2tzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgdGhpcy5fcXVldWVTdGFjay5sZW5ndGggPiAxXG4gICAgKSB7XG4gICAgICB0aGlzLl9xdWV1ZVN0YWNrLnBvcCgpO1xuICAgICAgREVCVUcgJiZcbiAgICAgICAgaW5mb0xvZygnVGFza1F1ZXVlOiBwb3BwZWQgcXVldWU6ICcsIHtcbiAgICAgICAgICBzdGFja0lkeCxcbiAgICAgICAgICBxdWV1ZVN0YWNrU2l6ZTogdGhpcy5fcXVldWVTdGFjay5sZW5ndGgsXG4gICAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXMuX2dldEN1cnJlbnRRdWV1ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcXVldWUudGFza3M7XG4gICAgfVxuICB9XG5cbiAgX2dlblByb21pc2UodGFzazogUHJvbWlzZVRhc2spIHtcbiAgICAvLyBFYWNoIGFzeW5jIHRhc2sgcHVzaGVzIGl0J3Mgb3duIHF1ZXVlIG9udG8gdGhlIHF1ZXVlIHN0YWNrLiBUaGlzXG4gICAgLy8gZWZmZWN0aXZlbHkgZGVmZXJzIGV4ZWN1dGlvbiBvZiBwcmV2aW91c2x5IHF1ZXVlZCB0YXNrcyB1bnRpbCB0aGUgcHJvbWlzZVxuICAgIC8vIHJlc29sdmVzLCBhdCB3aGljaCBwb2ludCB3ZSBhbGxvdyB0aGUgbmV3IHF1ZXVlIHRvIGJlIHBvcHBlZCwgd2hpY2hcbiAgICAvLyBoYXBwZW5zIG9uY2UgaXQgaXMgZnVsbHkgcHJvY2Vzc2VkLlxuICAgIHRoaXMuX3F1ZXVlU3RhY2sucHVzaCh7dGFza3M6IFtdLCBwb3BhYmxlOiBmYWxzZX0pO1xuICAgIGNvbnN0IHN0YWNrSWR4ID0gdGhpcy5fcXVldWVTdGFjay5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHN0YWNrSXRlbSA9IHRoaXMuX3F1ZXVlU3RhY2tbc3RhY2tJZHhdO1xuICAgIERFQlVHICYmIGluZm9Mb2coJ1Rhc2tRdWV1ZTogcHVzaCBuZXcgcXVldWU6ICcsIHtzdGFja0lkeH0pO1xuICAgIERFQlVHICYmIGluZm9Mb2coJ1Rhc2tRdWV1ZTogZXhlYyBnZW4gdGFzayAnICsgdGFzay5uYW1lKTtcbiAgICB0YXNrXG4gICAgICAuZ2VuKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgREVCVUcgJiZcbiAgICAgICAgICBpbmZvTG9nKCdUYXNrUXVldWU6IG9uVGhlbiBmb3IgZ2VuIHRhc2sgJyArIHRhc2submFtZSwge1xuICAgICAgICAgICAgc3RhY2tJZHgsXG4gICAgICAgICAgICBxdWV1ZVN0YWNrU2l6ZTogdGhpcy5fcXVldWVTdGFjay5sZW5ndGgsXG4gICAgICAgICAgfSk7XG4gICAgICAgIHN0YWNrSXRlbS5wb3BhYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oYXNUYXNrc1RvUHJvY2VzcygpICYmIHRoaXMuX29uTW9yZVRhc2tzKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGV4ID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZXgubWVzc2FnZSA9IGBUYXNrUXVldWU6IEVycm9yIHJlc29sdmluZyBQcm9taXNlIGluIHRhc2sgJHt0YXNrLm5hbWV9OiAke2V4Lm1lc3NhZ2V9YDtcbiAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRhc2tRdWV1ZTtcbiJdLCJtYXBwaW5ncyI6IkFBVUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsZ0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFFLGFBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUViLElBQU1HLE9BQU8sR0FBR0gsT0FBTyx1QkFBdUIsQ0FBQztBQUMvQyxJQUFNSSxTQUFTLEdBQUdKLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFZdEMsSUFBTUssS0FBWSxHQUFHLEtBQUs7QUFBQyxJQWtCckJDLFNBQVM7RUFRYixTQUFBQSxVQUFBQyxJQUFBLEVBQTJEO0lBQUEsSUFBOUNDLFdBQVcsR0FBQUQsSUFBQSxDQUFYQyxXQUFXO0lBQUEsSUFBQVAsZ0JBQUEsQ0FBQVEsT0FBQSxRQUFBSCxTQUFBO0lBQ3RCLElBQUksQ0FBQ0ksWUFBWSxHQUFHRixXQUFXO0lBQy9CLElBQUksQ0FBQ0csV0FBVyxHQUFHLENBQUM7TUFBQ0MsS0FBSyxFQUFFLEVBQUU7TUFBRUMsT0FBTyxFQUFF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