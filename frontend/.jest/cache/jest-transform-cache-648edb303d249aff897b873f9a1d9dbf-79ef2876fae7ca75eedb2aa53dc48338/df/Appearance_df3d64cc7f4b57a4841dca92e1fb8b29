cee8388624d32a68ebc5c1ead8670e5c
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addChangeListener = addChangeListener;
exports.getColorScheme = getColorScheme;
exports.setColorScheme = setColorScheme;
var _NativeEventEmitter = _interopRequireDefault(require("../EventEmitter/NativeEventEmitter"));
var _EventEmitter = _interopRequireDefault(require("../vendor/emitter/EventEmitter"));
var _DebugEnvironment = require("./DebugEnvironment");
var _invariant = _interopRequireDefault(require("invariant"));
var lazyState;
function getState() {
  if (lazyState != null) {
    return lazyState;
  }
  var eventEmitter = new _EventEmitter.default();
  var NativeAppearance = require("./NativeAppearance").default;
  if (NativeAppearance == null) {
    lazyState = {
      NativeAppearance: null,
      appearance: null,
      eventEmitter: eventEmitter
    };
  } else {
    var state = {
      NativeAppearance: NativeAppearance,
      appearance: null,
      eventEmitter: eventEmitter
    };
    new _NativeEventEmitter.default(NativeAppearance).addListener('appearanceChanged', function (newAppearance) {
      state.appearance = {
        colorScheme: toColorScheme(newAppearance.colorScheme)
      };
      eventEmitter.emit('change', state.appearance);
    });
    lazyState = state;
  }
  return lazyState;
}
function getColorScheme() {
  if (true) {
    if (_DebugEnvironment.isAsyncDebugging) {
      return 'light';
    }
  }
  var colorScheme = null;
  var state = getState();
  var NativeAppearance = state.NativeAppearance;
  if (NativeAppearance != null) {
    if (state.appearance == null) {
      state.appearance = {
        colorScheme: toColorScheme(NativeAppearance.getColorScheme())
      };
    }
    colorScheme = state.appearance.colorScheme;
  }
  return colorScheme;
}
function setColorScheme(colorScheme) {
  var state = getState();
  var NativeAppearance = state.NativeAppearance;
  if (NativeAppearance != null) {
    NativeAppearance.setColorScheme(colorScheme != null ? colorScheme : 'unspecified');
    state.appearance = {
      colorScheme: toColorScheme(NativeAppearance.getColorScheme())
    };
  }
}
function addChangeListener(listener) {
  var _getState = getState(),
    eventEmitter = _getState.eventEmitter;
  return eventEmitter.addListener('change', listener);
}
function toColorScheme(colorScheme) {
  (0, _invariant.default)(colorScheme === 'dark' || colorScheme === 'light' || colorScheme == null, "Unrecognized color scheme. Did you mean 'dark', 'light' or null?");
  return colorScheme;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlRXZlbnRFbWl0dGVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfRXZlbnRFbWl0dGVyIiwiX0RlYnVnRW52aXJvbm1lbnQiLCJfaW52YXJpYW50IiwibGF6eVN0YXRlIiwiZ2V0U3RhdGUiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJOYXRpdmVBcHBlYXJhbmNlIiwiZGVmYXVsdCIsImFwcGVhcmFuY2UiLCJzdGF0ZSIsIk5hdGl2ZUV2ZW50RW1pdHRlciIsImFkZExpc3RlbmVyIiwibmV3QXBwZWFyYW5jZSIsImNvbG9yU2NoZW1lIiwidG9Db2xvclNjaGVtZSIsImVtaXQiLCJnZXRDb2xvclNjaGVtZSIsImlzQXN5bmNEZWJ1Z2dpbmciLCJzZXRDb2xvclNjaGVtZSIsImFkZENoYW5nZUxpc3RlbmVyIiwibGlzdGVuZXIiLCJfZ2V0U3RhdGUiLCJpbnZhcmlhbnQiXSwic291cmNlcyI6WyJBcHBlYXJhbmNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqL1xuXG5pbXBvcnQgdHlwZSB7RXZlbnRTdWJzY3JpcHRpb259IGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgdHlwZSB7QXBwZWFyYW5jZVByZWZlcmVuY2VzLCBDb2xvclNjaGVtZU5hbWV9IGZyb20gJy4vTmF0aXZlQXBwZWFyYW5jZSc7XG5pbXBvcnQgdHlwZW9mIElOYXRpdmVBcHBlYXJhbmNlIGZyb20gJy4vTmF0aXZlQXBwZWFyYW5jZSc7XG5cbmltcG9ydCBOYXRpdmVFdmVudEVtaXR0ZXIgZnJvbSAnLi4vRXZlbnRFbWl0dGVyL05hdGl2ZUV2ZW50RW1pdHRlcic7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQge2lzQXN5bmNEZWJ1Z2dpbmd9IGZyb20gJy4vRGVidWdFbnZpcm9ubWVudCc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnR5cGUgQXBwZWFyYW5jZSA9IHtcbiAgY29sb3JTY2hlbWU6ID9Db2xvclNjaGVtZU5hbWUsXG59O1xuXG5sZXQgbGF6eVN0YXRlOiA/e1xuICArTmF0aXZlQXBwZWFyYW5jZTogSU5hdGl2ZUFwcGVhcmFuY2UsXG4gIC8vIENhY2hlIHRoZSBjb2xvciBzY2hlbWUgdG8gcmVkdWNlIHRoZSBjb3N0IG9mIHJlYWRpbmcgaXQgYmV0d2VlbiBjaGFuZ2VzLlxuICAvLyBOT1RFOiBJZiBgTmF0aXZlQXBwZWFyYW5jZWAgaXMgbnVsbCwgdGhpcyB3aWxsIGFsd2F5cyBiZSBudWxsLlxuICBhcHBlYXJhbmNlOiA/QXBwZWFyYW5jZSxcbiAgLy8gTk9URTogVGhpcyBpcyBub24tbnVsbGFibGUgdG8gbWFrZSBpdCBlYXNpZXIgZm9yIGBvbkNoYW5nZWRMaXN0ZW5lcmAgdG9cbiAgLy8gcmV0dXJuIGEgbm9uLW51bGxhYmxlIGBFdmVudFN1YnNjcmlwdGlvbmAgdmFsdWUuIFRoaXMgaXMgbm90IHRoZSBjb21tb25cbiAgLy8gcGF0aCwgc28gd2UgZG8gbm90IGhhdmUgdG8gb3Zlci1vcHRpbWl6ZSBpdC5cbiAgK2V2ZW50RW1pdHRlcjogRXZlbnRFbWl0dGVyPHtjaGFuZ2U6IFtBcHBlYXJhbmNlXX0+LFxufTtcblxuLyoqXG4gKiBFbnN1cmVzIHRoYXQgYWxsIHN0YXRlIGFuZCBsaXN0ZW5lcnMgYXJlIGxhemlseSBpbml0aWFsaXplZCBjb3JyZWN0bHkuXG4gKi9cbmZ1bmN0aW9uIGdldFN0YXRlKCk6ICROb25NYXliZVR5cGU8dHlwZW9mIGxhenlTdGF0ZT4ge1xuICBpZiAobGF6eVN0YXRlICE9IG51bGwpIHtcbiAgICByZXR1cm4gbGF6eVN0YXRlO1xuICB9XG4gIGNvbnN0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8e2NoYW5nZTogW0FwcGVhcmFuY2VdfT4oKTtcbiAgLy8gTk9URTogQXZvaWQgaW5pdGlhbGl6aW5nIGBOYXRpdmVBcHBlYXJhbmNlYCB1bnRpbCBpdCBpcyBhY3R1YWxseSB1c2VkLlxuICBjb25zdCBOYXRpdmVBcHBlYXJhbmNlID0gcmVxdWlyZSgnLi9OYXRpdmVBcHBlYXJhbmNlJykuZGVmYXVsdDtcbiAgaWYgKE5hdGl2ZUFwcGVhcmFuY2UgPT0gbnVsbCkge1xuICAgIC8vIEFzc2lnbiBgbnVsbGAgdG8gYXZvaWQgcmUtaW5pdGlhbGl6aW5nIG9uIHN1YnNlcXVlbnQgaW52b2NhdGlvbnMuXG4gICAgbGF6eVN0YXRlID0ge1xuICAgICAgTmF0aXZlQXBwZWFyYW5jZTogbnVsbCxcbiAgICAgIGFwcGVhcmFuY2U6IG51bGwsXG4gICAgICBldmVudEVtaXR0ZXIsXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzdGF0ZTogJE5vbk1heWJlVHlwZTx0eXBlb2YgbGF6eVN0YXRlPiA9IHtcbiAgICAgIE5hdGl2ZUFwcGVhcmFuY2UsXG4gICAgICBhcHBlYXJhbmNlOiBudWxsLFxuICAgICAgZXZlbnRFbWl0dGVyLFxuICAgIH07XG4gICAgbmV3IE5hdGl2ZUV2ZW50RW1pdHRlcjx7XG4gICAgICBhcHBlYXJhbmNlQ2hhbmdlZDogW0FwcGVhcmFuY2VQcmVmZXJlbmNlc10sXG4gICAgfT4oTmF0aXZlQXBwZWFyYW5jZSkuYWRkTGlzdGVuZXIoJ2FwcGVhcmFuY2VDaGFuZ2VkJywgbmV3QXBwZWFyYW5jZSA9PiB7XG4gICAgICBzdGF0ZS5hcHBlYXJhbmNlID0ge1xuICAgICAgICBjb2xvclNjaGVtZTogdG9Db2xvclNjaGVtZShuZXdBcHBlYXJhbmNlLmNvbG9yU2NoZW1lKSxcbiAgICAgIH07XG4gICAgICBldmVudEVtaXR0ZXIuZW1pdCgnY2hhbmdlJywgc3RhdGUuYXBwZWFyYW5jZSk7XG4gICAgfSk7XG4gICAgbGF6eVN0YXRlID0gc3RhdGU7XG4gIH1cbiAgcmV0dXJuIGxhenlTdGF0ZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvbG9yIHNjaGVtZSBwcmVmZXJlbmNlLiBUaGlzIHZhbHVlIG1heSBjaGFuZ2UsIHNvIHRoZVxuICogdmFsdWUgc2hvdWxkIG5vdCBiZSBjYWNoZWQgd2l0aG91dCBlaXRoZXIgbGlzdGVuaW5nIHRvIGNoYW5nZXMgb3IgdXNpbmdcbiAqIHRoZSBgdXNlQ29sb3JTY2hlbWVgIGhvb2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xvclNjaGVtZSgpOiA/Q29sb3JTY2hlbWVOYW1lIHtcbiAgaWYgKF9fREVWX18pIHtcbiAgICBpZiAoaXNBc3luY0RlYnVnZ2luZykge1xuICAgICAgLy8gSGFyZCBjb2RlIGxpZ2h0IHRoZW1lIHdoZW4gdXNpbmcgdGhlIGFzeW5jIGRlYnVnZ2VyIGFzXG4gICAgICAvLyBzeW5jIGNhbGxzIGFyZW4ndCBzdXBwb3J0ZWRcbiAgICAgIHJldHVybiAnbGlnaHQnO1xuICAgIH1cbiAgfVxuICBsZXQgY29sb3JTY2hlbWUgPSBudWxsO1xuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gIGNvbnN0IHtOYXRpdmVBcHBlYXJhbmNlfSA9IHN0YXRlO1xuICBpZiAoTmF0aXZlQXBwZWFyYW5jZSAhPSBudWxsKSB7XG4gICAgaWYgKHN0YXRlLmFwcGVhcmFuY2UgPT0gbnVsbCkge1xuICAgICAgLy8gTGF6aWx5IGluaXRpYWxpemUgYHN0YXRlLmFwcGVhcmFuY2VgLiBUaGlzIHNob3VsZCBvbmx5XG4gICAgICAvLyBoYXBwZW4gb25jZSBiZWNhdXNlIHdlIG5ldmVyIHJlYXNzaWduIGEgbnVsbCB2YWx1ZSB0byBpdC5cbiAgICAgIHN0YXRlLmFwcGVhcmFuY2UgPSB7XG4gICAgICAgIGNvbG9yU2NoZW1lOiB0b0NvbG9yU2NoZW1lKE5hdGl2ZUFwcGVhcmFuY2UuZ2V0Q29sb3JTY2hlbWUoKSksXG4gICAgICB9O1xuICAgIH1cbiAgICBjb2xvclNjaGVtZSA9IHN0YXRlLmFwcGVhcmFuY2UuY29sb3JTY2hlbWU7XG4gIH1cbiAgcmV0dXJuIGNvbG9yU2NoZW1lO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY29sb3Igc2NoZW1lIHRvIHRoZSBzdXBwbGllZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldENvbG9yU2NoZW1lKGNvbG9yU2NoZW1lOiA/Q29sb3JTY2hlbWVOYW1lKTogdm9pZCB7XG4gIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgY29uc3Qge05hdGl2ZUFwcGVhcmFuY2V9ID0gc3RhdGU7XG4gIGlmIChOYXRpdmVBcHBlYXJhbmNlICE9IG51bGwpIHtcbiAgICBOYXRpdmVBcHBlYXJhbmNlLnNldENvbG9yU2NoZW1lKGNvbG9yU2NoZW1lID8/ICd1bnNwZWNpZmllZCcpO1xuICAgIHN0YXRlLmFwcGVhcmFuY2UgPSB7XG4gICAgICBjb2xvclNjaGVtZTogdG9Db2xvclNjaGVtZShOYXRpdmVBcHBlYXJhbmNlLmdldENvbG9yU2NoZW1lKCkpLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgaGFuZGxlciB0aGF0IGlzIGZpcmVkIHdoZW4gYXBwZWFyYW5jZSBwcmVmZXJlbmNlcyBjaGFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDaGFuZ2VMaXN0ZW5lcihcbiAgbGlzdGVuZXI6ICh7Y29sb3JTY2hlbWU6ID9Db2xvclNjaGVtZU5hbWV9KSA9PiB2b2lkLFxuKTogRXZlbnRTdWJzY3JpcHRpb24ge1xuICBjb25zdCB7ZXZlbnRFbWl0dGVyfSA9IGdldFN0YXRlKCk7XG4gIHJldHVybiBldmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIoJ2NoYW5nZScsIGxpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBUT0RPOiAoaHJhbW9zKSBUNTI5MTk2NTIgVXNlID9Db2xvclNjaGVtZU5hbWUgb25jZSBjb2RlZ2VuIHN1cHBvcnRzIHVuaW9uXG4gKi9cbmZ1bmN0aW9uIHRvQ29sb3JTY2hlbWUoY29sb3JTY2hlbWU6ID9zdHJpbmcpOiA/Q29sb3JTY2hlbWVOYW1lIHtcbiAgaW52YXJpYW50KFxuICAgIGNvbG9yU2NoZW1lID09PSAnZGFyaycgfHwgY29sb3JTY2hlbWUgPT09ICdsaWdodCcgfHwgY29sb3JTY2hlbWUgPT0gbnVsbCxcbiAgICBcIlVucmVjb2duaXplZCBjb2xvciBzY2hlbWUuIERpZCB5b3UgbWVhbiAnZGFyaycsICdsaWdodCcgb3IgbnVsbD9cIixcbiAgKTtcbiAgcmV0dXJuIGNvbG9yU2NoZW1lO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBY0EsSUFBQUEsbUJBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGlCQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFNQSxJQUFJSSxTQVNIO0FBS0QsU0FBU0MsUUFBUUEsQ0FBQSxFQUFvQztFQUNuRCxJQUFJRCxTQUFTLElBQUksSUFBSSxFQUFFO0lBQ3JCLE9BQU9BLFNBQVM7RUFDbEI7RUFDQSxJQUFNRSxZQUFZLEdBQUcsSUFBSUMscUJBQVksQ0FBeUIsQ0FBQztFQUUvRCxJQUFNQyxnQkFBZ0IsR0FBR1IsT0FBTyxxQkFBcUIsQ0FBQyxDQUFDUyxPQUFPO0VBQzlELElBQUlELGdCQUFnQixJQUFJLElBQUksRUFBRTtJQUU1QkosU0FBUyxHQUFHO01BQ1ZJLGdCQUFnQixFQUFFLElBQUk7TUFDdEJFLFVBQVUsRUFBRSxJQUFJO01BQ2hCSixZQUFZLEVBQVpBO0lBQ0YsQ0FBQztFQUNILENBQUMsTUFBTTtJQUNMLElBQU1LLEtBQXNDLEdBQUc7TUFDN0NILGdCQUFnQixFQUFoQkEsZ0JBQWdCO01BQ2hCRSxVQUFVLEVBQUUsSUFBSTtNQUNoQkosWUFBWSxFQUFaQTtJQUNGLENBQUM7SUFDRCxJQUFJTSwyQkFBa0IsQ0FFbkJKLGdCQUFnQixDQUFDLENBQUNLLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxVQUFBQyxhQUFhLEVBQUk7TUFDckVILEtBQUssQ0FBQ0QsVUFBVSxHQUFHO1FBQ2pCSyxXQUFXLEVBQUVDLGFBQWEsQ0FBQ0YsYUFBYSxDQUFDQyxXQUFXO01BQ3RELENBQUM7TUFDRFQsWUFBWSxDQUFDVyxJQUFJLENBQUMsUUFBUSxFQUFFTixLQUFLLENBQUNELFVBQVUsQ0FBQztJQUMvQyxDQUFDLENBQUM7SUFDRk4sU0FBUyxHQUFHTyxLQUFLO0VBQ25CO0VBQ0EsT0FBT1AsU0FBUztBQUNsQjtBQU9PLFNBQVNjLGNBQWNBLENBQUEsRUFBcUI7RUFDakQsVUFBYTtJQUNYLElBQUlDLGtDQUFnQixFQUFFO01BR3BCLE9BQU8sT0FBTztJQUNoQjtFQUNGO0VBQ0EsSUFBSUosV0FBVyxHQUFHLElBQUk7RUFDdEIsSUFBTUosS0FBSyxHQUFHTixRQUFRLENBQUMsQ0FBQztFQUN4QixJQUFPRyxnQkFBZ0IsR0FBSUcsS0FBSyxDQUF6QkgsZ0JBQWdCO0VBQ3ZCLElBQUlBLGdCQUFnQixJQUFJLElBQUksRUFBRTtJQUM1QixJQUFJRyxLQUFLLENBQUNELFVBQVUsSUFBSSxJQUFJLEVBQUU7TUFHNUJDLEtBQUssQ0FBQ0QsVUFBVSxHQUFHO1FBQ2pCSyxXQUFXLEVBQUVDLGFBQWEsQ0FBQ1IsZ0JBQWdCLENBQUNVLGNBQWMsQ0FBQyxDQUFDO01BQzlELENBQUM7SUFDSDtJQUNBSCxXQUFXLEdBQUdKLEtBQUssQ0FBQ0QsVUFBVSxDQUFDSyxXQUFXO0VBQzVDO0VBQ0EsT0FBT0EsV0FBVztBQUNwQjtBQUtPLFNBQVNLLGNBQWNBLENBQUNMLFdBQTZCLEVBQVE7RUFDbEUsSUFBTUosS0FBSyxHQUFHTixRQUFRLENBQUMsQ0FBQztFQUN4QixJQUFPRyxnQkFBZ0IsR0FBSUcsS0FBSyxDQUF6QkgsZ0JBQWdCO0VBQ3ZCLElBQUlBLGdCQUFnQixJQUFJLElBQUksRUFBRTtJQUM1QkEsZ0JBQWdCLENBQUNZLGNBQWMsQ0FBQ0wsV0FBVyxXQUFYQSxXQUFXLEdBQUksYUFBYSxDQUFDO0lBQzdESixLQUFLLENBQUNELFVBQVUsR0FBRztNQUNqQkssV0FBVyxFQUFFQyxhQUFhLENBQUNSLGdCQUFnQixDQUFDVSxjQUFjLENBQUMsQ0FBQztJQUM5RCxDQUFDO0VBQ0g7QUFDRjtBQUtPLFNBQVNHLGlCQUFpQkEsQ0FDL0JDLFFBQW1ELEVBQ2hDO0VBQ25CLElBQUFDLFNBQUEsR0FBdUJsQixRQUFRLENBQUMsQ0FBQztJQUExQkMsWUFBWSxHQUFBaUIsU0FBQSxDQUFaakIsWUFBWTtFQUNuQixPQUFPQSxZQUFZLENBQUNPLFdBQVcsQ0FBQyxRQUFRLEVBQUVTLFFBQVEsQ0FBQztBQUNyRDtBQUtBLFNBQVNOLGFBQWFBLENBQUNELFdBQW9CLEVBQW9CO0VBQzdELElBQUFTLGtCQUFTLEVBQ1BULFdBQVcsS0FBSyxNQUFNLElBQUlBLFdBQVcsS0FBSyxPQUFPLElBQUlBLFdBQVcsSUFBSSxJQUFJLEVBQ3hFLGtFQUNGLENBQUM7RUFDRCxPQUFPQSxXQUFXO0FBQ3BCIiwiaWdub3JlTGlzdCI6W119